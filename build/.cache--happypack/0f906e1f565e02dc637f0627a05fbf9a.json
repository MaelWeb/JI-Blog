{"remainingRequest":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js?{\"presets\":[\"react-hmre\"]}!/Users/mael.liang/Workspace/node-koa-test/web/page/blog/Article/index.js","dependencies":[{"path":"/Users/mael.liang/Workspace/node-koa-test/web/page/blog/Article/index.js","mtime":1518004766166},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _index = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/redbox-react/lib/index.js');\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-catch-errors/lib/index.js');\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _react2 = require('react');\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _index5 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-hmr/lib/index.js');\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _Icon = require('../../../components/Icon');\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nvar _Comments = require('../Comments');\n\nvar _Comments2 = _interopRequireDefault(_Comments);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _articleLoading = require('./article-loading');\n\nvar _articleLoading2 = _interopRequireDefault(_articleLoading);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _components = {\n    Article: {\n        displayName: 'Article'\n    }\n};\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/blog/Article/index.js',\n    components: _components,\n    locals: [module],\n    imports: [_react3.default]\n});\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/blog/Article/index.js',\n    components: _components,\n    locals: [],\n    imports: [_react3.default, _index2.default]\n});\n\nfunction _wrapComponent(id) {\n    return function (Component) {\n        return _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2(_UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);\n    };\n}\n\n_moment2.default.locale('zh-cn');\n\nvar WEIBOKEY = '';\n\nvar Article = _wrapComponent('Article')(function (_Component) {\n    (0, _inherits3.default)(Article, _Component);\n\n    function Article(props) {\n        (0, _classCallCheck3.default)(this, Article);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (Article.__proto__ || (0, _getPrototypeOf2.default)(Article)).call(this, props));\n\n        var article = props.article,\n            comments = props.comments;\n\n        _this.state = {\n            article: article,\n            comments: comments\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(Article, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            var _this2 = this;\n\n            var params = this.props.match.params;\n            var article = this.state.article;\n\n            if (!article || article.id != params.id) {\n                _axios2.default.get('/api/get/article/' + params.id, {\n                    params: {\n                        filter: 1\n                    }\n                }).then(function (res) {\n                    var resData = res.data;\n                    document.title = resData.article.title + '  - \\u300CJI \\xB7 \\u8BB0\\u5C0F\\u6808\\u300D';\n                    _this2.setState({\n                        article: resData.article\n                    });\n                });\n\n                _axios2.default.get('/api/get/comments?articleid=' + params.id).then(function (res) {\n                    var resData = res.data;\n                    _this2.setState({\n                        comments: resData.comments\n                    });\n                });\n            }\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var article = this.state.article;\n\n            if (article) {\n                document.title = article.title + '  - \\u300CJI \\xB7 \\u8BB0\\u5C0F\\u6808\\u300D';\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _state = this.state,\n                article = _state.article,\n                comments = _state.comments;\n            var params = this.props.match.params;\n\n            var _article = article || {};\n            var cls = (0, _classnames2.default)('blog-article-layout', (0, _defineProperty3.default)({}, 'blog-article-' + (_article.category && _article.category.toLocaleLowerCase()), _article.category));\n            return _react3.default.createElement(\n                'div',\n                { className: cls },\n                _article.category == \"TRAVEL\" ? _react3.default.createElement(\n                    'div',\n                    { className: 'article-banner' },\n                    _react3.default.createElement('div', { className: 'bg', style: { backgroundImage: 'url(' + (_article.banner ? _article.banner : \"//cdn.liayal.com/12027196.jpg\") + ')' } }),\n                    _react3.default.createElement(\n                        'h2',\n                        { className: 'article-title' },\n                        _article.title\n                    )\n                ) : null,\n                article ? _react3.default.createElement(\n                    'article',\n                    { className: 'blog-article-body' },\n                    _article.category != \"TRAVEL\" ? _react3.default.createElement(\n                        'h2',\n                        { className: 'article-title' },\n                        _react3.default.createElement(\n                            'p',\n                            null,\n                            _react3.default.createElement(\n                                'em',\n                                null,\n                                _article.title\n                            )\n                        )\n                    ) : null,\n                    _react3.default.createElement(\n                        'p',\n                        { className: 'article-desc' },\n                        _react3.default.createElement(\n                            'span',\n                            null,\n                            _react3.default.createElement(_Icon2.default, { type: 'date' }),\n                            ' ',\n                            (0, _moment2.default)(_article.createTime).format('LL')\n                        ),\n                        _article.tags && _article.tags.length ? _react3.default.createElement(\n                            'span',\n                            { className: 'ml' },\n                            _react3.default.createElement(_Icon2.default, { type: 'cc-tag' }),\n                            ' ',\n                            _article.tags.map(function (tag) {\n                                return tag.name + ' ';\n                            })\n                        ) : null,\n                        _react3.default.createElement(\n                            'span',\n                            { className: 'ml' },\n                            _react3.default.createElement(_Icon2.default, { type: 'visit' }),\n                            ' ',\n                            _article.visited || 0\n                        )\n                    ),\n                    _react3.default.createElement('div', { className: 'article-content', dangerouslySetInnerHTML: { __html: _article.htmlContent } }),\n                    _react3.default.createElement(\n                        'div',\n                        { className: 'article-tips' },\n                        _react3.default.createElement(\n                            'p',\n                            null,\n                            '\\u5982\\u975E\\u7279\\u522B\\u6CE8\\u660E\\uFF0C\\u6587\\u7AE0\\u7686\\u4E3A\\u539F\\u521B\\u3002'\n                        ),\n                        _react3.default.createElement(\n                            'p',\n                            null,\n                            _react3.default.createElement(\n                                'b',\n                                null,\n                                '\\u8F6C\\u8F7D\\u8BF7\\u6CE8\\u660E\\u51FA\\u5904\\uFF1A'\n                            ),\n                            ' ',\n                            _react3.default.createElement(\n                                'a',\n                                { href: 'https://www.liayal.com/article/' + _article.id },\n                                'https://www.liayal.com/article/' + _article.id\n                            )\n                        )\n                    )\n                ) : _react3.default.createElement(_articleLoading2.default, null),\n                _react3.default.createElement(\n                    'section',\n                    { className: 'article-share-box' },\n                    _react3.default.createElement(\n                        'a',\n                        { href: 'https://service.weibo.com/share/share.php?url=' + encodeURIComponent('http://www.liayal.com/article/' + _article.id) + '&title=' + encodeURIComponent(_article.title) + '&pic=' + encodeURIComponent(_article.banner || '') + '&appkey=' + WEIBOKEY, className: 'share-icon' },\n                        _react3.default.createElement(_Icon2.default, { type: 'weibo' })\n                    ),\n                    _react3.default.createElement(\n                        'a',\n                        { href: 'http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=' + encodeURIComponent('http://www.liayal.com/article/' + _article.id) + '&title=' + encodeURIComponent(_article.title) + '&desc=' + encodeURIComponent(_article.abstract) + '&summary=' + encodeURIComponent(_article.abstract) + '&site=' + encodeURIComponent('//hynal.com'), className: 'share-icon' },\n                        _react3.default.createElement(_Icon2.default, { type: 'qzone' })\n                    ),\n                    _react3.default.createElement(\n                        'a',\n                        { href: 'http://shuo.douban.com/!service/share?href=' + encodeURIComponent('http://www.liayal.com/article/' + _article.id) + '&name=' + encodeURIComponent(_article.title) + '&text=' + encodeURIComponent(_article.abstract) + '&image=' + encodeURIComponent(_article.banner || '') + '&starid=0&aid=0&style=11', className: 'share-icon' },\n                        _react3.default.createElement(_Icon2.default, { type: 'douban' })\n                    )\n                ),\n                _react3.default.createElement(_Comments2.default, { articleid: params.id, comments: comments })\n            );\n        }\n    }]);\n    return Article;\n}(_react2.Component));\n\nexports.default = Article;",{"version":3,"sources":["web/page/blog/Article/index.js"],"names":["locale","WEIBOKEY","props","article","comments","state","params","match","id","get","filter","then","resData","res","data","document","title","setState","_article","cls","category","toLocaleLowerCase","backgroundImage","banner","createTime","format","tags","length","map","tag","name","visited","__html","htmlContent","encodeURIComponent","abstract"],"mappings":"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","file":"index.js","sourceRoot":"/Users/mael.liang/Workspace/node-koa-test","sourcesContent":["import React, { Component } from 'react';\nimport Axios from 'axios';\nimport Moment from 'moment';\nimport Icon from '../../../components/Icon';\nimport Comments from '../Comments';\nimport ClassNames from 'classnames';\nimport ArticleLoading from './article-loading';\n\nMoment.locale('zh-cn');\n\nconst WEIBOKEY = '';\nexport default class Article extends Component {\n    constructor(props) {\n        super(props);\n        const { article, comments } = props;\n        this.state = {\n            article,\n            comments\n        };\n    }\n\n    componentWillMount() {\n        const { match: {params} } = this.props;\n        const { article } = this.state;\n        if (!article || article.id != params.id) {\n            Axios.get(`/api/get/article/${params.id}`, {\n                params: {\n                    filter: 1\n                }\n            })\n            .then( res => {\n                let resData = res.data;\n                document.title = `${resData.article.title}  - 「JI · 记小栈」`;\n                this.setState({\n                    article: resData.article\n                });\n            })\n\n            Axios.get(`/api/get/comments?articleid=${params.id}`)\n                .then( res => {\n                    let resData = res.data;\n                    this.setState({\n                        comments: resData.comments\n                    })\n                })\n        }\n    }\n\n    componentDidMount() {\n        const { article } = this.state;\n        if (article) {\n            document.title = `${article.title}  - 「JI · 记小栈」`;\n        }\n    }\n\n    render() {\n        const { article, comments } = this.state;\n        const { match: {params} } = this.props;\n        let _article = article || {};\n        let cls = ClassNames('blog-article-layout', { [`blog-article-${_article.category && _article.category.toLocaleLowerCase()}`]:  _article.category});\n        return (\n            <div className={cls} >\n                { _article.category == \"TRAVEL\" ? <div className=\"article-banner\">\n                    <div className=\"bg\" style={{backgroundImage: `url(${ _article.banner ? _article.banner : \"//cdn.liayal.com/12027196.jpg\" })`} } />\n                    <h2 className=\"article-title\">{_article.title}</h2>\n                </div> : null}\n                { article ? <article className='blog-article-body'>\n                    { _article.category != \"TRAVEL\" ? <h2 className=\"article-title\"><p><em>{_article.title}</em></p></h2> : null}\n                    <p className=\"article-desc\">\n                        <span><Icon type='date' /> {Moment(_article.createTime).format('LL')}</span>\n                        { _article.tags && _article.tags.length ? <span className=\"ml\"><Icon type='cc-tag' /> {_article.tags.map( tag => tag.name + ' ')}</span> : null }\n                        <span className=\"ml\"><Icon type='visit' /> {_article.visited || 0}</span>\n                    </p>\n                    <div className=\"article-content\" dangerouslySetInnerHTML={ {__html: _article.htmlContent} } />\n                    <div className='article-tips'>\n                        <p>如非特别注明，文章皆为原创。</p>\n                        <p><b>转载请注明出处：</b> <a href={`https://www.liayal.com/article/${_article.id}`}>{`https://www.liayal.com/article/${_article.id}`}</a></p>\n                    </div>\n                </article> : <ArticleLoading />}\n                <section className='article-share-box'>\n                    <a href={`https://service.weibo.com/share/share.php?url=${encodeURIComponent(`http://www.liayal.com/article/${_article.id}`)}&title=${encodeURIComponent(_article.title)}&pic=${encodeURIComponent(_article.banner || '')}&appkey=${WEIBOKEY}` } className=\"share-icon\">\n                        <Icon type=\"weibo\" />\n                    </a>\n                    <a href={ `http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${encodeURIComponent(`http://www.liayal.com/article/${_article.id}`)}&title=${encodeURIComponent(_article.title)}&desc=${encodeURIComponent(_article.abstract)}&summary=${encodeURIComponent(_article.abstract)}&site=${encodeURIComponent('//hynal.com')}` } className=\"share-icon\">\n                        <Icon type=\"qzone\" />\n                    </a>\n                    <a href={ `http://shuo.douban.com/!service/share?href=${encodeURIComponent(`http://www.liayal.com/article/${_article.id}`)}&name=${encodeURIComponent(_article.title)}&text=${encodeURIComponent(_article.abstract)}&image=${encodeURIComponent(_article.banner || '')}&starid=0&aid=0&style=11` } className=\"share-icon\">\n                        <Icon type=\"douban\" />\n                    </a>\n                </section>\n                <Comments articleid={params.id} comments={comments} />\n            </div>\n        )\n    }\n}"]}]}