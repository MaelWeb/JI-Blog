{"remainingRequest":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js?{\"presets\":[\"react-hmre\"]}!/Users/mael.liang/Workspace/node-koa-test/web/page/admin/Login/index.js","dependencies":[{"path":"/Users/mael.liang/Workspace/node-koa-test/web/page/admin/Login/index.js","mtime":1513328414000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _tabs = require('antd/lib/tabs');\n\nvar _tabs2 = _interopRequireDefault(_tabs);\n\nvar _index = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/redbox-react/lib/index.js');\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-catch-errors/lib/index.js');\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _react2 = require('react');\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _index5 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-hmr/lib/index.js');\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _class, _temp;\n\nvar _md = require('md5');\n\nvar _md2 = _interopRequireDefault(_md);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _resigteForm = require('./resigte-form');\n\nvar _resigteForm2 = _interopRequireDefault(_resigteForm);\n\nvar _loginForm = require('./login-form');\n\nvar _loginForm2 = _interopRequireDefault(_loginForm);\n\nvar _funy = require('./funy');\n\nvar _funy2 = _interopRequireDefault(_funy);\n\nvar _jsCookie = require('js-cookie');\n\nvar _jsCookie2 = _interopRequireDefault(_jsCookie);\n\nrequire('./login.less');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _components = {\n    Login: {\n        displayName: 'Login'\n    }\n};\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/admin/Login/index.js',\n    components: _components,\n    locals: [module],\n    imports: [_react3.default]\n});\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/admin/Login/index.js',\n    components: _components,\n    locals: [],\n    imports: [_react3.default, _index2.default]\n});\n\nfunction _wrapComponent(id) {\n    return function (Component) {\n        return _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2(_UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);\n    };\n}\n\nvar TabPane = _tabs2.default.TabPane;\n\nvar Login = _wrapComponent('Login')((_temp = _class = function (_Component) {\n    (0, _inherits3.default)(Login, _Component);\n\n    function Login(props) {\n        (0, _classCallCheck3.default)(this, Login);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (Login.__proto__ || (0, _getPrototypeOf2.default)(Login)).call(this, props));\n\n        _this.handleSubmit = function (e) {\n            e.preventDefault();\n            _this.refs.loginForm.validateFields(function (err, values) {\n                if (!err) {\n                    values.password = (0, _md2.default)(values.password).toUpperCase();\n                    _axios2.default.post('/api/signin', values).then(function (res) {\n                        var result = res.data;\n                        if (result.code !== 200) {\n                            _this.context.showMessage(result.message);\n                        } else {\n                            _jsCookie2.default.set('_UserName', result.name);\n                            _this.props.history.push('/');\n                        }\n                    }).catch(function (error) {\n                        _this.context.showMessage('系统错误，请稍后再试');\n                    });\n                }\n            });\n        };\n\n        _this.handleRegisterSubmit = function (e) {\n            e.preventDefault();\n            _this.refs.registeForm.validateFields(function (err, values) {\n                if (!err) {\n                    _axios2.default.post('/api/singup', values).then(function (res) {\n                        var result = res.data;\n\n                        if (result.code != 200) {\n                            _this.context.showMessage(result.message);\n                        } else {\n                            _this.context.showMessage(result.message);\n                            _this.props.history.push('/login');\n                        }\n                    }).catch(function (error) {\n                        _this.context.showMessage('系统错误，请稍后再试');\n                    });\n                }\n            });\n        };\n\n        _this.tabClick = function (key) {\n            _this.props.history.push(key);\n        };\n\n        var match = props.match;\n\n        _this.state = {\n            one: [],\n            activeKey: match.path\n        };\n\n        return _this;\n    }\n\n    (0, _createClass3.default)(Login, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            _axios2.default.get('/api/one').then(function (res) {\n                _this2.setState({\n                    one: res.data.data\n                });\n            });\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextprops) {\n            var path = nextprops.match.path;\n\n            this.setState({\n                activeKey: path\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _state = this.state,\n                one = _state.one,\n                activeKey = _state.activeKey;\n\n            return _react3.default.createElement(\n                'div',\n                { className: 'login-layout', style: { minHeight: document.body.clientHeight } },\n                _react3.default.createElement(\n                    'div',\n                    { className: 'login-wrap' },\n                    _react3.default.createElement(\n                        'p',\n                        { className: 'jitang tl' },\n                        _react3.default.createElement(\n                            'span',\n                            null,\n                            'M'\n                        ),\n                        '\\u7ED9\\u81EA\\u5DF1\\u4E00\\u6B21\\u6587\\u827A\\u7684\\u673A\\u4F1A'\n                    ),\n                    _react3.default.createElement(\n                        _tabs2.default,\n                        { tabPosition: 'left', activeKey: activeKey || '/login', onTabClick: this.tabClick },\n                        _react3.default.createElement(\n                            TabPane,\n                            { tab: '\\u767B\\u5F55', key: '/login' },\n                            _react3.default.createElement(_loginForm2.default, { handleSubmit: this.handleSubmit, ref: 'loginForm' }),\n                            _react3.default.createElement(_funy2.default, { data: one })\n                        ),\n                        _react3.default.createElement(\n                            TabPane,\n                            { tab: '\\u6CE8\\u518C', key: '/registe' },\n                            _react3.default.createElement(_resigteForm2.default, { handleRegisterSubmit: this.handleRegisterSubmit, ref: 'registeForm' }),\n                            _react3.default.createElement(_funy2.default, { data: one })\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return Login;\n}(_react2.Component), _class.contextTypes = {\n    showMessage: _propTypes2.default.func\n}, _temp));\n\nexports.default = Login;",{"version":3,"sources":["web/page/admin/Login/index.js"],"names":["TabPane","props","handleSubmit","e","preventDefault","refs","loginForm","validateFields","err","values","password","toUpperCase","post","then","res","result","data","code","context","showMessage","message","set","name","history","push","catch","error","handleRegisterSubmit","registeForm","tabClick","key","match","state","one","activeKey","path","get","setState","nextprops","minHeight","document","body","clientHeight","contextTypes","func"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,UAAU,eAAKA,OAArB;;;;;AAGI,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA,wIACTA,KADS;;AAAA,cA+BnBC,YA/BmB,GA+BJ,aAAK;AAChBC,cAAEC,cAAF;AACA,kBAAKC,IAAL,CAAUC,SAAV,CAAoBC,cAApB,CAAmC,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAChD,oBAAI,CAACD,GAAL,EAAU;AACNC,2BAAOC,QAAP,GAAkB,kBAAID,OAAOC,QAAX,EAAqBC,WAArB,EAAlB;AACA,oCAAMC,IAAN,CAAW,aAAX,EAA0BH,MAA1B,EACKI,IADL,CACU,UAACC,GAAD,EAAQ;AACV,4BAAIC,SAASD,IAAIE,IAAjB;AACA,4BAAID,OAAOE,IAAP,KAAgB,GAApB,EAAyB;AACrB,kCAAKC,OAAL,CAAaC,WAAb,CAAyBJ,OAAOK,OAAhC;AACH,yBAFD,MAEO;AACH,+CAAQC,GAAR,CAAY,WAAZ,EAAyBN,OAAOO,IAAhC;AACA,kCAAKrB,KAAL,CAAWsB,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH;AACJ,qBATL,EAUKC,KAVL,CAUY,UAACC,KAAD,EAAW;AACf,8BAAKR,OAAL,CAAaC,WAAb,CAAyB,YAAzB;AACH,qBAZL;AAaH;AACJ,aAjBD;AAkBH,SAnDkB;;AAAA,cAuDnBQ,oBAvDmB,GAuDI,aAAK;AACxBxB,cAAEC,cAAF;AACA,kBAAKC,IAAL,CAAUuB,WAAV,CAAsBrB,cAAtB,CAAqC,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAClD,oBAAI,CAACD,GAAL,EAAU;AACN,oCAAMI,IAAN,CAAW,aAAX,EAA0BH,MAA1B,EACKI,IADL,CACU,UAACC,GAAD,EAAQ;AACV,4BAAIC,SAASD,IAAIE,IAAjB;;AAEA,4BAAID,OAAOE,IAAP,IAAe,GAAnB,EAAwB;AACpB,kCAAKC,OAAL,CAAaC,WAAb,CAAyBJ,OAAOK,OAAhC;AACH,yBAFD,MAEO;AACH,kCAAKF,OAAL,CAAaC,WAAb,CAAyBJ,OAAOK,OAAhC;AACA,kCAAKnB,KAAL,CAAWsB,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACH;AACJ,qBAVL,EAWKC,KAXL,CAWY,UAACC,KAAD,EAAW;AACf,8BAAKR,OAAL,CAAaC,WAAb,CAAyB,YAAzB;AACH,qBAbL;AAcH;AACJ,aAjBD;AAkBH,SA3EkB;;AAAA,cA6EnBU,QA7EmB,GA6ER,eAAO;AACd,kBAAK5B,KAAL,CAAWsB,OAAX,CAAmBC,IAAnB,CAAwBM,GAAxB;AACH,SA/EkB;;AAAA,YAERC,KAFQ,GAEC9B,KAFD,CAER8B,KAFQ;;AAGf,cAAKC,KAAL,GAAa;AACTC,iBAAK,EADI;AAETC,uBAAWH,MAAMI;AAFR,SAAb;;AAHe;AAQlB;;;;4CAOmB;AAAA;;AAChB,4BAAMC,GAAN,CAAU,UAAV,EACKvB,IADL,CACW,eAAO;AACV,uBAAKwB,QAAL,CAAc;AACVJ,yBAAKnB,IAAIE,IAAJ,CAASA;AADJ,iBAAd;AAGH,aALL;AAMH;;;kDAEyBsB,S,EAAW;AAAA,gBAClBH,IADkB,GACRG,SADQ,CACzBP,KADyB,CAClBI,IADkB;;AAEjC,iBAAKE,QAAL,CAAc;AACVH,2BAAWC;AADD,aAAd;AAGH;;;iCAoDQ;AAAA,yBAEoB,KAAKH,KAFzB;AAAA,gBAEEC,GAFF,UAEEA,GAFF;AAAA,gBAEOC,SAFP,UAEOA,SAFP;;AAGL,mBACI;AAAA;AAAA,kBAAK,WAAU,cAAf,EAA8B,OAAO,EAACK,WAAWC,SAASC,IAAT,CAAcC,YAA1B,EAArC;AACI;AAAA;AAAA,sBAAK,WAAU,YAAf;AACI;AAAA;AAAA,0BAAG,WAAU,WAAb;AAAyB;AAAA;AAAA;AAAA;AAAA,yBAAzB;AAAA;AAAA,qBADJ;AAEI;AAAA;AAAA,0BAAM,aAAY,MAAlB,EAAyB,WAAYR,aAAa,QAAlD,EAA4D,YAAa,KAAKL,QAA9E;AACI;AAAC,mCAAD;AAAA,8BAAS,KAAI,cAAb,EAAkB,KAAI,QAAtB;AACI,iFAAW,cAAe,KAAK3B,YAA/B,EAA8C,KAAI,WAAlD,GADJ;AAEI,4EAAM,MAAO+B,GAAb;AAFJ,yBADJ;AAKI;AAAC,mCAAD;AAAA,8BAAS,KAAI,cAAb,EAAkB,KAAI,UAAtB;AACI,mFAAa,sBAAuB,KAAKN,oBAAzC,EAAgE,KAAI,aAApE,GADJ;AAEI,4EAAM,MAAOM,GAAb;AAFJ;AALJ;AAFJ;AADJ,aADJ;AAiBH;;;6BA3FMU,Y,GAAe;AAClBxB,iBAAa,oBAAUyB;AADL,C","file":"index.js","sourceRoot":"/Users/mael.liang/Workspace/node-koa-test","sourcesContent":["import React, { Component } from 'react';\nimport Md5 from \"md5\";\nimport PropTypes from 'prop-types';\nimport { Icon, Tabs } from 'antd';\nimport Axios from 'axios';\nimport RegisteForm from './resigte-form';\nimport LoginForm from './login-form';\nimport Funy from './funy';\nimport Cookies from 'js-cookie';\nimport './login.less';\n\nconst TabPane = Tabs.TabPane;\n\nexport default class Login extends Component {\n    constructor(props) {\n        super(props);\n        const {match} = props;\n        this.state = {\n            one: [],\n            activeKey: match.path\n        };\n\n    }\n\n    static contextTypes = {\n        showMessage: PropTypes.func\n    };\n\n\n    componentDidMount() {\n        Axios.get('/api/one')\n            .then( res => {\n                this.setState({\n                    one: res.data.data\n                })\n            })\n    }\n\n    componentWillReceiveProps(nextprops) {\n        const { match:{path} } = nextprops;\n        this.setState({\n            activeKey: path\n        });\n    }\n\n    handleSubmit = e => {\n        e.preventDefault();\n        this.refs.loginForm.validateFields((err, values) => {\n            if (!err) {\n                values.password = Md5(values.password).toUpperCase();\n                Axios.post('/api/signin', values)\n                    .then((res)=> {\n                        let result = res.data;\n                        if (result.code !== 200) {\n                            this.context.showMessage(result.message);\n                        } else {\n                            Cookies.set('_UserName', result.name);\n                            this.props.history.push('/');\n                        }\n                    })\n                    .catch( (error) => {\n                        this.context.showMessage('系统错误，请稍后再试');\n                    });\n            }\n        });\n    }\n\n\n\n    handleRegisterSubmit = e => {\n        e.preventDefault();\n        this.refs.registeForm.validateFields((err, values) => {\n            if (!err) {\n                Axios.post('/api/singup', values)\n                    .then((res)=> {\n                        let result = res.data;\n\n                        if (result.code != 200) {\n                            this.context.showMessage(result.message);\n                        } else {\n                            this.context.showMessage(result.message);\n                            this.props.history.push('/login');\n                        }\n                    })\n                    .catch( (error) => {\n                        this.context.showMessage('系统错误，请稍后再试');\n                    });\n            }\n        });\n    }\n\n    tabClick = key => {\n        this.props.history.push(key);\n    }\n\n    render() {\n\n        const {one, activeKey} = this.state;\n        return (\n            <div className=\"login-layout\" style={{minHeight: document.body.clientHeight,}} >\n                <div className=\"login-wrap\">\n                    <p className=\"jitang tl\"><span>M</span>给自己一次文艺的机会</p>\n                    <Tabs tabPosition='left' activeKey={ activeKey || '/login'} onTabClick={ this.tabClick } >\n                        <TabPane tab=\"登录\" key=\"/login\">\n                            <LoginForm handleSubmit={ this.handleSubmit } ref='loginForm' />\n                            <Funy data={ one } />\n                        </TabPane>\n                        <TabPane tab=\"注册\" key=\"/registe\">\n                            <RegisteForm handleRegisterSubmit={ this.handleRegisterSubmit } ref='registeForm' />\n                            <Funy data={ one }/>\n                        </TabPane>\n                    </Tabs>\n                </div>\n            </div>\n        )\n    }\n}"]}]}