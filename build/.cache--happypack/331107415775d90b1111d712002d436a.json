{"remainingRequest":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js?{\"presets\":[\"react-hmre\"]}!/Users/mael.liang/Workspace/node-koa-test/web/page/admin/BooksManage/index.js","dependencies":[{"path":"/Users/mael.liang/Workspace/node-koa-test/web/page/admin/BooksManage/index.js","mtime":1515141180591},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _pagination = require('antd/lib/pagination');\n\nvar _pagination2 = _interopRequireDefault(_pagination);\n\nvar _upload = require('antd/lib/upload');\n\nvar _upload2 = _interopRequireDefault(_upload);\n\nvar _button = require('antd/lib/button');\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _switch = require('antd/lib/switch');\n\nvar _switch2 = _interopRequireDefault(_switch);\n\nvar _icon = require('antd/lib/icon');\n\nvar _icon2 = _interopRequireDefault(_icon);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _message2 = require('antd/lib/message');\n\nvar _message3 = _interopRequireDefault(_message2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _input = require('antd/lib/input');\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _layout = require('antd/lib/layout');\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nvar _index = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/redbox-react/lib/index.js');\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-catch-errors/lib/index.js');\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _react2 = require('react');\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _index5 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-hmr/lib/index.js');\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _class, _temp;\n\nvar _reactRouterDom = require('react-router-dom');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _config = require('../../../config/');\n\nrequire('./index.less');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _components = {\n    BooksManage: {\n        displayName: 'BooksManage'\n    }\n};\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/admin/BooksManage/index.js',\n    components: _components,\n    locals: [module],\n    imports: [_react3.default]\n});\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/admin/BooksManage/index.js',\n    components: _components,\n    locals: [],\n    imports: [_react3.default, _index2.default]\n});\n\nfunction _wrapComponent(id) {\n    return function (Component) {\n        return _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2(_UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);\n    };\n}\n\nvar Header = _layout2.default.Header,\n    Content = _layout2.default.Content,\n    Footer = _layout2.default.Footer;\nvar TextArea = _input2.default.TextArea;\n\nvar BooksManage = _wrapComponent('BooksManage')((_temp = _class = function (_Component) {\n    (0, _inherits3.default)(BooksManage, _Component);\n\n    function BooksManage(props) {\n        (0, _classCallCheck3.default)(this, BooksManage);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (BooksManage.__proto__ || (0, _getPrototypeOf2.default)(BooksManage)).call(this, props));\n\n        _this.uploadereChange = function (info) {\n            if (info.file.status === 'done') {\n                _message3.default.success(\"上传成功\");\n                var response = info.file.response;\n\n                _this.setState({\n                    imageUpUrl: '' + _config.IMG_URL + response.data.key,\n                    imageUrl: '' + _config.IMG_URL + response.data.key\n                });\n            }\n        };\n\n        _this.imgInputChange = function (e) {\n            _this.setState({\n                imageUrl: e.target.value\n            });\n        };\n\n        _this.textChange = function (e) {\n            _this.setState({\n                desc: e.target.value\n            });\n        };\n\n        _this.hrefChange = function (e) {\n            _this.setState({\n                href: e.target.value\n            });\n        };\n\n        _this.titleChange = function (e) {\n            _this.setState({\n                title: e.target.value\n            });\n        };\n\n        _this.authorChange = function (e) {\n            _this.setState({\n                author: e.target.value\n            });\n        };\n\n        _this.addBook = function (e) {\n            var _this$state = _this.state,\n                imageUrl = _this$state.imageUrl,\n                desc = _this$state.desc,\n                href = _this$state.href,\n                title = _this$state.title,\n                author = _this$state.author;\n\n\n            if (!title) return _message3.default.success(\"请添加书名\");\n            if (!author) return _message3.default.success(\"请添加作者\");\n            if (!desc) return _message3.default.success(\"请添加导言\");\n            if (!imageUrl) return _message3.default.success(\"请添加封面\");\n\n            _axios2.default.post('/api/create/book', { img: imageUrl, desc: desc, href: href, title: title, author: author }).then(function (res) {\n                if (res.data.code == 200) {\n                    _message3.default.success(\"添加成功\");\n                    _this.getBooks();\n                } else {\n                    _message3.default.error(\"添加失败\");\n                }\n            });\n        };\n\n        _this.bookUploaderChange = function (info, index) {\n            if (info.file.status === 'done') {\n                _message3.default.success(\"上传成功\");\n                var response = info.file.response;\n\n                _this.setState(function (preState) {\n                    preState.books[index].img = '' + _config.IMG_URL + response.data.key;\n\n                    return { books: preState.books };\n                });\n            }\n        };\n\n        _this.bookImgInputChange = function (e, index) {\n            var value = e.target.value;\n            _this.setState(function (preState) {\n                preState.books[index].img = value;\n\n                return { books: preState.books };\n            });\n        };\n\n        _this.bookTextChange = function (e, index) {\n            var value = e.target.value;\n            _this.setState(function (preState) {\n                preState.books[index].text = value;\n\n                return { books: preState.books };\n            });\n        };\n\n        _this.bookHrefChange = function (e, index) {\n            var value = e.target.value;\n            _this.setState(function (preState) {\n                preState.books[index].href = value;\n\n                return { books: preState.books };\n            });\n        };\n\n        _this.bookTitleChange = function (e, index) {\n            var value = e.target.value;\n            _this.setState(function (preState) {\n                preState.books[index].title = value;\n\n                return { books: preState.books };\n            });\n        };\n\n        _this.bookAuthorChange = function (e, index) {\n            var value = e.target.value;\n            _this.setState(function (preState) {\n                preState.books[index].author = value;\n\n                return { books: preState.books };\n            });\n        };\n\n        _this.updateBook = function (book) {\n            var id = book.id,\n                others = (0, _objectWithoutProperties3.default)(book, ['id']);\n\n            _axios2.default.post('/api/update/book/' + id, others).then(function (res) {\n                _message3.default.success(res.data.message);\n            });\n        };\n\n        _this.delete = function (book) {\n            var key = book.img.split(_config.IMG_URL)[1];\n            _this.deleteBookPic(key);\n            _this.deleteBook(book.id);\n        };\n\n        _this.changeReadingStatus = function (checked, index) {\n            _this.setState(function (preState) {\n                preState.books[index].isReading = checked;\n\n                return { books: preState.books };\n            });\n        };\n\n        _this.changePage = function (page) {\n            _this.getBooks(page);\n        };\n\n        _this.state = {\n            imageUrl: '',\n            imageUpUrl: '',\n            desc: '',\n            href: '',\n            title: '',\n            author: '',\n            allPage: 0,\n            allNum: 0,\n            page: 1,\n            pageSize: 10,\n            books: []\n        };\n\n        return _this;\n    }\n\n    (0, _createClass3.default)(BooksManage, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            this.getBooks();\n        }\n    }, {\n        key: 'getBooks',\n        value: function getBooks(_page) {\n            var _this2 = this;\n\n            var _state = this.state,\n                pageSize = _state.pageSize,\n                page = _state.page;\n\n            _axios2.default.get(\"/api/get/books\", {\n                params: {\n                    page: _page || page,\n                    size: pageSize\n                }\n            }).then(function (res) {\n                _this2.setState({\n                    books: res.data.books,\n                    page: res.data.page,\n                    allPage: res.data.allPage,\n                    allNum: res.data.allNum\n                });\n            });\n        }\n    }, {\n        key: 'deleteBook',\n        value: function deleteBook(id) {\n            var _this3 = this;\n\n            _axios2.default.delete('/api/book/' + id).then(function (res) {\n                _message3.default.success(res.data.message);\n                if (res.data.code == 200) {\n                    _this3.getBooks();\n                }\n            });\n        }\n    }, {\n        key: 'deleteBookPic',\n        value: function deleteBookPic(key) {\n            return _axios2.default.post(\"/api/filedelete\", {\n                key: key\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this4 = this;\n\n            var _state2 = this.state,\n                imageUrl = _state2.imageUrl,\n                imageUpUrl = _state2.imageUpUrl,\n                desc = _state2.desc,\n                href = _state2.href,\n                books = _state2.books,\n                title = _state2.title,\n                author = _state2.author,\n                allPage = _state2.allPage,\n                allNum = _state2.allNum,\n                page = _state2.page,\n                pageSize = _state2.pageSize;\n\n            return _react3.default.createElement(\n                _layout2.default,\n                { className: 'books-manage-layout' },\n                _react3.default.createElement(\n                    Header,\n                    { className: 'books-manage-header clearfix' },\n                    _react3.default.createElement(\n                        'h2',\n                        null,\n                        '\\u56FE\\u4E66\\u7BA1\\u7406'\n                    )\n                ),\n                _react3.default.createElement(\n                    Content,\n                    { className: 'books-manage-content' },\n                    books.length ? books.map(function (book, index) {\n                        return _react3.default.createElement(\n                            'div',\n                            { className: 'book-box', key: book.id },\n                            _react3.default.createElement(\n                                'div',\n                                { className: 'books-wrap' },\n                                _react3.default.createElement(\n                                    'div',\n                                    { className: 'book-img' },\n                                    book.img ? _react3.default.createElement('img', { src: book.img, alt: '' }) : _react3.default.createElement(_icon2.default, { type: 'picture' }),\n                                    _react3.default.createElement(_switch2.default, { checkedChildren: '\\u5728\\u8BFB', unCheckedChildren: '\\u8BFB\\u5B8C', defaultChecked: book.isReading, onChange: function onChange(checked) {\n                                            _this4.changeReadingStatus(checked, index);\n                                        } })\n                                ),\n                                _react3.default.createElement(\n                                    'div',\n                                    { className: 'book-info' },\n                                    _react3.default.createElement(\n                                        'label',\n                                        { htmlFor: '' },\n                                        _react3.default.createElement(_input2.default, { className: 'title', placeholder: '\\u4E66\\u540D', value: book.title, onChange: function onChange(e) {\n                                                _this4.bookTitleChange(e, index);\n                                            } })\n                                    ),\n                                    _react3.default.createElement(\n                                        'label',\n                                        { htmlFor: '' },\n                                        _react3.default.createElement(_input2.default, { className: 'author', placeholder: '\\u4F5C\\u8005', value: book.author, onChange: function onChange(e) {\n                                                _this4.bookAuthorChange(e, index);\n                                            } })\n                                    ),\n                                    _react3.default.createElement(\n                                        'label',\n                                        { htmlFor: '' },\n                                        _react3.default.createElement(TextArea, { className: 'info', placeholder: '\\u5BFC\\u8A00', row: '4', value: book.desc, onChange: function onChange(e) {\n                                                _this4.bookTextChange(e, index);\n                                            } })\n                                    ),\n                                    _react3.default.createElement(\n                                        'label',\n                                        { htmlFor: '' },\n                                        _react3.default.createElement(_input2.default, { placeholder: '\\u8BD5\\u8BFB\\u94FE\\u63A5', value: book.href, onChange: function onChange(e) {\n                                                _this4.bookHrefChange(e, index);\n                                            } })\n                                    ),\n                                    _react3.default.createElement(\n                                        'label',\n                                        { htmlFor: '' },\n                                        _react3.default.createElement(_input2.default, { placeholder: '\\u8BF7\\u8F93\\u5165\\u5C01\\u9762\\u5730\\u5740\\u6216\\u624B\\u52A8\\u4E0A\\u4F20', value: book.img, onChange: function onChange(e) {\n                                                _this4.bookImgInputChange(e, index);\n                                            } }),\n                                        _react3.default.createElement(\n                                            _upload2.default,\n                                            {\n                                                className: 'uploader',\n                                                accept: 'image/*',\n                                                action: '/api/fileupload',\n                                                data: { prefix: 'book/' },\n                                                showUploadList: false,\n                                                onChange: function onChange(info) {\n                                                    _this4.bookUploaderChange(info, index);\n                                                } },\n                                            _react3.default.createElement(\n                                                _button2.default,\n                                                null,\n                                                _react3.default.createElement(_icon2.default, { type: 'upload' }),\n                                                '\\u70B9\\u51FB\\u4E0A\\u4F20'\n                                            )\n                                        )\n                                    ),\n                                    _react3.default.createElement(\n                                        'div',\n                                        { className: 'btn' },\n                                        _react3.default.createElement(\n                                            _button2.default,\n                                            { onClick: function onClick() {\n                                                    _this4.updateBook(book);\n                                                } },\n                                            '\\u4FDD\\u5B58'\n                                        ),\n                                        _react3.default.createElement(\n                                            _button2.default,\n                                            { onClick: function onClick() {\n                                                    _this4.delete(book);\n                                                } },\n                                            '\\u5220\\u9664'\n                                        )\n                                    )\n                                )\n                            )\n                        );\n                    }) : null,\n                    _react3.default.createElement(\n                        'div',\n                        { className: 'book-box add-box' },\n                        _react3.default.createElement(\n                            'div',\n                            { className: 'books-wrap' },\n                            _react3.default.createElement(\n                                'div',\n                                { className: 'book-img' },\n                                imageUrl ? _react3.default.createElement('img', { src: imageUrl, alt: '' }) : _react3.default.createElement(_icon2.default, { type: 'picture' })\n                            ),\n                            _react3.default.createElement(\n                                'div',\n                                { className: 'book-info' },\n                                _react3.default.createElement(\n                                    'label',\n                                    { htmlFor: '' },\n                                    _react3.default.createElement(_input2.default, { className: 'title', placeholder: '\\u4E66\\u540D', value: title, onChange: this.titleChange })\n                                ),\n                                _react3.default.createElement(\n                                    'label',\n                                    { htmlFor: '' },\n                                    _react3.default.createElement(_input2.default, { className: 'author', placeholder: '\\u4F5C\\u8005', value: author, onChange: this.authorChange })\n                                ),\n                                _react3.default.createElement(\n                                    'label',\n                                    { htmlFor: '' },\n                                    _react3.default.createElement(TextArea, { className: 'info', placeholder: '\\u5BFC\\u8A00', value: desc, onChange: this.textChange, autosize: { minRows: 2, maxRows: 6 } })\n                                ),\n                                _react3.default.createElement(\n                                    'label',\n                                    { htmlFor: '' },\n                                    _react3.default.createElement(_input2.default, { placeholder: '\\u8BF7\\u8F93\\u5165\\u5C01\\u9762\\u5730\\u5740\\u6216\\u624B\\u52A8\\u4E0A\\u4F20', value: imageUrl, onChange: this.imgInputChange }),\n                                    _react3.default.createElement(\n                                        _upload2.default,\n                                        {\n                                            className: 'uploader',\n                                            accept: 'image/*',\n                                            action: '/api/fileupload',\n                                            data: { prefix: 'books/' },\n                                            showUploadList: false,\n                                            onChange: this.uploadereChange },\n                                        _react3.default.createElement(\n                                            _button2.default,\n                                            null,\n                                            _react3.default.createElement(_icon2.default, { type: 'upload' }),\n                                            '\\u70B9\\u51FB\\u4E0A\\u4F20'\n                                        )\n                                    )\n                                ),\n                                _react3.default.createElement(\n                                    'label',\n                                    { htmlFor: '' },\n                                    _react3.default.createElement(_input2.default, { placeholder: '\\u8BD5\\u8BFB\\u94FE\\u63A5', value: href, onChange: this.hrefChange })\n                                ),\n                                _react3.default.createElement(\n                                    'div',\n                                    { className: 'btn' },\n                                    _react3.default.createElement(\n                                        _button2.default,\n                                        { onClick: this.addBook },\n                                        '\\u6DFB\\u52A0'\n                                    )\n                                )\n                            )\n                        )\n                    )\n                ),\n                allPage > 1 ? _react3.default.createElement(\n                    Footer,\n                    null,\n                    _react3.default.createElement(_pagination2.default, { className: 'tc', showQuickJumper: true, current: page, total: allNum, onChange: this.changePage, pageSize: pageSize })\n                ) : null\n            );\n        }\n    }]);\n    return BooksManage;\n}(_react2.Component), _class.contextTypes = {\n    showMessage: _propTypes2.default.func\n}, _temp));\n\nexports.default = BooksManage;",{"version":3,"sources":["web/page/admin/BooksManage/index.js"],"names":["Header","Content","Footer","TextArea","props","uploadereChange","info","file","status","success","response","setState","imageUpUrl","data","key","imageUrl","imgInputChange","e","target","value","textChange","desc","hrefChange","href","titleChange","title","authorChange","author","addBook","state","post","img","then","res","code","getBooks","error","bookUploaderChange","index","preState","books","bookImgInputChange","bookTextChange","text","bookHrefChange","bookTitleChange","bookAuthorChange","updateBook","book","id","others","message","delete","split","deleteBookPic","deleteBook","changeReadingStatus","checked","isReading","changePage","page","allPage","allNum","pageSize","_page","get","params","size","length","map","prefix","minRows","maxRows","contextTypes","showMessage","func"],"mappings":"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","file":"index.js","sourceRoot":"/Users/mael.liang/Workspace/node-koa-test","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Layout, Upload, Button, Input, Icon, message, Switch, Pagination } from 'antd';\nimport PropTypes from 'prop-types';\nimport Axios from 'axios';\nimport {IMG_URL, IMG_QUERY} from '../../../config/';\nimport './index.less';\n\nconst {Header, Content, Footer} = Layout;\nconst { TextArea } = Input;\n\nexport default class BooksManage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imageUrl: '',\n            imageUpUrl: '',\n            desc: '',\n            href: '',\n            title: '',\n            author: '',\n            allPage: 0,\n            allNum: 0,\n            page: 1,\n            pageSize: 10,\n            books: []\n        };\n\n    }\n\n    static contextTypes = {\n        showMessage: PropTypes.func\n    };\n\n    componentWillMount() {\n        this.getBooks();\n    }\n\n    getBooks(_page) {\n        const { pageSize, page } = this.state;\n        Axios.get(\"/api/get/books\", {\n            params: {\n                page: _page || page,\n                size: pageSize\n            }\n        })\n        .then( res => {\n            this.setState({\n                books: res.data.books,\n                page: res.data.page,\n                allPage: res.data.allPage,\n                allNum: res.data.allNum\n            })\n        })\n    }\n\n    uploadereChange = (info) => {\n        if (info.file.status === 'done') {\n            message.success(\"上传成功\");\n            const { response } = info.file;\n            this.setState({\n                imageUpUrl: `${IMG_URL}${response.data.key}`,\n                imageUrl: `${IMG_URL}${response.data.key}`\n            });\n        }\n    }\n\n    imgInputChange = e => {\n        this.setState({\n            imageUrl: e.target.value\n        })\n    }\n\n    textChange = e => {\n        this.setState({\n            desc: e.target.value\n        })\n    }\n\n    hrefChange = e => {\n        this.setState({\n            href: e.target.value\n        })\n    }\n\n    titleChange = e => {\n        this.setState({\n            title: e.target.value\n        })\n    }\n\n    authorChange = e => {\n        this.setState({\n            author: e.target.value\n        })\n    }\n\n    addBook = e => {\n        const { imageUrl, desc, href, title, author } = this.state;\n\n        if (!title ) return message.success(\"请添加书名\");\n        if (!author ) return message.success(\"请添加作者\");\n        if (!desc ) return message.success(\"请添加导言\");\n        if (!imageUrl ) return message.success(\"请添加封面\");\n\n\n        Axios.post('/api/create/book', {img: imageUrl, desc, href, title, author })\n            .then( res => {\n                if (res.data.code == 200) {\n                    message.success(\"添加成功\");\n                    this.getBooks();\n                } else {\n                    message.error(\"添加失败\")\n                }\n            })\n    }\n\n    bookUploaderChange = (info, index) => {\n        if (info.file.status === 'done') {\n            message.success(\"上传成功\");\n            const { response } = info.file;\n            this.setState(preState => {\n                preState.books[index].img = `${IMG_URL}${response.data.key}`;\n\n                return { books: preState.books}\n            });\n        }\n    }\n\n    bookImgInputChange = (e, index) => {\n        let value = e.target.value;\n        this.setState(preState => {\n            preState.books[index].img =value;\n\n            return { books: preState.books}\n        })\n    }\n\n    bookTextChange = (e, index) => {\n        let value = e.target.value;\n        this.setState(preState => {\n            preState.books[index].text = value;\n\n            return { books: preState.books}\n        })\n    }\n\n    bookHrefChange = (e, index) => {\n        let value = e.target.value;\n        this.setState(preState => {\n            preState.books[index].href = value;\n\n            return { books: preState.books}\n        })\n    }\n\n    bookTitleChange = (e, index) => {\n        let value = e.target.value;\n        this.setState(preState => {\n            preState.books[index].title = value;\n\n            return { books: preState.books}\n        })\n    }\n\n    bookAuthorChange = (e, index) => {\n        let value = e.target.value;\n        this.setState(preState => {\n            preState.books[index].author = value;\n\n            return { books: preState.books}\n        })\n    }\n\n    updateBook = (book) => {\n        const { id, ...others } = book;\n        Axios.post(`/api/update/book/${id}`, others)\n            .then( res => {\n                message.success(res.data.message)\n            })\n    }\n\n    delete = book => {\n        let key = book.img.split(IMG_URL)[1];\n        this.deleteBookPic(key);\n        this.deleteBook(book.id);\n    }\n\n    deleteBook(id) {\n        Axios\n            .delete(`/api/book/${id}`)\n            .then( res => {\n                message.success(res.data.message)\n                if (res.data.code == 200) {\n                    this.getBooks();\n                }\n            });\n    }\n\n    deleteBookPic(key) {\n        return Axios.post(\"/api/filedelete\", {\n            key: key\n        })\n    }\n\n    changeReadingStatus = (checked, index) => {\n        this.setState(preState => {\n            preState.books[index].isReading = checked;\n\n            return { books: preState.books}\n        })\n    }\n\n    changePage = page => {\n        this.getBooks(page);\n    }\n\n    render() {\n        const {imageUrl, imageUpUrl, desc, href, books, title, author, allPage, allNum, page, pageSize} = this.state;\n        return (\n            <Layout className=\"books-manage-layout\">\n                <Header className='books-manage-header clearfix' >\n                    <h2>图书管理</h2>\n                </Header>\n                <Content className=\"books-manage-content\">\n                 { books.length ? books.map( (book, index) => <div className=\"book-box\" key={book.id} >\n                    <div className=\"books-wrap\">\n                        <div className=\"book-img\">\n                            { book.img ? <img src={book.img} alt=\"\"/> : <Icon type=\"picture\" />}\n                            <Switch checkedChildren=\"在读\" unCheckedChildren=\"读完\" defaultChecked={ book.isReading } onChange={ checked => { this.changeReadingStatus(checked, index) } } />\n                        </div>\n                        <div className=\"book-info\">\n                            <label htmlFor=\"\">\n                                <Input className=\"title\" placeholder=\"书名\" value={book.title} onChange={ e => { this.bookTitleChange(e, index) } } />\n                            </label>\n                            <label htmlFor=\"\">\n                                <Input className=\"author\" placeholder=\"作者\" value={book.author} onChange={ e => { this.bookAuthorChange(e, index) } } />\n                            </label>\n                             <label htmlFor=\"\">\n                                <TextArea className=\"info\" placeholder=\"导言\" row=\"4\" value={book.desc} onChange={ e => { this.bookTextChange(e, index) } } />\n                            </label>\n                            <label htmlFor=\"\">\n                                <Input placeholder=\"试读链接\" value={book.href} onChange={ e => { this.bookHrefChange(e, index) } }/>\n                            </label>\n                            <label htmlFor=\"\">\n                                <Input placeholder=\"请输入封面地址或手动上传\" value={book.img} onChange={ e => { this.bookImgInputChange(e, index) } } />\n                                <Upload\n                                    className='uploader'\n                                    accept = \"image/*\"\n                                    action = \"/api/fileupload\"\n                                    data = { { prefix: 'book/' } }\n                                    showUploadList={ false }\n                                    onChange = { (info) => { this.bookUploaderChange(info, index) } }>\n                                    <Button>\n                                      <Icon type=\"upload\" />点击上传\n                                    </Button>\n                                </Upload>\n                            </label>\n                             <div className=\"btn\">\n                                <Button onClick={ () => { this.updateBook(book) } } >保存</Button>\n                                <Button onClick={ () => { this.delete(book) } } >删除</Button>\n                            </div>\n                        </div>\n                     </div></div>) : null }\n                    <div className=\"book-box add-box\"><div className=\"books-wrap\">\n                        <div className=\"book-img\">\n                            { imageUrl ? <img src={imageUrl} alt=\"\"/> : <Icon type=\"picture\" />}\n                        </div>\n                        <div className=\"book-info\">\n                            <label htmlFor=\"\">\n                                <Input className=\"title\" placeholder=\"书名\" value={title} onChange={ this.titleChange } />\n                            </label>\n                            <label htmlFor=\"\">\n                                <Input className=\"author\" placeholder=\"作者\" value={author} onChange={ this.authorChange } />\n                            </label>\n                             <label htmlFor=\"\">\n                                <TextArea className=\"info\" placeholder=\"导言\" value={desc} onChange={ this.textChange } autosize={{ minRows: 2, maxRows: 6 }} />\n                            </label>\n                            <label htmlFor=\"\">\n                                <Input placeholder=\"请输入封面地址或手动上传\" value={imageUrl} onChange={ this.imgInputChange } />\n                                <Upload\n                                    className='uploader'\n                                    accept = \"image/*\"\n                                    action = \"/api/fileupload\"\n                                    data = { { prefix: 'books/' } }\n                                    showUploadList={ false }\n                                    onChange = { this.uploadereChange } >\n                                    <Button>\n                                      <Icon type=\"upload\" />点击上传\n                                    </Button>\n                                </Upload>\n                            </label>\n                            <label htmlFor=\"\">\n                                <Input placeholder=\"试读链接\" value={href} onChange={ this.hrefChange } />\n                            </label>\n                            <div className=\"btn\">\n                                <Button onClick={ this.addBook } >添加</Button>\n                            </div>\n                        </div>\n                    </div></div>\n                </Content>\n                { (allPage > 1) ? <Footer><Pagination className='tc' showQuickJumper current={ page }  total={allNum} onChange={ this.changePage } pageSize={pageSize} /></Footer> : null}\n            </Layout>\n        )\n    }\n}"]}]}