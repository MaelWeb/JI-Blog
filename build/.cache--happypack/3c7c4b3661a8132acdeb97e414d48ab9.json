{"remainingRequest":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js?{\"presets\":[\"react-hmre\"]}!/Users/mael.liang/Workspace/node-koa-test/web/page/admin/ArticleEdite/index.js","dependencies":[{"path":"/Users/mael.liang/Workspace/node-koa-test/web/page/admin/ArticleEdite/index.js","mtime":1519640382929},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _upload = require('antd/lib/upload');\n\nvar _upload2 = _interopRequireDefault(_upload);\n\nvar _spin = require('antd/lib/spin');\n\nvar _spin2 = _interopRequireDefault(_spin);\n\nvar _button = require('antd/lib/button');\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _icon = require('antd/lib/icon');\n\nvar _icon2 = _interopRequireDefault(_icon);\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _message2 = require('antd/lib/message');\n\nvar _message3 = _interopRequireDefault(_message2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _modal = require('antd/lib/modal');\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _radio = require('antd/lib/radio');\n\nvar _radio2 = _interopRequireDefault(_radio);\n\nvar _input = require('antd/lib/input');\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _tag = require('antd/lib/tag');\n\nvar _tag2 = _interopRequireDefault(_tag);\n\nvar _layout = require('antd/lib/layout');\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nvar _index = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/redbox-react/lib/index.js');\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-catch-errors/lib/index.js');\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _react2 = require('react');\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _index5 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-hmr/lib/index.js');\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _class, _temp;\n\nvar _reactRouterDom = require('react-router-dom');\n\nvar _EditorMd = require('Components/EditorMd');\n\nvar _EditorMd2 = _interopRequireDefault(_EditorMd);\n\nvar _config = require('../../../config/');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nrequire('./index.less');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _components = {\n    AddArticle: {\n        displayName: 'AddArticle'\n    }\n};\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/admin/ArticleEdite/index.js',\n    components: _components,\n    locals: [module],\n    imports: [_react3.default]\n});\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/admin/ArticleEdite/index.js',\n    components: _components,\n    locals: [],\n    imports: [_react3.default, _index2.default]\n});\n\nfunction _wrapComponent(id) {\n    return function (Component) {\n        return _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2(_UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);\n    };\n}\n\nvar Header = _layout2.default.Header,\n    Content = _layout2.default.Content;\n\nvar CheckableTag = _tag2.default.CheckableTag;\nvar TextArea = _input2.default.TextArea;\n\nvar RadioGroup = _radio2.default.Group;\nvar ModalConfirm = _modal2.default.confirm;\n\nvar AddArticle = _wrapComponent('AddArticle')((_temp = _class = function (_Component) {\n    (0, _inherits3.default)(AddArticle, _Component);\n\n    function AddArticle(props) {\n        (0, _classCallCheck3.default)(this, AddArticle);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (AddArticle.__proto__ || (0, _getPrototypeOf2.default)(AddArticle)).call(this, props));\n\n        _this.showInput = function () {\n            _this.setState({ inputVisible: true }, function () {\n                return _this.input.focus();\n            });\n        };\n\n        _this.saveInputRef = function (input) {\n            return _this.input = input;\n        };\n\n        _this.saveEditorRef = function (editor) {\n            return _this.editor = editor;\n        };\n\n        _this.saveTextAreaRef = function (textArea) {\n            return _this.textArea = textArea;\n        };\n\n        _this.handleInputChange = function (e) {\n            _this.setState({ inputValue: e.target.value });\n        };\n\n        _this.createArticle = function () {\n            var _this$state = _this.state,\n                articleTitle = _this$state.articleTitle,\n                selectedTags = _this$state.selectedTags,\n                banner = _this$state.banner;\n\n\n            var articleMarkdown = _this.editor.getMarkdown(),\n                articleHtml = _this.editor.getHTML(),\n                articleAbstract = _this.state.articleAbstract;\n\n            // let reg =  /<img[^>]+src=['\"]([^'\"]+)['\"]+/g;\n\n            // let images = [], temp;\n\n            // if (!banner) {\n            //     while( (temp = reg.exec(articleHtml)) != null ) {\n            //         images.push(temp[1]);\n            //     }\n\n            //     banner = images[0] || '';\n            // }\n\n            if (!articleTitle) return _this.context.showMessage('请输入文章标题');\n\n            var params = {\n                title: articleTitle,\n                content: articleMarkdown,\n                htmlContent: articleHtml,\n                abstract: articleAbstract,\n                tags: selectedTags,\n                publish: false,\n                banner: banner\n            };\n\n            if (!articleAbstract) {\n                return ModalConfirm({\n                    title: '尚未添加文章摘要，是否添加?',\n                    okText: \"添加\",\n                    cancelText: \"不添加\",\n                    onOk: function onOk() {\n                        _this.showModal();\n                    },\n                    onCancel: function onCancel() {\n                        _this.doCreate(params);\n                    }\n                });\n            }\n            _this.doCreate(params);\n        };\n\n        _this.saveArticle = function () {\n            var _this$state2 = _this.state,\n                articleTitle = _this$state2.articleTitle,\n                selectedTags = _this$state2.selectedTags,\n                aid = _this$state2.aid,\n                banner = _this$state2.banner;\n            var query = _this.context.query;\n\n\n            var articleMarkdown = _this.editor.getMarkdown(),\n                articleHtml = _this.editor.getHTML(),\n                articleAbstract = _this.state.articleAbstract;\n\n            if (!articleTitle) return _this.context.showMessage('请输入文章标题');\n\n            var params = {\n                title: articleTitle,\n                content: articleMarkdown,\n                htmlContent: articleHtml,\n                abstract: articleAbstract,\n                tags: selectedTags,\n                banner: banner\n            };\n            if (_this.isPosting) return;\n            _this.isPosting = true;\n            var hide = _message3.default.loading('文章保存中...', 0);\n            _axios2.default.post('/api/update/article/' + (query.aid || aid), params).then(function (res) {\n                _this.isPosting = false;\n                hide();\n                var resData = res.data;\n                _message3.default.info(resData.message);\n            }).catch(function (err) {\n                hide();\n                _message3.default.warning(resData.message);\n                _this.isPosting = false;\n            });\n        };\n\n        _this.handleInputConfirm = function () {\n            var inputValue = _this.state.inputValue;\n\n            if (!inputValue) {\n                _this.context.showMessage(\"请输入标签名\");\n            } else {\n                _this.creatTag();\n            }\n        };\n\n        _this.handleInputBlur = function () {\n            var inputValue = _this.state.inputValue;\n\n            if (!inputValue) {\n                _this.setState({\n                    inputVisible: false\n                });\n            } else {\n                _this.creatTag();\n            }\n        };\n\n        _this.titleInputChange = function (e) {\n            _this.setState({\n                articleTitle: e.target.value\n            });\n        };\n\n        _this.showModal = function () {\n            _this.setState({\n                isAbstractModalShow: true\n            });\n        };\n\n        _this.showBannerModal = function () {\n            _this.setState({\n                isBannerModalShow: true\n            });\n        };\n\n        _this.showExportModal = function () {\n            _this.setState({\n                isCategoryModalShow: true\n            });\n        };\n\n        _this.articleAbstractOk = function () {\n            _this.setState({\n                isAbstractModalShow: false,\n                articleAbstract: _this.textArea.textAreaRef.value\n            });\n        };\n\n        _this.articleAbstractCancle = function () {\n            _this.setState({\n                isAbstractModalShow: false\n            });\n        };\n\n        _this.exportModalOk = function () {\n            var query = _this.context.query;\n            var _this$state3 = _this.state,\n                aid = _this$state3.aid,\n                category = _this$state3.category,\n                selectedTags = _this$state3.selectedTags,\n                banner = _this$state3.banner,\n                articleTitle = _this$state3.articleTitle;\n\n\n            var articleMarkdown = _this.editor.getMarkdown(),\n                articleHtml = _this.editor.getHTML(),\n                articleAbstract = _this.state.articleAbstract;\n\n            if (!articleTitle) return _this.context.showMessage('请输入文章标题');\n\n            var params = {\n                title: articleTitle,\n                content: articleMarkdown,\n                htmlContent: articleHtml,\n                abstract: articleAbstract,\n                tags: selectedTags,\n                banner: banner\n            };\n\n            _axios2.default.post('/api/publish/article/' + (query.aid || aid), (0, _extends3.default)({ category: category }, params)).then(function (res) {\n                _this.context.showMessage(res.data.message);\n                _this.setState({\n                    isCategoryModalShow: false,\n                    isPublish: res.data.code == 200 ? true : false\n                });\n            }).catch(function (err) {\n                _this.context.showMessage('服务器错误');\n            });\n        };\n\n        _this.recallArticle = function () {\n            var query = _this.context.query;\n            var _this$state4 = _this.state,\n                aid = _this$state4.aid,\n                category = _this$state4.category;\n\n\n            _axios2.default.post('/api/recall/article/' + (query.aid || aid)).then(function (res) {\n                _this.context.showMessage(res.data.message);\n                _this.setState({\n                    isPublish: res.data.code == 200 ? false : true\n                });\n            }).catch(function (err) {\n                _this.context.showMessage('服务器错误');\n            });\n        };\n\n        _this.exportModalCancle = function () {\n            _this.setState({\n                isCategoryModalShow: false,\n                newBanner: null\n            });\n        };\n\n        _this.bannerModalCancle = function () {\n            if (_this.state.newBanner) {\n                _this.deleteNewBanner(_this.state.newBanner).then(function (res) {\n                    _this.setState({\n                        isBannerModalShow: false,\n                        newBanner: ''\n                    });\n                });\n            } else {\n                _this.setState({\n                    isBannerModalShow: false\n                });\n            }\n        };\n\n        _this.bannerModalOk = function () {\n            var _this$state5 = _this.state,\n                newBanner = _this$state5.newBanner,\n                banner = _this$state5.banner;\n\n            if (banner) {\n                var key = banner.split(_config.IMG_URL)[1];\n                key = key.split(_config.IMG_QUERY)[0];\n                _this.deleteNewBanner(key).then(function (res) {\n                    _this.setState({\n                        isBannerModalShow: false,\n                        banner: '' + _config.IMG_URL + newBanner\n                    });\n                });\n            } else {\n                _this.setState({\n                    banner: newBanner ? '' + _config.IMG_URL + newBanner : null,\n                    isBannerModalShow: false\n                });\n            }\n        };\n\n        _this.onRadioChange = function (e) {\n            _this.setState({\n                category: e.target.value\n            });\n        };\n\n        _this.uploadHandleChange = function (info) {\n            if (info.file.status === 'done') {\n                _this.state.newBanner && _this.deleteNewBanner(_this.state.newBanner);\n                var newBanner = info.file.response.data.key;\n                _this.setState({ newBanner: newBanner });\n            }\n        };\n\n        _this.state = {\n            selectedTags: [],\n            inputVisible: false,\n            tags: [],\n            articleTitle: '',\n            articleAbstract: '',\n            banner: '',\n            newBanner: '',\n            isAbstractModalShow: false,\n            isCategoryModalShow: false,\n            markdownContent: null,\n            aid: null,\n            category: 'DEFAULT',\n            isPublish: false,\n            isBannerModalShow: false\n        };\n\n        _this.isPosting = false;\n        return _this;\n    }\n\n    (0, _createClass3.default)(AddArticle, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            var _this2 = this;\n\n            var query = this.context.query;\n\n            if (query.aid) {\n                this.getArticle(query.aid);\n            }\n\n            _axios2.default.get('/api/get/alltags').then(function (res) {\n                _this2.setState({\n                    tags: res.data.tags\n                });\n            });\n        }\n    }, {\n        key: 'getArticle',\n        value: function () {\n            var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(id) {\n                var _this3 = this;\n\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                return _context.abrupt('return', _axios2.default.get('/api/get/article/' + id).then(function (res) {\n                                    var article = res.data.article;\n                                    _this3.setState({\n                                        articleAbstract: article.abstract,\n                                        articleTitle: article.title,\n                                        selectedTags: article.tags.map(function (tag) {\n                                            return tag.id;\n                                        }),\n                                        markdownContent: article.content,\n                                        category: article.category,\n                                        isPublish: article.publish,\n                                        banner: article.banner\n                                    });\n                                }));\n\n                            case 1:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n\n            function getArticle(_x) {\n                return _ref.apply(this, arguments);\n            }\n\n            return getArticle;\n        }()\n    }, {\n        key: 'tagChange',\n        value: function tagChange(tag, checked) {\n            var selectedTags = this.state.selectedTags;\n\n            var nextSelectedTags = checked ? [].concat((0, _toConsumableArray3.default)(selectedTags), [tag.id]) : selectedTags.filter(function (t) {\n                return t !== tag.id;\n            });\n\n            this.setState({ selectedTags: nextSelectedTags });\n            _axios2.default.post('/api/update/tag/count', { id: tag.id, type: checked ? 1 : -1 });\n        }\n    }, {\n        key: 'doCreate',\n        value: function doCreate(params) {\n            var _this4 = this;\n\n            if (this.isPosting) return;\n            this.isPosting = true;\n            var hide = _message3.default.loading('文章创建中...', 0);\n            _axios2.default.post('/api/create/article', params).then(function (res) {\n                hide();\n                _this4.context.showMessage(res.data.message);\n                _this4.isPosting = false;\n                if (res.data.code == 200) {\n                    _this4.setState({\n                        aid: res.data.article.id\n                    });\n                    // this.state.markdownContent = params.content;\n                    // this.props.history.replace({pathname: '/edit', search: `?aid=${res.data.article.id}`});\n                }\n            }).catch(function (err) {\n                hide();\n                _this4.context.showMessage(err);\n                _this4.isPosting = false;\n            });\n        }\n    }, {\n        key: 'creatTag',\n        value: function creatTag() {\n            var _this5 = this;\n\n            var _state = this.state,\n                tags = _state.tags,\n                inputValue = _state.inputValue,\n                selectedTags = _state.selectedTags;\n\n\n            var isCreate = tags.filter(function (t) {\n                return t.name === inputValue;\n            });\n            if (isCreate.length) {\n\n                if (selectedTags.indexOf(isCreate[0].id) == -1) {\n                    _axios2.default.post('/api/update/tag/count', { id: tag.id, type: 1 });\n                    this.setState({\n                        inputVisible: false,\n                        selectedTags: [].concat((0, _toConsumableArray3.default)(selectedTags), [isCreate[0].id]),\n                        inputValue: ''\n                    });\n                } else {\n                    this.setState({\n                        inputVisible: false,\n                        inputValue: ''\n                    });\n                }\n\n                return false;\n            }\n            _axios2.default.post('/api/create/tag', { name: inputValue, count: 1 }).then(function (res) {\n                _this5.setState({\n                    selectedTags: [].concat((0, _toConsumableArray3.default)(selectedTags), [res.data.tag.id]),\n                    tags: [].concat((0, _toConsumableArray3.default)(tags), [res.data.tag]),\n                    inputVisible: false,\n                    inputValue: ''\n                });\n            }).catch(function (err) {\n                _this5.context.showMessage(err);\n            });\n        }\n    }, {\n        key: 'deleteNewBanner',\n        value: function deleteNewBanner(key) {\n            return _axios2.default.post(\"/api/filedelete\", {\n                key: key\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this6 = this;\n\n            var _state2 = this.state,\n                selectedTags = _state2.selectedTags,\n                inputVisible = _state2.inputVisible,\n                inputValue = _state2.inputValue,\n                tags = _state2.tags,\n                isAbstractModalShow = _state2.isAbstractModalShow,\n                articleAbstract = _state2.articleAbstract,\n                articleTitle = _state2.articleTitle,\n                markdownContent = _state2.markdownContent,\n                aid = _state2.aid,\n                isCategoryModalShow = _state2.isCategoryModalShow,\n                category = _state2.category,\n                isPublish = _state2.isPublish,\n                banner = _state2.banner,\n                isBannerModalShow = _state2.isBannerModalShow,\n                newBanner = _state2.newBanner;\n            var query = this.context.query;\n\n\n            return _react3.default.createElement(\n                _layout2.default,\n                { className: 'add-article-layout' },\n                _react3.default.createElement(\n                    Header,\n                    { className: 'add-article-header clearfix' },\n                    _react3.default.createElement(\n                        'h3',\n                        null,\n                        _react3.default.createElement(\n                            _reactRouterDom.Link,\n                            { to: '/' },\n                            _react3.default.createElement(_icon2.default, { type: 'home' }),\n                            ' '\n                        ),\n                        ' / ',\n                        _react3.default.createElement(\n                            'span',\n                            null,\n                            '\\u6587\\u7AE0\\u7F16\\u8F91'\n                        )\n                    ),\n                    _react3.default.createElement(\n                        'div',\n                        { className: (0, _classnames2.default)(\"article-title tc\", { 'creat-pr': !query.aid && !aid }) },\n                        _react3.default.createElement('input', { type: 'text', placeholder: '\\u65B0\\u589E\\u6587\\u7AE0\\u6807\\u9898', className: 'article-title-input tc', onChange: this.titleInputChange, value: articleTitle })\n                    ),\n                    query.aid || aid ? _react3.default.createElement(\n                        _button2.default.Group,\n                        null,\n                        _react3.default.createElement(\n                            _button2.default,\n                            { onClick: this.saveArticle },\n                            _react3.default.createElement(_icon2.default, { type: 'save' }),\n                            '\\u4FDD\\u5B58'\n                        ),\n                        isPublish ? _react3.default.createElement(\n                            _button2.default,\n                            { onClick: this.recallArticle },\n                            '\\u64A4\\u56DE',\n                            _react3.default.createElement(_icon2.default, { type: 'rollback' })\n                        ) : _react3.default.createElement(\n                            _button2.default,\n                            { onClick: this.showExportModal },\n                            '\\u53D1\\u5E03',\n                            _react3.default.createElement(_icon2.default, { type: 'export' })\n                        )\n                    ) : _react3.default.createElement(\n                        'div',\n                        { className: 'single-btn' },\n                        _react3.default.createElement(\n                            _button2.default,\n                            { onClick: this.createArticle },\n                            _react3.default.createElement(_icon2.default, { type: 'file' }),\n                            '\\u521B\\u5EFA'\n                        )\n                    )\n                ),\n                _react3.default.createElement(\n                    Content,\n                    null,\n                    _react3.default.createElement(\n                        'div',\n                        { className: 'tags-wrap' },\n                        '\\u6807\\u7B7E\\uFF1A',\n                        tags.map(function (tag) {\n                            return _react3.default.createElement(\n                                CheckableTag,\n                                {\n                                    key: tag.id,\n                                    checked: selectedTags.indexOf(tag.id) > -1,\n                                    onChange: function onChange(checked) {\n                                        return _this6.tagChange(tag, checked);\n                                    } },\n                                tag.name\n                            );\n                        }),\n                        inputVisible && _react3.default.createElement(_input2.default, {\n                            ref: this.saveInputRef,\n                            type: 'text',\n                            size: 'small',\n                            style: { width: 78 },\n                            value: inputValue,\n                            onChange: this.handleInputChange,\n                            onBlur: this.handleInputBlur,\n                            onPressEnter: this.handleInputConfirm }),\n                        !inputVisible && _react3.default.createElement(\n                            _button2.default,\n                            { size: 'small', type: 'dashed', onClick: this.showInput },\n                            '+ New Tag'\n                        ),\n                        _react3.default.createElement(\n                            _button2.default,\n                            { className: 'fr', type: 'primary', size: 'small', icon: 'pushpin-o', ghost: true, onClick: this.showModal },\n                            articleAbstract ? '修改摘要' : '添加摘要'\n                        ),\n                        _react3.default.createElement(\n                            _button2.default,\n                            { className: 'fr add-banner', type: 'primary', size: 'small', icon: 'picture', ghost: true, onClick: this.showBannerModal },\n                            banner ? '修改头图' : '添加头图'\n                        )\n                    ),\n                    query.aid && (markdownContent ? _react3.default.createElement(_EditorMd2.default, { config: { markdown: markdownContent, height: '100%' }, ref: this.saveEditorRef }) : _react3.default.createElement(_spin2.default, { size: 'large', className: 'spiner' })),\n                    !query.aid ? _react3.default.createElement(_EditorMd2.default, { config: { markdown: '### 请开始你的表演', height: '100%' }, ref: this.saveEditorRef }) : null\n                ),\n                _react3.default.createElement(\n                    _modal2.default,\n                    {\n                        title: '\\u6DFB\\u52A0\\u6458\\u8981',\n                        visible: isAbstractModalShow,\n                        onOk: this.articleAbstractOk,\n                        mask: false,\n                        onCancel: this.articleAbstractCancle },\n                    _react3.default.createElement(TextArea, { placeholder: '\\u8FD9\\u91CC\\u6DFB\\u52A0\\u6587\\u7AE0\\u7684\\u6458\\u8981;\\u786E\\u8BA4\\u624D\\u4FDD\\u5B58\\uFF0C\\u53D6\\u6D88\\u4E0D\\u4FDD\\u5B58\\u5F53\\u6B21\\u66F4\\u6539', autosize: { minRows: 4 }, ref: this.saveTextAreaRef, defaultValue: articleAbstract })\n                ),\n                _react3.default.createElement(\n                    _modal2.default,\n                    {\n                        title: '\\u9009\\u62E9\\u53D1\\u5E03\\u677F\\u5757',\n                        visible: isCategoryModalShow,\n                        onOk: this.exportModalOk,\n                        mask: false,\n                        onCancel: this.exportModalCancle },\n                    _react3.default.createElement(\n                        RadioGroup,\n                        { onChange: this.onRadioChange, value: category },\n                        _react3.default.createElement(\n                            _radio2.default,\n                            { value: 'DEFAULT' },\n                            '\\u9996\\u9875'\n                        ),\n                        _react3.default.createElement(\n                            _radio2.default,\n                            { value: 'TRAVEL' },\n                            '\\u6E38\\u8BB0'\n                        )\n                    )\n                ),\n                _react3.default.createElement(\n                    _modal2.default,\n                    {\n                        title: 'Banner\\u8BBE\\u7F6E',\n                        visible: isBannerModalShow,\n                        mask: false,\n                        onOk: this.bannerModalOk,\n                        onCancel: this.bannerModalCancle },\n                    _react3.default.createElement(\n                        'div',\n                        { className: 'add-article-banner-box' },\n                        _react3.default.createElement(\n                            _upload2.default,\n                            {\n                                className: 'avatar-uploader',\n                                accept: 'image/*',\n                                action: '/api/fileupload',\n                                data: { prefix: 'article/' },\n                                showUploadList: false,\n                                onChange: this.uploadHandleChange\n                            },\n                            banner || newBanner ? _react3.default.createElement('img', { src: newBanner ? '' + _config.IMG_URL + newBanner : banner, alt: '', className: 'avatar' }) : _react3.default.createElement(_icon2.default, { type: 'plus', className: 'avatar-uploader-trigger' })\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return AddArticle;\n}(_react2.Component), _class.contextTypes = {\n    showMessage: _propTypes2.default.func,\n    query: _propTypes2.default.object\n}, _temp));\n\nexports.default = AddArticle;",{"version":3,"sources":["web/page/admin/ArticleEdite/index.js"],"names":["Header","Content","CheckableTag","TextArea","RadioGroup","Group","ModalConfirm","confirm","props","showInput","setState","inputVisible","input","focus","saveInputRef","saveEditorRef","editor","saveTextAreaRef","textArea","handleInputChange","e","inputValue","target","value","createArticle","state","articleTitle","selectedTags","banner","articleMarkdown","getMarkdown","articleHtml","getHTML","articleAbstract","context","showMessage","params","title","content","htmlContent","abstract","tags","publish","okText","cancelText","onOk","showModal","onCancel","doCreate","saveArticle","aid","query","isPosting","hide","loading","post","then","resData","res","data","info","message","catch","warning","handleInputConfirm","creatTag","handleInputBlur","titleInputChange","isAbstractModalShow","showBannerModal","isBannerModalShow","showExportModal","isCategoryModalShow","articleAbstractOk","textAreaRef","articleAbstractCancle","exportModalOk","category","isPublish","code","recallArticle","exportModalCancle","newBanner","bannerModalCancle","deleteNewBanner","bannerModalOk","key","split","onRadioChange","uploadHandleChange","file","status","response","markdownContent","getArticle","get","id","article","map","tag","checked","nextSelectedTags","filter","t","type","err","isCreate","name","length","indexOf","count","tagChange","width","markdown","height","minRows","prefix","contextTypes","func","object"],"mappings":"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","file":"index.js","sourceRoot":"/Users/mael.liang/Workspace/node-koa-test","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Layout, Button, Icon, Tag, Input, Modal, Breadcrumb, Spin, Radio, Upload, message} from 'antd';\nimport EditorMD from 'Components/EditorMd';\nimport {IMG_URL, IMG_QUERY} from '../../../config/';\nimport PropTypes from 'prop-types';\nimport Axios from 'axios';\nimport classNames from 'classnames';\nimport './index.less';\n\nconst { Header, Content } = Layout;\nconst CheckableTag = Tag.CheckableTag;\nconst { TextArea } = Input;\nconst RadioGroup = Radio.Group;\nconst ModalConfirm = Modal.confirm;\n\nexport default class AddArticle extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedTags: [],\n            inputVisible: false,\n            tags: [],\n            articleTitle: '',\n            articleAbstract: '',\n            banner: '',\n            newBanner: '',\n            isAbstractModalShow: false,\n            isCategoryModalShow: false,\n            markdownContent: null,\n            aid: null,\n            category: 'DEFAULT',\n            isPublish: false,\n            isBannerModalShow: false\n        };\n\n        this.isPosting = false;\n    }\n\n    static contextTypes = {\n        showMessage: PropTypes.func,\n        query: PropTypes.object\n    };\n\n    componentWillMount() {\n        const { query } = this.context;\n        if (query.aid) {\n            this.getArticle(query.aid);\n        }\n\n        Axios.get('/api/get/alltags')\n            .then( res => {\n                this.setState({\n                    tags: res.data.tags\n                })\n            })\n\n    }\n\n    async getArticle(id) {\n        return Axios.get(`/api/get/article/${id}`)\n            .then( res => {\n                let article = res.data.article;\n                this.setState({\n                    articleAbstract: article.abstract,\n                    articleTitle: article.title,\n                    selectedTags: article.tags.map(tag => tag.id ),\n                    markdownContent: article.content,\n                    category: article.category,\n                    isPublish: article.publish,\n                    banner: article.banner\n                })\n            })\n    }\n\n    tagChange(tag, checked) {\n        const { selectedTags } = this.state;\n        const nextSelectedTags = checked ?\n            [...selectedTags, tag.id] :\n            selectedTags.filter(t => t !== tag.id);\n\n        this.setState({ selectedTags: nextSelectedTags });\n        Axios.post('/api/update/tag/count', {id: tag.id, type: checked ? 1 : -1});\n    }\n\n    showInput = () => {\n        this.setState({ inputVisible: true }, () => this.input.focus());\n    }\n\n    saveInputRef = input => this.input = input\n\n    saveEditorRef = editor => this.editor = editor\n\n    saveTextAreaRef = textArea => this.textArea = textArea\n\n    handleInputChange = (e) => {\n        this.setState({ inputValue: e.target.value });\n    }\n\n    createArticle = () => {\n        let { articleTitle, selectedTags, banner } = this.state;\n\n        let articleMarkdown = this.editor.getMarkdown(),\n            articleHtml = this.editor.getHTML(),\n            articleAbstract = this.state.articleAbstract;\n\n        // let reg =  /<img[^>]+src=['\"]([^'\"]+)['\"]+/g;\n\n        // let images = [], temp;\n\n        // if (!banner) {\n        //     while( (temp = reg.exec(articleHtml)) != null ) {\n        //         images.push(temp[1]);\n        //     }\n\n        //     banner = images[0] || '';\n        // }\n\n        if ( !articleTitle ) return this.context.showMessage('请输入文章标题');\n\n        let params = {\n            title: articleTitle,\n            content: articleMarkdown,\n            htmlContent: articleHtml,\n            abstract: articleAbstract,\n            tags: selectedTags,\n            publish: false,\n            banner\n        };\n\n\n        if (!articleAbstract) {\n           return ModalConfirm({\n                title: '尚未添加文章摘要，是否添加?',\n                okText: \"添加\",\n                cancelText: \"不添加\",\n                onOk: () => {\n                    this.showModal();\n                },\n                onCancel: () => {\n                    this.doCreate(params)\n                },\n            });\n        }\n        this.doCreate(params);\n    }\n\n    doCreate(params) {\n        if (this.isPosting) return;\n        this.isPosting = true;\n        const hide = message.loading('文章创建中...', 0);\n        Axios.post('/api/create/article', params)\n        .then( res => {\n            hide();\n            this.context.showMessage(res.data.message);\n            this.isPosting = false;\n            if (res.data.code == 200) {\n                this.setState({\n                    aid: res.data.article.id\n                })\n                // this.state.markdownContent = params.content;\n                // this.props.history.replace({pathname: '/edit', search: `?aid=${res.data.article.id}`});\n            }\n        })\n        .catch( err => {\n            hide();\n            this.context.showMessage(err);\n            this.isPosting = false;\n        })\n    }\n\n    saveArticle = ()=> {\n        const { articleTitle, selectedTags, aid, banner } = this.state;\n        const { query } = this.context;\n\n        let articleMarkdown = this.editor.getMarkdown(),\n            articleHtml = this.editor.getHTML(),\n            articleAbstract = this.state.articleAbstract;\n\n        if ( !articleTitle ) return this.context.showMessage('请输入文章标题');\n\n        let params = {\n            title: articleTitle,\n            content: articleMarkdown,\n            htmlContent: articleHtml,\n            abstract: articleAbstract,\n            tags: selectedTags,\n            banner\n        };\n        if (this.isPosting) return;\n        this.isPosting = true;\n        const hide = message.loading('文章保存中...', 0);\n        Axios.post(`/api/update/article/${query.aid || aid}`, params)\n            .then( res => {\n                this.isPosting = false;\n                hide();\n                let resData = res.data;\n                message.info(resData.message);\n            })\n            .catch( err => {\n                hide();\n                message.warning(resData.message);\n                this.isPosting = false;\n            })\n    }\n\n    handleInputConfirm = () => {\n        const { inputValue } = this.state;\n        if (!inputValue) {\n            this.context.showMessage(\"请输入标签名\");\n        } else {\n            this.creatTag();\n        }\n    }\n\n    handleInputBlur = () => {\n        const { inputValue } = this.state;\n        if (!inputValue) {\n            this.setState({\n                inputVisible: false,\n            });\n        } else {\n            this.creatTag();\n        }\n    }\n\n    creatTag() {\n        let { tags, inputValue, selectedTags } = this.state;\n\n        let isCreate = tags.filter(t => t.name === inputValue);\n        if (isCreate.length) {\n\n            if ( selectedTags.indexOf(isCreate[0].id) == -1 ) {\n                Axios.post('/api/update/tag/count', {id: tag.id, type: 1});\n                this.setState({\n                    inputVisible: false,\n                    selectedTags: [...selectedTags, isCreate[0].id],\n                    inputValue: ''\n                })\n            } else {\n                this.setState({\n                    inputVisible: false,\n                    inputValue: ''\n                })\n            }\n\n            return false;\n        }\n        Axios.post('/api/create/tag', { name: inputValue, count: 1 })\n            .then(res => {\n                this.setState({\n                    selectedTags: [...selectedTags, res.data.tag.id],\n                    tags: [...tags, res.data.tag],\n                    inputVisible: false,\n                    inputValue: '',\n                })\n            })\n            .catch( err => {\n                this.context.showMessage(err);\n            })\n    }\n\n    titleInputChange = (e) => {\n        this.setState({\n            articleTitle: e.target.value\n        });\n    }\n\n    showModal = () => {\n        this.setState({\n            isAbstractModalShow: true\n        });\n    }\n\n    showBannerModal = () => {\n        this.setState({\n            isBannerModalShow: true\n        });\n    }\n\n    showExportModal = () => {\n        this.setState({\n            isCategoryModalShow: true\n        });\n    }\n\n    articleAbstractOk = () => {\n        this.setState({\n            isAbstractModalShow: false,\n            articleAbstract: this.textArea.textAreaRef.value\n        })\n    }\n\n    articleAbstractCancle = () => {\n        this.setState({\n            isAbstractModalShow: false\n        })\n    }\n\n    exportModalOk = () => {\n        const { query } = this.context;\n        const { aid, category, selectedTags, banner, articleTitle } = this.state;\n\n        let articleMarkdown = this.editor.getMarkdown(),\n            articleHtml = this.editor.getHTML(),\n            articleAbstract = this.state.articleAbstract;\n\n        if ( !articleTitle ) return this.context.showMessage('请输入文章标题');\n\n        let params = {\n            title: articleTitle,\n            content: articleMarkdown,\n            htmlContent: articleHtml,\n            abstract: articleAbstract,\n            tags: selectedTags,\n            banner\n        };\n\n        Axios.post(`/api/publish/article/${query.aid || aid}`, {category, ...params})\n            .then( res => {\n                this.context.showMessage(res.data.message);\n                this.setState({\n                    isCategoryModalShow: false,\n                    isPublish: res.data.code == 200 ? true : false\n                });\n            })\n            .catch( err => {\n                this.context.showMessage('服务器错误');\n            })\n    }\n\n    recallArticle = () => {\n        const { query } = this.context;\n        const { aid, category } = this.state;\n\n        Axios.post(`/api/recall/article/${query.aid || aid}`)\n            .then( res => {\n                this.context.showMessage(res.data.message);\n                this.setState({\n                    isPublish: res.data.code == 200 ? false : true\n                });\n            })\n            .catch( err => {\n                this.context.showMessage('服务器错误');\n            })\n    }\n\n    exportModalCancle = () => {\n        this.setState({\n            isCategoryModalShow: false,\n            newBanner: null\n        });\n    }\n\n    bannerModalCancle = () => {\n        if (this.state.newBanner) {\n            this.deleteNewBanner(this.state.newBanner)\n                .then(res => {\n                    this.setState({\n                        isBannerModalShow: false,\n                        newBanner: ''\n                    });\n                })\n        } else {\n            this.setState({\n                isBannerModalShow: false\n            });\n        }\n    }\n\n    bannerModalOk = () => {\n        const { newBanner, banner } = this.state;\n        if (banner) {\n            let key = banner.split(IMG_URL)[1];\n            key = key.split(IMG_QUERY)[0];\n            this.deleteNewBanner(key)\n                .then(res => {\n                    this.setState({\n                        isBannerModalShow: false,\n                        banner: `${IMG_URL}${newBanner}`,\n                    });\n                });\n        } else {\n            this.setState({\n                banner: newBanner ? `${IMG_URL}${newBanner}` : null,\n                isBannerModalShow: false\n            });\n        }\n    }\n\n    deleteNewBanner(key) {\n        return Axios.post(\"/api/filedelete\", {\n            key: key\n        })\n    }\n\n\n    onRadioChange = e => {\n        this.setState({\n            category: e.target.value\n        })\n    }\n\n    uploadHandleChange = (info) => {\n        if (info.file.status === 'done') {\n            this.state.newBanner && this.deleteNewBanner(this.state.newBanner);\n            let newBanner = info.file.response.data.key;\n            this.setState({ newBanner })\n        }\n    }\n\n\n    render() {\n        const { selectedTags, inputVisible, inputValue, tags, isAbstractModalShow, articleAbstract, articleTitle, markdownContent, aid, isCategoryModalShow, category, isPublish, banner, isBannerModalShow, newBanner } = this.state;\n        const { query } = this.context;\n\n        return(\n            <Layout className=\"add-article-layout\">\n                <Header className='add-article-header clearfix' >\n                    <h3><Link to=\"/\"><Icon type=\"home\"/> </Link> / <span>文章编辑</span></h3>\n                    <div className={classNames(\"article-title tc\", {'creat-pr': !query.aid && !aid})}><input type=\"text\" placeholder='新增文章标题' className=\"article-title-input tc\" onChange={ this.titleInputChange } value={articleTitle} /></div>\n                    { query.aid || aid ? <Button.Group>\n                        <Button onClick={ this.saveArticle } >\n                            <Icon type=\"save\" />保存\n                        </Button>\n                        { isPublish ? <Button onClick={ this.recallArticle } >\n                            撤回<Icon type=\"rollback\" />\n                        </Button> : <Button onClick={ this.showExportModal } >\n                            发布<Icon type=\"export\" />\n                        </Button>}\n                    </Button.Group> : <div className=\"single-btn\"><Button onClick={ this.createArticle } >\n                            <Icon type=\"file\" />创建\n                        </Button></div>}\n                </Header>\n                <Content>\n                    <div className=\"tags-wrap\">标签：{\n                        tags.map(tag => (\n                          <CheckableTag\n                            key={tag.id}\n                            checked={selectedTags.indexOf(tag.id) > -1}\n                            onChange={checked => this.tagChange(tag, checked)}>\n                            {tag.name}\n                          </CheckableTag>\n                        ))}\n                        {inputVisible && (\n                            <Input\n                                ref={this.saveInputRef}\n                                type=\"text\"\n                                size=\"small\"\n                                style={{ width: 78 }}\n                                value={inputValue}\n                                onChange={this.handleInputChange}\n                                onBlur={this.handleInputBlur}\n                                onPressEnter={this.handleInputConfirm}/>\n                        )}\n                        {!inputVisible && <Button size=\"small\" type=\"dashed\" onClick={this.showInput}>+ New Tag</Button>}\n                        <Button className=\"fr\" type=\"primary\" size=\"small\" icon=\"pushpin-o\" ghost onClick={ this.showModal }>{ articleAbstract ? '修改摘要' : '添加摘要'}</Button>\n                        <Button className=\"fr add-banner\" type=\"primary\" size=\"small\" icon=\"picture\" ghost onClick={ this.showBannerModal }>{ banner ? '修改头图' : '添加头图'}</Button>\n                    </div>\n                    { query.aid &&  ( markdownContent ? <EditorMD config={{markdown: markdownContent, height: '100%'}} ref={ this.saveEditorRef } /> : <Spin size=\"large\" className='spiner'/>)}\n                    { !query.aid ? <EditorMD config={{ markdown: '### 请开始你的表演' ,height: '100%'}} ref={ this.saveEditorRef } /> : null}\n                </Content>\n                <Modal\n                    title=\"添加摘要\"\n                    visible={isAbstractModalShow}\n                    onOk={this.articleAbstractOk}\n                    mask={ false }\n                    onCancel={this.articleAbstractCancle}>\n                    <TextArea placeholder=\"这里添加文章的摘要;确认才保存，取消不保存当次更改\" autosize={{ minRows: 4,}} ref={ this.saveTextAreaRef }  defaultValue={articleAbstract} />\n                </Modal>\n                <Modal\n                    title=\"选择发布板块\"\n                    visible={isCategoryModalShow}\n                    onOk={this.exportModalOk}\n                    mask={ false }\n                    onCancel={this.exportModalCancle}>\n                    <RadioGroup onChange={this.onRadioChange} value={ category }>\n                        <Radio value='DEFAULT'>首页</Radio>\n                        <Radio value='TRAVEL' >游记</Radio>\n                    </RadioGroup>\n                </Modal>\n                <Modal\n                    title=\"Banner设置\"\n                    visible={isBannerModalShow}\n                    mask={ false }\n                    onOk={ this.bannerModalOk }\n                    onCancel={this.bannerModalCancle}>\n                    <div className=\"add-article-banner-box\">\n                        <Upload\n                            className=\"avatar-uploader\"\n                            accept = \"image/*\"\n                            action = \"/api/fileupload\"\n                            data = { { prefix: 'article/' } }\n                            showUploadList={false}\n                            onChange={ this.uploadHandleChange }\n                          >\n                            {\n                              (banner || newBanner) ?\n                                <img src={ newBanner ? `${IMG_URL}${newBanner}` : banner } alt=\"\" className=\"avatar\" /> :\n                                <Icon type=\"plus\" className=\"avatar-uploader-trigger\" />\n                            }\n                          </Upload>\n                    </div>\n                </Modal>\n            </Layout>\n        )\n    }\n}"]}]}