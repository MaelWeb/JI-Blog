{"remainingRequest":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js?{\"presets\":[]}!/Users/mael.liang/Workspace/node-koa-test/web/page/blog/Articles/index.js","dependencies":[{"path":"/Users/mael.liang/Workspace/node-koa-test/web/page/blog/Articles/index.js","mtime":1517912783000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _pagination = require('antd/lib/pagination');\n\nvar _pagination2 = _interopRequireDefault(_pagination);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRouterDom = require('react-router-dom');\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Articles = function (_Component) {\n    (0, _inherits3.default)(Articles, _Component);\n\n    function Articles(props) {\n        (0, _classCallCheck3.default)(this, Articles);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (Articles.__proto__ || (0, _getPrototypeOf2.default)(Articles)).call(this, props));\n\n        _initialiseProps.call(_this);\n\n        var articles = props.articles,\n            tags = props.tags,\n            curTagId = props.curTagId,\n            allNum = props.allNum,\n            page = props.page,\n            banners = props.banners,\n            allPage = props.allPage;\n\n        _this.state = {\n            articles: articles,\n            tags: tags,\n            curTagId: curTagId,\n            allNum: allNum,\n            page: page,\n            banners: banners,\n            allPage: allPage\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(Articles, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _state = this.state,\n                articles = _state.articles,\n                tags = _state.tags,\n                banners = _state.banners;\n\n\n            if (!articles.length || !tags.length || !banners.length) {\n                this.getArticles(1, null);\n                this.getAllTags();\n                this.getBanners();\n            }\n        }\n    }, {\n        key: 'getBanners',\n        value: function getBanners() {\n            var _this2 = this;\n\n            _axios2.default.get('/api/get/banners', {\n                params: {\n                    page: 'HOME'\n                }\n            }).then(function (res) {\n                var resData = res.data;\n                _this2.setState({\n                    banners: resData.banners\n                });\n            });\n        }\n    }, {\n        key: 'showBanners',\n        value: function showBanners() {\n            var banners = this.state.banners;\n\n            var bannerDom = [];\n\n            if (banners.length == 1) return _react2.default.createElement(\n                'div',\n                { className: 'banners' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'banner-item', style: { backgroundImage: 'url(' + banners[0].url + ')' } },\n                    _react2.default.createElement(\n                        'a',\n                        { href: banners[0].href ? banners[0].href : \"javascript:void(0);\" },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'text' },\n                            _react2.default.createElement(\n                                'p',\n                                { className: 'nowrapmulti' },\n                                banners[0].text\n                            )\n                        )\n                    )\n                )\n            );\n\n            if (banners.length == 2) return _react2.default.createElement(\n                'div',\n                { className: 'banners banners-two clearfix' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'banner-item fl', style: { backgroundImage: 'url(' + banners[0].url + ')' } },\n                    _react2.default.createElement(\n                        'a',\n                        { href: banners[0].href ? banners[0].href : \"javascript:void(0);\" },\n                        _react2.default.createElement('img', { src: banners[0].url, hidden: true }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'text' },\n                            _react2.default.createElement(\n                                'p',\n                                { className: 'nowrapmulti' },\n                                banners[0].text\n                            )\n                        )\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'banner-item fr', style: { backgroundImage: 'url(' + banners[1].url + ')' } },\n                    _react2.default.createElement(\n                        'a',\n                        { href: banners[1].href ? banners[1].href : \"javascript:void(0);\" },\n                        _react2.default.createElement('img', { src: banners[1].url, hidden: true }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'text' },\n                            _react2.default.createElement(\n                                'p',\n                                { className: 'nowrapmulti' },\n                                banners[1].text\n                            )\n                        )\n                    )\n                )\n            );\n\n            if (banners.length == 3) return _react2.default.createElement(\n                'div',\n                { className: 'banners banners-three clearfix' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'left-col banner-item fl', style: { backgroundImage: 'url(' + banners[0].url + ')' } },\n                    _react2.default.createElement(\n                        'a',\n                        { href: banners[0].href ? banners[0].href : \"javascript:void(0);\" },\n                        _react2.default.createElement('img', { src: banners[0].url, hidden: true }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'text' },\n                            _react2.default.createElement(\n                                'p',\n                                { className: 'nowrapmulti' },\n                                banners[0].text\n                            )\n                        )\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'right-col fr' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'banner-item', style: { backgroundImage: 'url(' + banners[1].url + ')' } },\n                        _react2.default.createElement(\n                            'a',\n                            { href: banners[1].href ? banners[1].href : \"javascript:void(0);\" },\n                            _react2.default.createElement('img', { src: banners[1].url, hidden: true }),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'text' },\n                                _react2.default.createElement(\n                                    'p',\n                                    { className: 'nowrapmulti' },\n                                    banners[1].text\n                                )\n                            )\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'banner-item', style: { backgroundImage: 'url(' + banners[2].url + ')' } },\n                        _react2.default.createElement(\n                            'a',\n                            { href: banners[2].href ? banners[2].href : \"javascript:void(0);\" },\n                            _react2.default.createElement('img', { src: banners[2].url, hidden: true }),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'text' },\n                                _react2.default.createElement(\n                                    'p',\n                                    { className: 'nowrapmulti' },\n                                    banners[2].text\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this3 = this;\n\n            var _state2 = this.state,\n                articles = _state2.articles,\n                tags = _state2.tags,\n                curTagId = _state2.curTagId,\n                allNum = _state2.allNum,\n                page = _state2.page,\n                allPage = _state2.allPage;\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'blog-articles-layout' },\n                this.showBanners(),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'blog-tags' },\n                    _react2.default.createElement(\n                        _reactRouterDom.Link,\n                        { to: { pathname: '/' }, onClick: function onClick() {\n                                _this3.getArticles(1, null);\n                            }, className: (0, _classnames2.default)(\"tag\", { 'tag-active': !curTagId }) },\n                        '\\u6240\\u6709\\u6587\\u7AE0'\n                    ),\n                    tags && tags.length ? tags.map(function (tag) {\n                        return tag.count > 0 && _react2.default.createElement(\n                            _reactRouterDom.Link,\n                            { to: { pathname: '/', search: '?tag=' + tag.id }, onClick: function onClick() {\n                                    _this3.getArticles(1, tag.id);\n                                }, className: (0, _classnames2.default)(\"tag\", { 'tag-active': curTagId == tag.id }), key: tag.id },\n                            tag.name\n                        );\n                    }) : null\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'blog-articles-list' },\n                    _react2.default.createElement(\n                        'ul',\n                        null,\n                        articles && articles.length ? articles.map(function (article, index) {\n                            return _react2.default.createElement(\n                                'li',\n                                { className: 'article-tiem', key: article.id },\n                                _react2.default.createElement(\n                                    _reactRouterDom.Link,\n                                    { to: '/article/' + article.id },\n                                    _react2.default.createElement(\n                                        'span',\n                                        { className: 'article-num' },\n                                        index + 1\n                                    ),\n                                    _react2.default.createElement(\n                                        'h3',\n                                        { className: 'nowrapmulti' },\n                                        article.title\n                                    )\n                                )\n                            );\n                        }) : null\n                    )\n                ),\n                allPage > 1 ? _react2.default.createElement(_pagination2.default, { size: 'small', total: allNum, current: page, onChange: this.changePage }) : null\n            );\n        }\n    }]);\n    return Articles;\n}(_react.Component);\n\nArticles.defaultProps = {\n    articles: [],\n    tags: [],\n    banners: [],\n    allPage: 0,\n    curTagId: null\n};\n\nvar _initialiseProps = function _initialiseProps() {\n    var _this4 = this;\n\n    this.getArticles = function (page, tagid) {\n        _axios2.default.get('/api/get/publish/articles', {\n            params: {\n                tag: tagid || null,\n                category: 'DEFAULT',\n                page: page\n            }\n        }).then(function (res) {\n            var resData = res.data;\n            _this4.setState({\n                articles: resData.articles,\n                curTagId: tagid,\n                allNum: resData.allNum,\n                page: resData.page\n            });\n        });\n    };\n\n    this.getAllTags = function () {\n        _axios2.default.get('/api/get/alltags').then(function (res) {\n            var resData = res.data;\n            _this4.setState({\n                tags: resData.tags\n            });\n        });\n    };\n\n    this.changePage = function (page, pageSize) {\n        _this4.getArticles(page, _this4.state.curTagId);\n    };\n};\n\nexports.default = Articles;",null]}