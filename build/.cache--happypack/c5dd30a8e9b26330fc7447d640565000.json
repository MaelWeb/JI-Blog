{"remainingRequest":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js?{\"presets\":[\"react-hmre\"]}!/Users/mael.liang/Workspace/node-koa-test/web/components/EditorMd/index.js","dependencies":[{"path":"/Users/mael.liang/Workspace/node-koa-test/web/components/EditorMd/index.js","mtime":1518000904000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _assign = require('babel-runtime/core-js/object/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _index = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/redbox-react/lib/index.js');\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-catch-errors/lib/index.js');\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _react2 = require('react');\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _index5 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-hmr/lib/index.js');\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _class, _temp, _class2, _temp2;\n\nrequire('./editormd.less');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _components = {\n    Editor: {\n        displayName: 'Editor'\n    },\n    EditorShow: {\n        displayName: 'EditorShow'\n    }\n};\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/components/EditorMd/index.js',\n    components: _components,\n    locals: [module],\n    imports: [_react3.default]\n});\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/components/EditorMd/index.js',\n    components: _components,\n    locals: [],\n    imports: [_react3.default, _index2.default]\n});\n\nfunction _wrapComponent(id) {\n    return function (Component) {\n        return _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2(_UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);\n    };\n}\n// import jQuery from 'jquery';\n// import editormd from './editormd';\n\n\nvar loadEditorMD = function loadEditorMD() {\n    return new _promise2.default(function (resolve, reject) {\n        if (window.editormd) {\n            resolve(true);\n        } else {\n            var script = document.createElement(\"script\");\n            script.async = true;\n            script.onload = function () {\n                resolve(true);\n            };\n            script.onerror = function () {\n                reject(false);\n            };\n            script.src = '//static.liayal.com/editormd/editormd.min.js';\n            document.head.appendChild(script);\n        }\n    });\n};\nvar defaultConfig = {\n    // 组件接入方，并不需要知道具体ID\n    id: 'EditorID' + +new Date(),\n    width: \"100%\",\n    height: 740,\n    // 静态资源路径\n    path: '//static.liayal.com/editormd/lib/',\n    // theme : \"dark\",\n    // previewTheme : \"dark\",\n    // editorTheme : \"pastel-on-dark\",\n    markdown: '### \\u8BF7\\u5F00\\u59CB\\u4F60\\u7684\\u8868\\u6F14',\n    codeFold: true,\n    // syncScrolling : false,\n    saveHTMLToTextarea: true, // 保存 HTML 到 Textarea\n    searchReplace: true,\n    watch: true, // 关闭实时预览\n    htmlDecode: true, // 开启 HTML 标签解析，为了安全性，默认不开启\n    // toolbar  : false,             //关闭工具栏\n    // previewCodeHighlight : false, // 关闭预览 HTML 的代码块高亮，默认开启\n    emoji: true,\n    taskList: true,\n    tocm: true, // Using [TOCM]\n    tex: true, // 开启科学公式TeX语言支持，默认关闭\n    flowChart: true, // 开启流程图支持，默认关闭\n    sequenceDiagram: true, // 开启时序/序列图支持，默认关闭,\n    // dialogLockScreen : false,   // 设置弹出层对话框不锁屏，全局通用，默认为true\n    // dialogShowMask : false,     // 设置弹出层对话框显示透明遮罩层，全局通用，默认为true\n    // dialogDraggable : false,    // 设置弹出层对话框不可拖动，全局通用，默认为true\n    // dialogMaskOpacity : 0.4,    // 设置透明遮罩层的透明度，全局通用，默认值为0.1\n    // dialogMaskBgColor : \"#000\", // 设置透明遮罩层的背景颜色，全局通用，默认为#fff\n    imageUpload: true,\n    imageFormats: [\"jpg\", \"jpeg\", \"gif\", \"png\", \"bmp\", \"webp\"],\n    imageUploadURL: \"/api/article/image/upload\",\n    onload: function onload() {}\n};\n\nvar Editor = _wrapComponent('Editor')((_temp = _class = function (_Component) {\n    (0, _inherits3.default)(Editor, _Component);\n\n    function Editor(props) {\n        (0, _classCallCheck3.default)(this, Editor);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (Editor.__proto__ || (0, _getPrototypeOf2.default)(Editor)).call(this, props));\n\n        _this.state = {};\n        return _this;\n    }\n\n    (0, _createClass3.default)(Editor, [{\n        key: 'componentDidMount',\n        value: function () {\n            var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n                var config, _config, id, width, height, path, theme, previewTheme, editorTheme, markdown, codeFold, syncScrolling, saveHTMLToTextarea, searchReplace, watch, htmlDecode, toolbar, previewCodeHighlight, emoji, taskList, tocm, tex, flowChart, sequenceDiagram, dialogLockScreen, dialogShowMask, dialogDraggable, dialogMaskOpacity, dialogMaskBgColor, imageUpload, imageFormats, imageUploadURL, _onload;\n\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _context.next = 2;\n                                return loadEditorMD();\n\n                            case 2:\n                                config = this.props.config;\n\n                                config = (0, _assign2.default)({}, defaultConfig, config);\n\n                                _config = config, id = _config.id, width = _config.width, height = _config.height, path = _config.path, theme = _config.theme, previewTheme = _config.previewTheme, editorTheme = _config.editorTheme, markdown = _config.markdown, codeFold = _config.codeFold, syncScrolling = _config.syncScrolling, saveHTMLToTextarea = _config.saveHTMLToTextarea, searchReplace = _config.searchReplace, watch = _config.watch, htmlDecode = _config.htmlDecode, toolbar = _config.toolbar, previewCodeHighlight = _config.previewCodeHighlight, emoji = _config.emoji, taskList = _config.taskList, tocm = _config.tocm, tex = _config.tex, flowChart = _config.flowChart, sequenceDiagram = _config.sequenceDiagram, dialogLockScreen = _config.dialogLockScreen, dialogShowMask = _config.dialogShowMask, dialogDraggable = _config.dialogDraggable, dialogMaskOpacity = _config.dialogMaskOpacity, dialogMaskBgColor = _config.dialogMaskBgColor, imageUpload = _config.imageUpload, imageFormats = _config.imageFormats, imageUploadURL = _config.imageUploadURL, _onload = _config.onload;\n\n                                // 静态资源地址修改\n\n                                if (path !== defaultConfig.path) {\n                                    console.warn('Editor warning: Static resource address has changed, if you know exactly what you\\'re doing, ignore this warning');\n                                }\n\n                                this.editor = editormd(id, {\n                                    width: width,\n                                    height: height,\n                                    path: path,\n                                    theme: theme,\n                                    previewTheme: previewTheme,\n                                    editorTheme: editorTheme,\n                                    markdown: markdown,\n                                    codeFold: codeFold,\n                                    syncScrolling: syncScrolling,\n                                    saveHTMLToTextarea: saveHTMLToTextarea, // 保存 HTML 到 Textarea\n                                    searchReplace: searchReplace,\n                                    watch: watch, // 关闭实时预览\n                                    htmlDecode: htmlDecode, // 开启 HTML 标签解析，为了安全性，默认不开启\n                                    toolbar: toolbar, //关闭工具栏\n                                    previewCodeHighlight: previewCodeHighlight, // 关闭预览 HTML 的代码块高亮，默认开启\n                                    emoji: emoji,\n                                    taskList: taskList,\n                                    tocm: tocm, // Using [TOCM]\n                                    tex: tex, // 开启科学公式TeX语言支持，默认关闭\n                                    flowChart: flowChart, // 开启流程图支持，默认关闭\n                                    sequenceDiagram: sequenceDiagram, // 开启时序/序列图支持，默认关闭,\n                                    dialogLockScreen: dialogLockScreen, // 设置弹出层对话框不锁屏，全局通用，默认为true\n                                    dialogShowMask: dialogShowMask, // 设置弹出层对话框显示透明遮罩层，全局通用，默认为true\n                                    dialogDraggable: dialogDraggable, // 设置弹出层对话框不可拖动，全局通用，默认为true\n                                    dialogMaskOpacity: dialogMaskOpacity, // 设置透明遮罩层的透明度，全局通用，默认值为0.1\n                                    dialogMaskBgColor: dialogMaskBgColor, // 设置透明遮罩层的背景颜色，全局通用，默认为#fff\n                                    imageUpload: imageUpload,\n                                    imageFormats: imageFormats,\n                                    imageUploadURL: imageUploadURL,\n                                    onload: function onload() {\n                                        _onload(this.editor, this);\n                                    }\n                                });\n\n                            case 7:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n\n            function componentDidMount() {\n                return _ref.apply(this, arguments);\n            }\n\n            return componentDidMount;\n        }()\n    }, {\n        key: 'getMarkdown',\n        value: function getMarkdown() {\n            return this.editor.getMarkdown();\n        }\n    }, {\n        key: 'getHTML',\n        value: function getHTML() {\n            var config = this.props.config;\n\n            config = (0, _assign2.default)({}, defaultConfig, config);\n            if (config.watch) {\n                return this.editor.getPreviewedHTML();\n            }\n            return editormd.markdownToHTML('_previewHtml', { markdown: this.editor.getMarkdown() }).html();\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var config = this.props.config;\n\n            config = (0, _assign2.default)({}, defaultConfig, config);\n\n            return _react3.default.createElement(\n                'div',\n                { style: { width: config.width, height: config.height } },\n                _react3.default.createElement('div', { id: config.id }),\n                _react3.default.createElement('div', { id: '_previewHtml', style: { display: 'none' } })\n            );\n        }\n    }]);\n    return Editor;\n}(_react2.Component), _class.defaultProps = {\n    config: {}\n}, _temp));\n\nvar defaultShowConfig = {\n    id: 'EditorShowID' + new Date().getTime(),\n    path: '//static.liayal.com/editormd/lib/',\n    gfm: true,\n    toc: true,\n    tocm: true,\n    tocStartLevel: 1,\n    tocTitle: '目录',\n    tocDropdown: true,\n    tocContainer: '',\n    markdown: 'what can i do for you',\n    markdownSourceCode: true,\n    htmlDecode: true,\n    autoLoadKaTeX: true,\n    pageBreak: true,\n    atLink: true,\n    emailLink: true,\n    tex: true,\n    taskList: true,\n    emoji: true,\n    flowChart: true,\n    sequenceDiagram: true,\n    previewCodeHighlight: true\n};\n\nvar EditorShow = _wrapComponent('EditorShow')((_temp2 = _class2 = function (_Component2) {\n    (0, _inherits3.default)(EditorShow, _Component2);\n\n    function EditorShow() {\n        (0, _classCallCheck3.default)(this, EditorShow);\n        return (0, _possibleConstructorReturn3.default)(this, (EditorShow.__proto__ || (0, _getPrototypeOf2.default)(EditorShow)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(EditorShow, [{\n        key: 'componentDidMount',\n        value: function () {\n            var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2() {\n                var config, _config2, id, gfm, toc, tocm, tocStartLevel, tocTitle, tocDropdown, tocContainer, markdown, markdownSourceCode, htmlDecode, autoLoadKaTeX, pageBreak, atLink, emailLink, tex, taskList, emoji, flowChart, sequenceDiagram, previewCodeHighlight, path;\n\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                _context2.next = 2;\n                                return loadEditorMD();\n\n                            case 2:\n                                config = this.props.config;\n\n                                config = (0, _assign2.default)({}, defaultShowConfig, config);\n\n                                _config2 = config, id = _config2.id, gfm = _config2.gfm, toc = _config2.toc, tocm = _config2.tocm, tocStartLevel = _config2.tocStartLevel, tocTitle = _config2.tocTitle, tocDropdown = _config2.tocDropdown, tocContainer = _config2.tocContainer, markdown = _config2.markdown, markdownSourceCode = _config2.markdownSourceCode, htmlDecode = _config2.htmlDecode, autoLoadKaTeX = _config2.autoLoadKaTeX, pageBreak = _config2.pageBreak, atLink = _config2.atLink, emailLink = _config2.emailLink, tex = _config2.tex, taskList = _config2.taskList, emoji = _config2.emoji, flowChart = _config2.flowChart, sequenceDiagram = _config2.sequenceDiagram, previewCodeHighlight = _config2.previewCodeHighlight, path = _config2.path;\n\n\n                                this._init(path, function () {\n                                    editormd.markdownToHTML(id, {\n                                        gfm: gfm,\n                                        toc: toc,\n                                        tocm: tocm,\n                                        tocStartLevel: tocStartLevel,\n                                        tocTitle: tocTitle,\n                                        tocDropdown: tocDropdown,\n                                        tocContainer: tocContainer,\n                                        markdown: markdown,\n                                        markdownSourceCode: markdownSourceCode,\n                                        htmlDecode: htmlDecode,\n                                        autoLoadKaTeX: autoLoadKaTeX,\n                                        pageBreak: pageBreak,\n                                        atLink: atLink, // for @link\n                                        emailLink: emailLink, // for mail address auto link\n                                        tex: tex,\n                                        taskList: taskList, // Github Flavored Markdown task lists\n                                        emoji: emoji,\n                                        flowChart: flowChart,\n                                        sequenceDiagram: sequenceDiagram,\n                                        previewCodeHighlight: previewCodeHighlight\n                                    });\n                                });\n\n                            case 6:\n                            case 'end':\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n\n            function componentDidMount() {\n                return _ref2.apply(this, arguments);\n            }\n\n            return componentDidMount;\n        }()\n    }, {\n        key: '_init',\n        value: function _init(path, cb) {\n            function createDom(str) {\n                return document.createElement(str);\n            }\n\n            var div = createDom('div');\n            var id = 'EditorInitDom' + new Date().getTime();\n            div.id = id;\n            div.style.display = 'none';\n\n            var textarea = createDom('textarea');\n            div.appendChild(textarea);\n\n            document.body.appendChild(div);\n            // 加载静态资源，避免手动引入\n            // Editor.md如果原生支持，就不用这样hack了\n            editormd(id, {\n                path: path,\n                codeFold: true,\n                saveHTMLToTextarea: true, // 保存 HTML 到 Textarea\n                searchReplace: true,\n                htmlDecode: \"style,script,iframe|on*\", // 开启 HTML 标签解析，为了安全性，默认不开启\n                emoji: true,\n                taskList: true,\n                tocm: true, // Using [TOCM]\n                tex: true, // 开启科学公式TeX语言支持，默认关闭\n                flowChart: true, // 开启流程图支持，默认关闭\n                sequenceDiagram: true, // 开启时序/序列图支持，默认关闭,\n                imageUpload: true,\n                imageFormats: [\"jpg\", \"jpeg\", \"gif\", \"png\", \"bmp\", \"webp\"]\n            });\n\n            // 检测静态资源是否加载完毕\n            var timer = setInterval(function () {\n                try {\n                    if (_ && Diagram && flowchart) {\n                        clearInterval(timer);\n                        document.body.removeChild(div);\n\n                        cb();\n                    }\n                } catch (e) {}\n            }, 100);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                config = _props.config,\n                others = (0, _objectWithoutProperties3.default)(_props, ['config']);\n\n            config = (0, _assign2.default)({}, defaultShowConfig, config);\n\n            var _config3 = config,\n                id = _config3.id;\n\n            return _react3.default.createElement('div', (0, _extends3.default)({ id: id }, others));\n        }\n    }]);\n    return EditorShow;\n}(_react2.Component), _class2.defaultProps = {\n    config: {}\n}, _temp2));\n\nEditor.EditorShow = EditorShow;\nexports.default = Editor;",{"version":3,"sources":["web/components/EditorMd/index.js"],"names":["loadEditorMD","resolve","reject","window","editormd","script","document","createElement","async","onload","onerror","src","head","appendChild","defaultConfig","id","Date","width","height","path","markdown","codeFold","saveHTMLToTextarea","searchReplace","watch","htmlDecode","emoji","taskList","tocm","tex","flowChart","sequenceDiagram","imageUpload","imageFormats","imageUploadURL","props","state","config","theme","previewTheme","editorTheme","syncScrolling","toolbar","previewCodeHighlight","dialogLockScreen","dialogShowMask","dialogDraggable","dialogMaskOpacity","dialogMaskBgColor","console","warn","editor","getMarkdown","getPreviewedHTML","markdownToHTML","html","display","defaultProps","defaultShowConfig","getTime","gfm","toc","tocStartLevel","tocTitle","tocDropdown","tocContainer","markdownSourceCode","autoLoadKaTeX","pageBreak","atLink","emailLink","_init","cb","createDom","str","div","style","textarea","body","timer","setInterval","_","Diagram","flowchart","clearInterval","removeChild","e","others","Editor","EditorShow"],"mappings":"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","file":"index.js","sourceRoot":"/Users/mael.liang/Workspace/node-koa-test","sourcesContent":["import React, {Component} from 'react';\n// import jQuery from 'jquery';\n// import editormd from './editormd';\nimport './editormd.less';\n\nlet loadEditorMD = () => {\n    return new Promise((resolve, reject) => {\n        if (window.editormd) {\n            resolve(true);\n        } else {\n            let script = document.createElement(\"script\");\n            script.async = true;\n            script.onload = () => {\n                resolve(true);\n            };\n            script.onerror = () => {\n                reject(false);\n            };\n            script.src = '//static.liayal.com/editormd/editormd.min.js';\n            document.head.appendChild(script);\n        }\n    });\n};\nlet defaultConfig = {\n    // 组件接入方，并不需要知道具体ID\n    id: 'EditorID' + (+ new Date()),\n    width: \"100%\",\n    height: 740,\n    // 静态资源路径\n    path: '//static.liayal.com/editormd/lib/',\n    // theme : \"dark\",\n    // previewTheme : \"dark\",\n    // editorTheme : \"pastel-on-dark\",\n    markdown: `### 请开始你的表演`,\n    codeFold: true,\n    // syncScrolling : false,\n    saveHTMLToTextarea: true,    // 保存 HTML 到 Textarea\n    searchReplace: true,\n    watch : true,                // 关闭实时预览\n    htmlDecode: true,            // 开启 HTML 标签解析，为了安全性，默认不开启\n    // toolbar  : false,             //关闭工具栏\n    // previewCodeHighlight : false, // 关闭预览 HTML 的代码块高亮，默认开启\n    emoji: true,\n    taskList: true,\n    tocm: true,         // Using [TOCM]\n    tex: true,                   // 开启科学公式TeX语言支持，默认关闭\n    flowChart: true,             // 开启流程图支持，默认关闭\n    sequenceDiagram: true,       // 开启时序/序列图支持，默认关闭,\n    // dialogLockScreen : false,   // 设置弹出层对话框不锁屏，全局通用，默认为true\n    // dialogShowMask : false,     // 设置弹出层对话框显示透明遮罩层，全局通用，默认为true\n    // dialogDraggable : false,    // 设置弹出层对话框不可拖动，全局通用，默认为true\n    // dialogMaskOpacity : 0.4,    // 设置透明遮罩层的透明度，全局通用，默认值为0.1\n    // dialogMaskBgColor : \"#000\", // 设置透明遮罩层的背景颜色，全局通用，默认为#fff\n    imageUpload: true,\n    imageFormats: [\"jpg\", \"jpeg\", \"gif\", \"png\", \"bmp\", \"webp\"],\n    imageUploadURL: \"/api/article/image/upload\",\n    onload: function(){}\n};\n\nclass Editor extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n    }\n\n    static defaultProps = {\n        config: {}\n    };\n\n    async componentDidMount(){\n        await loadEditorMD();\n        let {config} = this.props;\n        config = Object.assign({}, defaultConfig, config);\n\n        let {\n            id, width, height, path, theme, previewTheme, editorTheme, markdown, codeFold, syncScrolling,\n            saveHTMLToTextarea, searchReplace, watch, htmlDecode, toolbar, previewCodeHighlight, emoji,\n            taskList, tocm, tex, flowChart, sequenceDiagram, dialogLockScreen, dialogShowMask, dialogDraggable,\n            dialogMaskOpacity, dialogMaskBgColor, imageUpload, imageFormats, imageUploadURL, onload\n        } = config;\n\n        // 静态资源地址修改\n        if(path !== defaultConfig.path){\n            console.warn('Editor warning: Static resource address has changed, if you know exactly what you\\'re doing, ignore this warning');\n        }\n\n        this.editor = editormd(id, {\n            width: width,\n            height: height,\n            path: path,\n            theme: theme,\n            previewTheme: previewTheme,\n            editorTheme: editorTheme,\n            markdown: markdown,\n            codeFold: codeFold,\n            syncScrolling: syncScrolling,\n            saveHTMLToTextarea: saveHTMLToTextarea,    // 保存 HTML 到 Textarea\n            searchReplace: searchReplace,\n            watch: watch,                // 关闭实时预览\n            htmlDecode: htmlDecode,            // 开启 HTML 标签解析，为了安全性，默认不开启\n            toolbar: toolbar,             //关闭工具栏\n            previewCodeHighlight: previewCodeHighlight, // 关闭预览 HTML 的代码块高亮，默认开启\n            emoji: emoji,\n            taskList: taskList,\n            tocm: tocm,         // Using [TOCM]\n            tex: tex,                   // 开启科学公式TeX语言支持，默认关闭\n            flowChart: flowChart,             // 开启流程图支持，默认关闭\n            sequenceDiagram: sequenceDiagram,       // 开启时序/序列图支持，默认关闭,\n            dialogLockScreen: dialogLockScreen,   // 设置弹出层对话框不锁屏，全局通用，默认为true\n            dialogShowMask: dialogShowMask,     // 设置弹出层对话框显示透明遮罩层，全局通用，默认为true\n            dialogDraggable: dialogDraggable,    // 设置弹出层对话框不可拖动，全局通用，默认为true\n            dialogMaskOpacity: dialogMaskOpacity,    // 设置透明遮罩层的透明度，全局通用，默认值为0.1\n            dialogMaskBgColor: dialogMaskBgColor, // 设置透明遮罩层的背景颜色，全局通用，默认为#fff\n            imageUpload: imageUpload,\n            imageFormats: imageFormats,\n            imageUploadURL: imageUploadURL,\n            onload: function(){\n                onload(this.editor, this);\n            }\n        });\n\n    }\n\n    getMarkdown() {\n        return this.editor.getMarkdown()\n    }\n\n    getHTML() {\n        let {config} = this.props;\n        config = Object.assign({}, defaultConfig, config);\n        if ( config.watch ) {\n            return this.editor.getPreviewedHTML();\n        }\n        return editormd.markdownToHTML('_previewHtml', {markdown: this.editor.getMarkdown()}).html();\n    }\n\n    render(){\n        let {config} = this.props;\n        config = Object.assign({}, defaultConfig, config);\n\n        return (<div style={{ width: config.width, height: config.height}}><div id={config.id}></div><div id='_previewHtml' style={{display: 'none'}}></div></div>);\n    }\n}\n\nlet defaultShowConfig = {\n    id: 'EditorShowID' + new Date().getTime(),\n    path: '//static.liayal.com/editormd/lib/',\n    gfm: true,\n    toc: true,\n    tocm: true,\n    tocStartLevel: 1,\n    tocTitle: '目录',\n    tocDropdown: true,\n    tocContainer: '',\n    markdown: 'what can i do for you',\n    markdownSourceCode: true,\n    htmlDecode: true,\n    autoLoadKaTeX: true,\n    pageBreak: true,\n    atLink: true,\n    emailLink: true,\n    tex: true,\n    taskList: true,\n    emoji: true,\n    flowChart: true,\n    sequenceDiagram: true,\n    previewCodeHighlight: true\n};\n\nclass EditorShow extends Component {\n    static defaultProps = {\n        config: {}\n    };\n\n    async componentDidMount(){\n        await loadEditorMD();\n        let {config} = this.props;\n        config = Object.assign({}, defaultShowConfig, config);\n\n        let {\n            id, gfm, toc, tocm, tocStartLevel, tocTitle, tocDropdown, tocContainer, markdown, markdownSourceCode,\n            htmlDecode, autoLoadKaTeX, pageBreak, atLink, emailLink, tex, taskList, emoji, flowChart,\n            sequenceDiagram, previewCodeHighlight, path\n        } = config;\n\n        this._init(path, function(){\n            editormd.markdownToHTML(id, {\n                gfm: gfm,\n                toc: toc,\n                tocm: tocm,\n                tocStartLevel: tocStartLevel,\n                tocTitle: tocTitle,\n                tocDropdown: tocDropdown,\n                tocContainer: tocContainer,\n                markdown: markdown,\n                markdownSourceCode: markdownSourceCode,\n                htmlDecode: htmlDecode,\n                autoLoadKaTeX: autoLoadKaTeX,\n                pageBreak: pageBreak,\n                atLink: atLink,    // for @link\n                emailLink: emailLink,    // for mail address auto link\n                tex: tex,\n                taskList: taskList,   // Github Flavored Markdown task lists\n                emoji: emoji,\n                flowChart: flowChart,\n                sequenceDiagram: sequenceDiagram,\n                previewCodeHighlight: previewCodeHighlight\n            });\n        });\n\n    }\n\n    _init(path, cb){\n        function createDom(str){\n            return document.createElement(str);\n        }\n\n        var div = createDom('div');\n        var id = 'EditorInitDom' + new Date().getTime();\n        div.id = id;\n        div.style.display = 'none';\n\n        var textarea = createDom('textarea');\n        div.appendChild(textarea);\n\n        document.body.appendChild(div);\n        // 加载静态资源，避免手动引入\n        // Editor.md如果原生支持，就不用这样hack了\n        editormd(id, {\n            path: path,\n            codeFold: true,\n            saveHTMLToTextarea: true,    // 保存 HTML 到 Textarea\n            searchReplace: true,\n            htmlDecode: \"style,script,iframe|on*\",            // 开启 HTML 标签解析，为了安全性，默认不开启\n            emoji: true,\n            taskList: true,\n            tocm: true,         // Using [TOCM]\n            tex: true,                   // 开启科学公式TeX语言支持，默认关闭\n            flowChart: true,             // 开启流程图支持，默认关闭\n            sequenceDiagram: true,       // 开启时序/序列图支持，默认关闭,\n            imageUpload: true,\n            imageFormats: [\"jpg\", \"jpeg\", \"gif\", \"png\", \"bmp\", \"webp\"]\n        });\n\n        // 检测静态资源是否加载完毕\n        var timer = setInterval(function(){\n            try{\n                if(_ && Diagram && flowchart){\n                    clearInterval(timer);\n                    document.body.removeChild(div);\n\n                    cb();\n                }\n            }catch(e){\n            }\n        }, 100);\n    }\n\n    render(){\n        let {config, ...others} = this.props;\n        config = Object.assign({}, defaultShowConfig, config);\n\n        let {id} = config;\n        return (\n            <div id={id} {...others}/>\n        );\n    }\n}\n\nEditor.EditorShow = EditorShow;\nexport default Editor;"]}]}