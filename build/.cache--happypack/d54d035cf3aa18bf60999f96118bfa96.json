{"remainingRequest":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js?{\"presets\":[]}!/Users/mael.liang/Workspace/node-koa-test/web/page/admin/Login/index.js","dependencies":[{"path":"/Users/mael.liang/Workspace/node-koa-test/web/page/admin/Login/index.js","mtime":1513328414000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _tabs = require('antd/lib/tabs');\n\nvar _tabs2 = _interopRequireDefault(_tabs);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _md = require('md5');\n\nvar _md2 = _interopRequireDefault(_md);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _resigteForm = require('./resigte-form');\n\nvar _resigteForm2 = _interopRequireDefault(_resigteForm);\n\nvar _loginForm = require('./login-form');\n\nvar _loginForm2 = _interopRequireDefault(_loginForm);\n\nvar _funy = require('./funy');\n\nvar _funy2 = _interopRequireDefault(_funy);\n\nvar _jsCookie = require('js-cookie');\n\nvar _jsCookie2 = _interopRequireDefault(_jsCookie);\n\nrequire('./login.less');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TabPane = _tabs2.default.TabPane;\n\nvar Login = function (_Component) {\n    (0, _inherits3.default)(Login, _Component);\n\n    function Login(props) {\n        (0, _classCallCheck3.default)(this, Login);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (Login.__proto__ || (0, _getPrototypeOf2.default)(Login)).call(this, props));\n\n        _this.handleSubmit = function (e) {\n            e.preventDefault();\n            _this.refs.loginForm.validateFields(function (err, values) {\n                if (!err) {\n                    values.password = (0, _md2.default)(values.password).toUpperCase();\n                    _axios2.default.post('/api/signin', values).then(function (res) {\n                        var result = res.data;\n                        if (result.code !== 200) {\n                            _this.context.showMessage(result.message);\n                        } else {\n                            _jsCookie2.default.set('_UserName', result.name);\n                            _this.props.history.push('/');\n                        }\n                    }).catch(function (error) {\n                        _this.context.showMessage('系统错误，请稍后再试');\n                    });\n                }\n            });\n        };\n\n        _this.handleRegisterSubmit = function (e) {\n            e.preventDefault();\n            _this.refs.registeForm.validateFields(function (err, values) {\n                if (!err) {\n                    _axios2.default.post('/api/singup', values).then(function (res) {\n                        var result = res.data;\n\n                        if (result.code != 200) {\n                            _this.context.showMessage(result.message);\n                        } else {\n                            _this.context.showMessage(result.message);\n                            _this.props.history.push('/login');\n                        }\n                    }).catch(function (error) {\n                        _this.context.showMessage('系统错误，请稍后再试');\n                    });\n                }\n            });\n        };\n\n        _this.tabClick = function (key) {\n            _this.props.history.push(key);\n        };\n\n        var match = props.match;\n\n        _this.state = {\n            one: [],\n            activeKey: match.path\n        };\n\n        return _this;\n    }\n\n    (0, _createClass3.default)(Login, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            _axios2.default.get('/api/one').then(function (res) {\n                _this2.setState({\n                    one: res.data.data\n                });\n            });\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextprops) {\n            var path = nextprops.match.path;\n\n            this.setState({\n                activeKey: path\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _state = this.state,\n                one = _state.one,\n                activeKey = _state.activeKey;\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'login-layout', style: { minHeight: document.body.clientHeight } },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'login-wrap' },\n                    _react2.default.createElement(\n                        'p',\n                        { className: 'jitang tl' },\n                        _react2.default.createElement(\n                            'span',\n                            null,\n                            'M'\n                        ),\n                        '\\u7ED9\\u81EA\\u5DF1\\u4E00\\u6B21\\u6587\\u827A\\u7684\\u673A\\u4F1A'\n                    ),\n                    _react2.default.createElement(\n                        _tabs2.default,\n                        { tabPosition: 'left', activeKey: activeKey || '/login', onTabClick: this.tabClick },\n                        _react2.default.createElement(\n                            TabPane,\n                            { tab: '\\u767B\\u5F55', key: '/login' },\n                            _react2.default.createElement(_loginForm2.default, { handleSubmit: this.handleSubmit, ref: 'loginForm' }),\n                            _react2.default.createElement(_funy2.default, { data: one })\n                        ),\n                        _react2.default.createElement(\n                            TabPane,\n                            { tab: '\\u6CE8\\u518C', key: '/registe' },\n                            _react2.default.createElement(_resigteForm2.default, { handleRegisterSubmit: this.handleRegisterSubmit, ref: 'registeForm' }),\n                            _react2.default.createElement(_funy2.default, { data: one })\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return Login;\n}(_react.Component);\n\nLogin.contextTypes = {\n    showMessage: _propTypes2.default.func\n};\nexports.default = Login;",null]}