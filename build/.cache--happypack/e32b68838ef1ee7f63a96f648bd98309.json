{"remainingRequest":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js?{\"presets\":[\"react-hmre\"]}!/Users/mael.liang/Workspace/node-koa-test/web/page/admin/UserInfo/index.js","dependencies":[{"path":"/Users/mael.liang/Workspace/node-koa-test/web/page/admin/UserInfo/index.js","mtime":1519640481012},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _modal = require('antd/lib/modal');\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _input = require('antd/lib/input');\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _button = require('antd/lib/button');\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _layout = require('antd/lib/layout');\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nvar _index = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/redbox-react/lib/index.js');\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-catch-errors/lib/index.js');\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _react2 = require('react');\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _index5 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-hmr/lib/index.js');\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _class, _temp;\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _jsCookie = require('js-cookie');\n\nvar _jsCookie2 = _interopRequireDefault(_jsCookie);\n\nrequire('./index.less');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _components = {\n    UserInfo: {\n        displayName: 'UserInfo'\n    }\n};\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/admin/UserInfo/index.js',\n    components: _components,\n    locals: [module],\n    imports: [_react3.default]\n});\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/admin/UserInfo/index.js',\n    components: _components,\n    locals: [],\n    imports: [_react3.default, _index2.default]\n});\n\nfunction _wrapComponent(id) {\n    return function (Component) {\n        return _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2(_UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);\n    };\n}\n\nvar Header = _layout2.default.Header,\n    Content = _layout2.default.Content;\n\nvar UserInfo = _wrapComponent('UserInfo')((_temp = _class = function (_Component) {\n    (0, _inherits3.default)(UserInfo, _Component);\n\n    function UserInfo(props) {\n        (0, _classCallCheck3.default)(this, UserInfo);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (UserInfo.__proto__ || (0, _getPrototypeOf2.default)(UserInfo)).call(this, props));\n\n        _this.modalOk = function () {\n            var name = _this.refs.ModalInput.input.value;\n\n            if (!name) return _this.context.showMessage(\"请输入昵称\");\n\n            _axios2.default.post('/api/update/userinfo', { name: name }).then(function (res) {\n                _this.context.showMessage(res.data.message);\n\n                if (res.data.code == 200) {\n                    _this.setState(function (preState) {\n                        var userInfo = preState.userInfo;\n                        userInfo.name = name;\n\n                        return { userInfo: userInfo, showModal: false };\n                    });\n                }\n            });\n        };\n\n        _this.setNickName = function () {\n            _this.setState({\n                showModal: true\n            });\n        };\n\n        _this.hideModal = function () {\n            _this.setState({\n                showModal: false\n            });\n        };\n\n        _this.logout = function () {\n            _jsCookie2.default.remove('access_token');\n            _jsCookie2.default.remove('uid');\n            _this.props.history.push('/login');\n        };\n\n        _this.state = {\n            userInfo: {},\n            showModal: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(UserInfo, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            var _this2 = this;\n\n            _axios2.default.get('/api/get/userinfo').then(function (res) {\n                _this2.setState({\n                    userInfo: res.data.user\n                });\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _state = this.state,\n                userInfo = _state.userInfo,\n                showModal = _state.showModal;\n\n            return _react3.default.createElement(\n                _layout2.default,\n                { className: 'userinfo-layout' },\n                _react3.default.createElement(\n                    Header,\n                    { className: 'userinfo-header clearfix' },\n                    _react3.default.createElement(\n                        'h3',\n                        null,\n                        '\\u8D26\\u53F7\\u8BBE\\u7F6E'\n                    ),\n                    _react3.default.createElement(\n                        _button2.default,\n                        { className: 'fr logout', onClick: this.logout },\n                        '\\u9000\\u51FA\\u767B\\u5F55'\n                    )\n                ),\n                _react3.default.createElement(\n                    Content,\n                    { className: 'userinfo-manage-content' },\n                    _react3.default.createElement(\n                        'div',\n                        { className: 'userinfo-body' },\n                        _react3.default.createElement(\n                            'div',\n                            { className: 'info' },\n                            _react3.default.createElement(\n                                'h4',\n                                null,\n                                '\\u4FE1\\u606F'\n                            ),\n                            _react3.default.createElement(\n                                'div',\n                                { className: 'info-box' },\n                                _react3.default.createElement(\n                                    'span',\n                                    { className: 'label' },\n                                    '\\u6635\\u79F0\\uFF1A'\n                                ),\n                                _react3.default.createElement(\n                                    'span',\n                                    { className: 'text' },\n                                    userInfo.name || '----'\n                                ),\n                                _react3.default.createElement(\n                                    _button2.default,\n                                    { type: 'primary', size: 'small', onClick: this.setNickName },\n                                    userInfo.name ? '修改昵称' : '设置昵称'\n                                )\n                            ),\n                            _react3.default.createElement(\n                                'div',\n                                { className: 'info-box' },\n                                _react3.default.createElement(\n                                    'span',\n                                    { className: 'label' },\n                                    '\\u90AE\\u7BB1\\uFF1A'\n                                ),\n                                _react3.default.createElement(\n                                    'span',\n                                    { className: 'text' },\n                                    userInfo.email\n                                )\n                            )\n                        )\n                    )\n                ),\n                _react3.default.createElement(\n                    _modal2.default,\n                    {\n                        title: '\\u8BBE\\u7F6E\\uFF0F\\u4FEE\\u6539\\u6635\\u79F0',\n                        visible: showModal,\n                        onOk: this.modalOk,\n                        onCancel: this.hideModal,\n                        okText: '\\u786E\\u5B9A',\n                        cancelText: '\\u53D6\\u6D88'\n                    },\n                    _react3.default.createElement(_input2.default, { ref: 'ModalInput', placeholder: '\\u8BF7\\u8F93\\u5165\\u6635\\u79F0' })\n                )\n            );\n        }\n    }]);\n    return UserInfo;\n}(_react2.Component), _class.contextTypes = {\n    showMessage: _propTypes2.default.func\n}, _temp));\n\nexports.default = UserInfo;",{"version":3,"sources":["web/page/admin/UserInfo/index.js"],"names":["Header","Content","props","modalOk","name","refs","ModalInput","input","value","context","showMessage","post","then","res","data","message","code","setState","userInfo","preState","showModal","setNickName","hideModal","logout","remove","history","push","state","get","user","email","contextTypes","func"],"mappings":"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","file":"index.js","sourceRoot":"/Users/mael.liang/Workspace/node-koa-test","sourcesContent":["import React, { Component } from 'react';\nimport { Layout, Modal, Input, Button, Avatar, } from 'antd';\nimport PropTypes from 'prop-types';\nimport Axios from 'axios';\nimport Cookies from 'js-cookie';\nimport './index.less';\n\nconst {Header, Content} = Layout;\n\nexport default class UserInfo extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            userInfo: {},\n            showModal: false\n        };\n    }\n\n    static contextTypes = {\n        showMessage: PropTypes.func\n    };\n\n    componentWillMount() {\n        Axios.get('/api/get/userinfo')\n            .then( res => {\n                this.setState({\n                    userInfo: res.data.user\n                })\n            })\n    }\n\n    modalOk = () => {\n        const name = this.refs.ModalInput.input.value;\n\n        if (!name) return this.context.showMessage(\"请输入昵称\");\n\n        Axios.post('/api/update/userinfo', {name})\n            .then( res => {\n                this.context.showMessage(res.data.message);\n\n                if (res.data.code == 200) {\n                    this.setState( preState => {\n                        let userInfo = preState.userInfo;\n                        userInfo.name = name;\n\n                        return {userInfo, showModal: false};\n                    })\n                }\n            })\n    }\n\n    setNickName = () => {\n        this.setState({\n            showModal: true\n        })\n    }\n\n    hideModal = () => {\n        this.setState({\n            showModal: false\n        })\n    }\n\n    logout = () => {\n        Cookies.remove('access_token');\n        Cookies.remove('uid');\n        this.props.history.push('/login');\n    }\n\n    render() {\n        const { userInfo, showModal } = this.state;\n        return (\n            <Layout className =\"userinfo-layout\" >\n                <Header className = 'userinfo-header clearfix' >\n                    <h3>账号设置</h3><Button className='fr logout' onClick={ this.logout } >退出登录</Button>\n                </Header>\n                <Content className = \"userinfo-manage-content\" >\n                    <div className=\"userinfo-body\">\n                        <div className=\"info\">\n                            <h4>信息</h4>\n                            <div className=\"info-box\">\n                                <span className=\"label\">昵称：</span>\n                                <span className=\"text\">{userInfo.name || '----'}</span>\n                                <Button type=\"primary\" size=\"small\" onClick={ this.setNickName } >{ userInfo.name ? '修改昵称' : '设置昵称'}</Button>\n                            </div>\n                            <div className=\"info-box\">\n                                <span className=\"label\">邮箱：</span>\n                                <span className=\"text\">{ userInfo.email }</span>\n                            </div>\n                        </div>\n                    </div>\n                </Content>\n                <Modal\n                    title=\"设置／修改昵称\"\n                    visible={showModal}\n                    onOk={ this.modalOk }\n                    onCancel={ this.hideModal }\n                    okText=\"确定\"\n                    cancelText=\"取消\"\n                >\n                  <Input ref='ModalInput' placeholder=\"请输入昵称\" />\n                </Modal>\n            </Layout>\n        )\n    }\n}"]}]}