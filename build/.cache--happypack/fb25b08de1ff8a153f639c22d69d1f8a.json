{"remainingRequest":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js?{\"presets\":[\"react-hmre\"]}!/Users/mael.liang/Workspace/node-koa-test/web/page/blog/Articles/index.js","dependencies":[{"path":"/Users/mael.liang/Workspace/node-koa-test/web/page/blog/Articles/index.js","mtime":1517912783000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/mael.liang/Workspace/node-koa-test/node_modules/babel-loader/lib/index.js","mtime":1503096278000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _pagination = require('antd/lib/pagination');\n\nvar _pagination2 = _interopRequireDefault(_pagination);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _index = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/redbox-react/lib/index.js');\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-catch-errors/lib/index.js');\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _react2 = require('react');\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _index5 = require('/Users/mael.liang/Workspace/node-koa-test/node_modules/react-transform-hmr/lib/index.js');\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _class, _temp, _initialiseProps;\n\nvar _reactRouterDom = require('react-router-dom');\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _components = {\n    Articles: {\n        displayName: 'Articles'\n    }\n};\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/blog/Articles/index.js',\n    components: _components,\n    locals: [module],\n    imports: [_react3.default]\n});\n\nvar _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({\n    filename: '/Users/mael.liang/Workspace/node-koa-test/web/page/blog/Articles/index.js',\n    components: _components,\n    locals: [],\n    imports: [_react3.default, _index2.default]\n});\n\nfunction _wrapComponent(id) {\n    return function (Component) {\n        return _UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformHmrLibIndexJs2(_UsersMaelLiangWorkspaceNodeKoaTestNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);\n    };\n}\n\nvar Articles = _wrapComponent('Articles')((_temp = _class = function (_Component) {\n    (0, _inherits3.default)(Articles, _Component);\n\n    function Articles(props) {\n        (0, _classCallCheck3.default)(this, Articles);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (Articles.__proto__ || (0, _getPrototypeOf2.default)(Articles)).call(this, props));\n\n        _initialiseProps.call(_this);\n\n        var articles = props.articles,\n            tags = props.tags,\n            curTagId = props.curTagId,\n            allNum = props.allNum,\n            page = props.page,\n            banners = props.banners,\n            allPage = props.allPage;\n\n        _this.state = {\n            articles: articles,\n            tags: tags,\n            curTagId: curTagId,\n            allNum: allNum,\n            page: page,\n            banners: banners,\n            allPage: allPage\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(Articles, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _state = this.state,\n                articles = _state.articles,\n                tags = _state.tags,\n                banners = _state.banners;\n\n\n            if (!articles.length || !tags.length || !banners.length) {\n                this.getArticles(1, null);\n                this.getAllTags();\n                this.getBanners();\n            }\n        }\n    }, {\n        key: 'getBanners',\n        value: function getBanners() {\n            var _this2 = this;\n\n            _axios2.default.get('/api/get/banners', {\n                params: {\n                    page: 'HOME'\n                }\n            }).then(function (res) {\n                var resData = res.data;\n                _this2.setState({\n                    banners: resData.banners\n                });\n            });\n        }\n    }, {\n        key: 'showBanners',\n        value: function showBanners() {\n            var banners = this.state.banners;\n\n            var bannerDom = [];\n\n            if (banners.length == 1) return _react3.default.createElement(\n                'div',\n                { className: 'banners' },\n                _react3.default.createElement(\n                    'div',\n                    { className: 'banner-item', style: { backgroundImage: 'url(' + banners[0].url + ')' } },\n                    _react3.default.createElement(\n                        'a',\n                        { href: banners[0].href ? banners[0].href : \"javascript:void(0);\" },\n                        _react3.default.createElement(\n                            'div',\n                            { className: 'text' },\n                            _react3.default.createElement(\n                                'p',\n                                { className: 'nowrapmulti' },\n                                banners[0].text\n                            )\n                        )\n                    )\n                )\n            );\n\n            if (banners.length == 2) return _react3.default.createElement(\n                'div',\n                { className: 'banners banners-two clearfix' },\n                _react3.default.createElement(\n                    'div',\n                    { className: 'banner-item fl', style: { backgroundImage: 'url(' + banners[0].url + ')' } },\n                    _react3.default.createElement(\n                        'a',\n                        { href: banners[0].href ? banners[0].href : \"javascript:void(0);\" },\n                        _react3.default.createElement('img', { src: banners[0].url, hidden: true }),\n                        _react3.default.createElement(\n                            'div',\n                            { className: 'text' },\n                            _react3.default.createElement(\n                                'p',\n                                { className: 'nowrapmulti' },\n                                banners[0].text\n                            )\n                        )\n                    )\n                ),\n                _react3.default.createElement(\n                    'div',\n                    { className: 'banner-item fr', style: { backgroundImage: 'url(' + banners[1].url + ')' } },\n                    _react3.default.createElement(\n                        'a',\n                        { href: banners[1].href ? banners[1].href : \"javascript:void(0);\" },\n                        _react3.default.createElement('img', { src: banners[1].url, hidden: true }),\n                        _react3.default.createElement(\n                            'div',\n                            { className: 'text' },\n                            _react3.default.createElement(\n                                'p',\n                                { className: 'nowrapmulti' },\n                                banners[1].text\n                            )\n                        )\n                    )\n                )\n            );\n\n            if (banners.length == 3) return _react3.default.createElement(\n                'div',\n                { className: 'banners banners-three clearfix' },\n                _react3.default.createElement(\n                    'div',\n                    { className: 'left-col banner-item fl', style: { backgroundImage: 'url(' + banners[0].url + ')' } },\n                    _react3.default.createElement(\n                        'a',\n                        { href: banners[0].href ? banners[0].href : \"javascript:void(0);\" },\n                        _react3.default.createElement('img', { src: banners[0].url, hidden: true }),\n                        _react3.default.createElement(\n                            'div',\n                            { className: 'text' },\n                            _react3.default.createElement(\n                                'p',\n                                { className: 'nowrapmulti' },\n                                banners[0].text\n                            )\n                        )\n                    )\n                ),\n                _react3.default.createElement(\n                    'div',\n                    { className: 'right-col fr' },\n                    _react3.default.createElement(\n                        'div',\n                        { className: 'banner-item', style: { backgroundImage: 'url(' + banners[1].url + ')' } },\n                        _react3.default.createElement(\n                            'a',\n                            { href: banners[1].href ? banners[1].href : \"javascript:void(0);\" },\n                            _react3.default.createElement('img', { src: banners[1].url, hidden: true }),\n                            _react3.default.createElement(\n                                'div',\n                                { className: 'text' },\n                                _react3.default.createElement(\n                                    'p',\n                                    { className: 'nowrapmulti' },\n                                    banners[1].text\n                                )\n                            )\n                        )\n                    ),\n                    _react3.default.createElement(\n                        'div',\n                        { className: 'banner-item', style: { backgroundImage: 'url(' + banners[2].url + ')' } },\n                        _react3.default.createElement(\n                            'a',\n                            { href: banners[2].href ? banners[2].href : \"javascript:void(0);\" },\n                            _react3.default.createElement('img', { src: banners[2].url, hidden: true }),\n                            _react3.default.createElement(\n                                'div',\n                                { className: 'text' },\n                                _react3.default.createElement(\n                                    'p',\n                                    { className: 'nowrapmulti' },\n                                    banners[2].text\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this3 = this;\n\n            var _state2 = this.state,\n                articles = _state2.articles,\n                tags = _state2.tags,\n                curTagId = _state2.curTagId,\n                allNum = _state2.allNum,\n                page = _state2.page,\n                allPage = _state2.allPage;\n\n            return _react3.default.createElement(\n                'div',\n                { className: 'blog-articles-layout' },\n                this.showBanners(),\n                _react3.default.createElement(\n                    'div',\n                    { className: 'blog-tags' },\n                    _react3.default.createElement(\n                        _reactRouterDom.Link,\n                        { to: { pathname: '/' }, onClick: function onClick() {\n                                _this3.getArticles(1, null);\n                            }, className: (0, _classnames2.default)(\"tag\", { 'tag-active': !curTagId }) },\n                        '\\u6240\\u6709\\u6587\\u7AE0'\n                    ),\n                    tags && tags.length ? tags.map(function (tag) {\n                        return tag.count > 0 && _react3.default.createElement(\n                            _reactRouterDom.Link,\n                            { to: { pathname: '/', search: '?tag=' + tag.id }, onClick: function onClick() {\n                                    _this3.getArticles(1, tag.id);\n                                }, className: (0, _classnames2.default)(\"tag\", { 'tag-active': curTagId == tag.id }), key: tag.id },\n                            tag.name\n                        );\n                    }) : null\n                ),\n                _react3.default.createElement(\n                    'div',\n                    { className: 'blog-articles-list' },\n                    _react3.default.createElement(\n                        'ul',\n                        null,\n                        articles && articles.length ? articles.map(function (article, index) {\n                            return _react3.default.createElement(\n                                'li',\n                                { className: 'article-tiem', key: article.id },\n                                _react3.default.createElement(\n                                    _reactRouterDom.Link,\n                                    { to: '/article/' + article.id },\n                                    _react3.default.createElement(\n                                        'span',\n                                        { className: 'article-num' },\n                                        index + 1\n                                    ),\n                                    _react3.default.createElement(\n                                        'h3',\n                                        { className: 'nowrapmulti' },\n                                        article.title\n                                    )\n                                )\n                            );\n                        }) : null\n                    )\n                ),\n                allPage > 1 ? _react3.default.createElement(_pagination2.default, { size: 'small', total: allNum, current: page, onChange: this.changePage }) : null\n            );\n        }\n    }]);\n    return Articles;\n}(_react2.Component), _class.defaultProps = {\n    articles: [],\n    tags: [],\n    banners: [],\n    allPage: 0,\n    curTagId: null\n}, _initialiseProps = function _initialiseProps() {\n    var _this4 = this;\n\n    this.getArticles = function (page, tagid) {\n        _axios2.default.get('/api/get/publish/articles', {\n            params: {\n                tag: tagid || null,\n                category: 'DEFAULT',\n                page: page\n            }\n        }).then(function (res) {\n            var resData = res.data;\n            _this4.setState({\n                articles: resData.articles,\n                curTagId: tagid,\n                allNum: resData.allNum,\n                page: resData.page\n            });\n        });\n    };\n\n    this.getAllTags = function () {\n        _axios2.default.get('/api/get/alltags').then(function (res) {\n            var resData = res.data;\n            _this4.setState({\n                tags: resData.tags\n            });\n        });\n    };\n\n    this.changePage = function (page, pageSize) {\n        _this4.getArticles(page, _this4.state.curTagId);\n    };\n}, _temp));\n\nexports.default = Articles;",{"version":3,"sources":["web/page/blog/Articles/index.js"],"names":["props","articles","tags","curTagId","allNum","page","banners","allPage","state","length","getArticles","getAllTags","getBanners","get","params","then","resData","res","data","setState","bannerDom","backgroundImage","url","href","text","showBanners","pathname","map","tag","count","search","id","name","article","index","title","changePage","defaultProps","tagid","category","pageSize"],"mappings":"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","file":"index.js","sourceRoot":"/Users/mael.liang/Workspace/node-koa-test","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Pagination } from 'antd';\nimport Axios from 'axios';\nimport classNames from 'classnames';\n\nexport default class Articles extends Component {\n    constructor(props) {\n        super(props);\n        const { articles, tags, curTagId, allNum, page, banners, allPage } = props;\n        this.state = {\n            articles,\n            tags,\n            curTagId,\n            allNum,\n            page,\n            banners,\n            allPage\n        };\n    }\n\n    static defaultProps = {\n        articles: [],\n        tags: [],\n        banners: [],\n        allPage: 0,\n        curTagId: null\n    }\n\n    componentDidMount() {\n        const { articles, tags, banners } = this.state;\n\n        if (!articles.length || !tags.length || !banners.length) {\n            this.getArticles(1, null);\n            this.getAllTags();\n            this.getBanners();\n        }\n    }\n\n    getArticles = (page, tagid)=> {\n        Axios.get('/api/get/publish/articles', {\n            params: {\n                tag: tagid || null,\n                category: 'DEFAULT',\n                page\n            }\n        })\n        .then( res => {\n            let resData = res.data;\n            this.setState({\n                articles: resData.articles,\n                curTagId: tagid,\n                allNum: resData.allNum,\n                page: resData.page\n            })\n        })\n    }\n\n    getBanners() {\n        Axios.get('/api/get/banners', {\n            params: {\n                page: 'HOME'\n            }\n        })\n        .then( res => {\n            let resData = res.data;\n            this.setState({\n                banners: resData.banners\n            });\n        })\n    }\n\n    getAllTags = () => {\n        Axios.get('/api/get/alltags')\n            .then( res => {\n                let resData = res.data;\n                this.setState({\n                    tags: resData.tags\n                })\n            })\n    }\n\n    changePage = (page, pageSize) => {\n        this.getArticles(page, this.state.curTagId)\n    }\n\n    showBanners() {\n        const { banners } = this.state;\n        let bannerDom = [];\n\n        if (banners.length == 1)\n            return (\n                <div className=\"banners\">\n                    <div className=\"banner-item\" style={ {backgroundImage: `url(${banners[0].url})`} }><a href={banners[0].href ? banners[0].href : \"javascript:void(0);\"} >\n                        <div className=\"text\"><p className='nowrapmulti'>{banners[0].text}</p></div>\n                    </a></div>\n                </div>\n            )\n\n        if (banners.length == 2)\n            return (\n                <div className=\"banners banners-two clearfix\">\n                    <div className=\"banner-item fl\" style={ {backgroundImage: `url(${banners[0].url})`} } ><a href={banners[0].href ? banners[0].href : \"javascript:void(0);\"} >\n                        <img src={banners[0].url} hidden/>\n                        <div className=\"text\"><p className='nowrapmulti'>{banners[0].text}</p></div>\n                    </a></div>\n                    <div className=\"banner-item fr\" style={ {backgroundImage: `url(${banners[1].url})`} }><a href={banners[1].href ? banners[1].href : \"javascript:void(0);\"} >\n                        <img src={banners[1].url} hidden/>\n                        <div className=\"text\"><p className='nowrapmulti'>{banners[1].text}</p></div>\n                    </a></div>\n                </div>\n            )\n\n        if (banners.length == 3)\n            return (\n                <div className=\"banners banners-three clearfix\">\n                    <div className=\"left-col banner-item fl\" style={ {backgroundImage: `url(${banners[0].url})`} } ><a href={banners[0].href ? banners[0].href : \"javascript:void(0);\"} >\n                        <img src={banners[0].url} hidden/>\n                        <div className=\"text\"><p className='nowrapmulti'>{banners[0].text}</p></div>\n                    </a></div>\n                    <div className=\"right-col fr\">\n                        <div className=\"banner-item\" style={ {backgroundImage: `url(${banners[1].url})`} }><a href={banners[1].href ? banners[1].href : \"javascript:void(0);\"} >\n                            <img src={banners[1].url} hidden/>\n                            <div className=\"text\"><p className='nowrapmulti'>{banners[1].text}</p></div>\n                        </a></div>\n                        <div className=\"banner-item\" style={ {backgroundImage: `url(${banners[2].url})`} }><a href={banners[2].href ? banners[2].href : \"javascript:void(0);\"} >\n                            <img src={banners[2].url} hidden/>\n                            <div className=\"text\"><p className='nowrapmulti'>{banners[2].text}</p></div>\n                        </a></div>\n                    </div>\n                </div>\n            )\n    }\n\n    render() {\n        const { articles, tags, curTagId, allNum, page, allPage } = this.state;\n        return (\n            <div className=\"blog-articles-layout\">\n                { this.showBanners() }\n                <div className=\"blog-tags\">\n                    <Link to={{pathname: '/'}} onClick={ () => { this.getArticles(1, null) } } className={ classNames(\"tag\", {'tag-active': !curTagId}) } >所有文章</Link>\n                    { tags && tags.length ? tags.map( tag => (tag.count > 0) && <Link to={{pathname: '/', search: `?tag=${tag.id}`}} onClick={ () => { this.getArticles(1, tag.id) } } className={ classNames(\"tag\", {'tag-active': curTagId == tag.id}) } key={tag.id} >{tag.name}</Link>) : null}\n                </div>\n                <div className=\"blog-articles-list\">\n                    <ul>\n                        {articles && articles.length ? articles.map( (article, index)=> <li className=\"article-tiem\" key={article.id}><Link to={`/article/${article.id}`} >\n                            <span className=\"article-num\">{( index + 1)}</span>\n                            <h3 className='nowrapmulti'>{article.title}</h3>\n                        </Link></li>) : null}\n                    </ul>\n                </div>\n                { allPage > 1 ? <Pagination size=\"small\" total={allNum} current={page} onChange={ this.changePage } /> : null}\n            </div>\n        )\n    }\n}"]}]}