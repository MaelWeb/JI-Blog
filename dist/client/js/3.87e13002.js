(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[3],{

/***/ "./page/blog/Article/article-loading.js":
/*!**********************************************!*\
  !*** ./page/blog/Article/article-loading.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = __webpack_require__(/*! react */ "../node_modules/react/index.js");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ArticleLoading = function ArticleLoading(props) {
    return _react2.default.createElement(
        'article',
        { className: 'blog-article-body blog-article-body-loading' },
        _react2.default.createElement('h2', { className: 'article-title article-loading-block', style: { width: "100%" } }),
        _react2.default.createElement(
            'p',
            { className: 'article-desc' },
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "28%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "40%" } })
        ),
        _react2.default.createElement('p', { className: 'article-loading-block', style: { width: "94%" } }),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "22%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "66%" } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "56%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "39%" } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "21%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "15%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: '40%' } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "22%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "66%" } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "56%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "39%" } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "21%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "15%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: '40%' } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "22%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "66%" } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "42%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "46%" } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "11%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "25%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: '40%' } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "22%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "66%" } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "21%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "15%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: '40%' } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "56%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "39%" } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "11%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "25%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: '40%' } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "11%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "25%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: '40%' } })
        ),
        _react2.default.createElement(
            'p',
            null,
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "21%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: "15%" } }),
            _react2.default.createElement('span', { className: 'article-loading-block', style: { width: '40%' } })
        )
    );
};

exports.default = ArticleLoading;

/***/ }),

/***/ "./page/blog/Article/index.js":
/*!************************************!*\
  !*** ./page/blog/Article/index.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(module) {

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = __webpack_require__(/*! babel-runtime/helpers/defineProperty */ "../node_modules/babel-runtime/helpers/defineProperty.js");

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _getPrototypeOf = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ "../node_modules/babel-runtime/core-js/object/get-prototype-of.js");

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ "../node_modules/babel-runtime/helpers/classCallCheck.js");

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(/*! babel-runtime/helpers/createClass */ "../node_modules/babel-runtime/helpers/createClass.js");

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ "../node_modules/babel-runtime/helpers/possibleConstructorReturn.js");

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(/*! babel-runtime/helpers/inherits */ "../node_modules/babel-runtime/helpers/inherits.js");

var _inherits3 = _interopRequireDefault(_inherits2);

var _index = __webpack_require__(/*! ../node_modules/redbox-react/lib/index.js */ "../node_modules/redbox-react/lib/index.js");

var _index2 = _interopRequireDefault(_index);

var _index3 = __webpack_require__(/*! ../node_modules/react-transform-catch-errors/lib/index.js */ "../node_modules/react-transform-catch-errors/lib/index.js");

var _index4 = _interopRequireDefault(_index3);

var _react2 = __webpack_require__(/*! react */ "../node_modules/react/index.js");

var _react3 = _interopRequireDefault(_react2);

var _index5 = __webpack_require__(/*! ../node_modules/react-transform-hmr/lib/index.js */ "../node_modules/react-transform-hmr/lib/index.js");

var _index6 = _interopRequireDefault(_index5);

var _class, _temp;

var _propTypes = __webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _axios = __webpack_require__(/*! axios */ "../node_modules/axios/index.js");

var _axios2 = _interopRequireDefault(_axios);

var _moment = __webpack_require__(/*! moment */ "../node_modules/moment/moment.js");

var _moment2 = _interopRequireDefault(_moment);

var _Icon = __webpack_require__(/*! ../../../components/Icon */ "./components/Icon/index.js");

var _Icon2 = _interopRequireDefault(_Icon);

var _Comments = __webpack_require__(/*! ../Comments */ "./page/blog/Comments/index.js");

var _Comments2 = _interopRequireDefault(_Comments);

var _classnames = __webpack_require__(/*! classnames */ "../node_modules/classnames/index.js");

var _classnames2 = _interopRequireDefault(_classnames);

var _articleLoading = __webpack_require__(/*! ./article-loading */ "./page/blog/Article/article-loading.js");

var _articleLoading2 = _interopRequireDefault(_articleLoading);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _components = {
    Article: {
        displayName: 'Article'
    }
};

var _UsersMaelWorkspaceJIBlogNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
    filename: '/Users/mael/workspace/JI-Blog/web/page/blog/Article/index.js',
    components: _components,
    locals: [module],
    imports: [_react3.default]
});

var _UsersMaelWorkspaceJIBlogNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
    filename: '/Users/mael/workspace/JI-Blog/web/page/blog/Article/index.js',
    components: _components,
    locals: [],
    imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
    return function (Component) {
        return _UsersMaelWorkspaceJIBlogNode_modulesReactTransformHmrLibIndexJs2(_UsersMaelWorkspaceJIBlogNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
    };
}

_moment2.default.locale('zh-cn');

var WEIBOKEY = '';

var Article = _wrapComponent('Article')((_temp = _class = function (_Component) {
    (0, _inherits3.default)(Article, _Component);

    function Article(props) {
        (0, _classCallCheck3.default)(this, Article);

        var _this = (0, _possibleConstructorReturn3.default)(this, (Article.__proto__ || (0, _getPrototypeOf2.default)(Article)).call(this, props));

        var article = props.article,
            commentsData = props.commentsData;


        _this.state = {
            article: article,
            commentsData: commentsData
        };

        return _this;
    }

    (0, _createClass3.default)(Article, [{
        key: 'componentWillMount',
        value: function componentWillMount() {
            var _this2 = this;

            var params = this.props.match.params;
            var article = this.state.article;

            if (!article || article.id != params.id) {
                _axios2.default.get('/api/get/article/' + params.id, {
                    params: {
                        filter: "web"
                    }
                }).then(function (res) {
                    var resData = res.data;
                    document.title = resData.article.title + '  - \u300CJI \xB7 \u8BB0\u5C0F\u6808\u300D';
                    _this2.setState({
                        article: resData.article
                    });
                });

                _axios2.default.get('/api/get/comments?articleid=' + params.id).then(function (res) {
                    var resData = res.data;
                    _this2.setState({
                        commentsData: resData
                    });
                });
            }
        }
    }, {
        key: 'componentDidMount',
        value: function componentDidMount() {
            var article = this.state.article;

            if (article) {
                document.title = article.title + '  - \u300CJI \xB7 \u8BB0\u5C0F\u6808\u300D';
            }
        }
    }, {
        key: 'commentDidUpdate',
        value: function commentDidUpdate() {
            console.log(11);
        }
    }, {
        key: 'render',
        value: function render() {
            var _state = this.state,
                article = _state.article,
                commentsData = _state.commentsData;
            var params = this.props.match.params;

            var _article = article || {};
            var cls = (0, _classnames2.default)('blog-article-layout', (0, _defineProperty3.default)({}, 'blog-article-' + (_article.category && _article.category.toLocaleLowerCase()), _article.category));
            return _react3.default.createElement(
                'div',
                { className: cls },
                _react3.default.createElement(
                    'div',
                    { className: 'blog-article-layout-wrap' },
                    _react3.default.createElement(
                        'h2',
                        { className: 'article-title' },
                        _react3.default.createElement(
                            'p',
                            null,
                            _react3.default.createElement(
                                'em',
                                null,
                                _article.title
                            )
                        )
                    ),
                    article ? _react3.default.createElement(
                        'article',
                        { className: 'blog-article-body' },
                        _react3.default.createElement('div', { className: 'article-content', dangerouslySetInnerHTML: { __html: _article.htmlContent } }),
                        _react3.default.createElement(
                            'div',
                            { className: 'article-tips' },
                            _react3.default.createElement(
                                'p',
                                { className: 'article-desc' },
                                _react3.default.createElement(
                                    'span',
                                    null,
                                    '\u5199\u4E8E ',
                                    (0, _moment2.default)(_article.createTime).format('LL')
                                ),
                                _article.tags && _article.tags.length ? _react3.default.createElement(
                                    'span',
                                    { className: 'ml' },
                                    _react3.default.createElement(_Icon2.default, { type: 'cc-tag' }),
                                    ' ',
                                    _article.tags.map(function (tag) {
                                        return tag.name + ' ';
                                    })
                                ) : null,
                                _react3.default.createElement(
                                    'span',
                                    { className: 'ml' },
                                    _react3.default.createElement(_Icon2.default, { type: 'visit' }),
                                    ' ',
                                    _article.visited || 0
                                )
                            ),
                            _react3.default.createElement(
                                'p',
                                null,
                                '\u5982\u975E\u7279\u522B\u6CE8\u660E\uFF0C\u6587\u7AE0\u7686\u4E3A\u539F\u521B\u3002'
                            ),
                            _react3.default.createElement(
                                'p',
                                null,
                                _react3.default.createElement(
                                    'b',
                                    null,
                                    '\u8F6C\u8F7D\u8BF7\u6CE8\u660E\u51FA\u5904\uFF1A'
                                ),
                                ' ',
                                _react3.default.createElement(
                                    'a',
                                    { href: 'https://www.liayal.com/article/' + _article.id },
                                    'https://www.liayal.com/article/' + _article.id
                                )
                            )
                        )
                    ) : _react3.default.createElement(_articleLoading2.default, null),
                    _react3.default.createElement(
                        'section',
                        { className: 'article-share-box' },
                        _react3.default.createElement(
                            'a',
                            { href: 'https://service.weibo.com/share/share.php?url=' + encodeURIComponent('https://www.liayal.com/article/' + _article.id) + '&title=' + encodeURIComponent(_article.title) + '&pic=' + encodeURIComponent(_article.banner || '') + '&appkey=' + WEIBOKEY, className: 'share-icon' },
                            _react3.default.createElement(_Icon2.default, { type: 'weibo' })
                        ),
                        _react3.default.createElement(
                            'a',
                            { href: 'http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=' + encodeURIComponent('https://www.liayal.com/article/' + _article.id) + '&title=' + encodeURIComponent(_article.title) + '&desc=' + encodeURIComponent(_article.abstract) + '&summary=' + encodeURIComponent(_article.abstract) + '&site=' + encodeURIComponent('//hynal.com'), className: 'share-icon' },
                            _react3.default.createElement(_Icon2.default, { type: 'qzone' })
                        ),
                        _react3.default.createElement(
                            'a',
                            { href: 'http://shuo.douban.com/!service/share?href=' + encodeURIComponent('https://www.liayal.com/article/' + _article.id) + '&name=' + encodeURIComponent(_article.title) + '&text=' + encodeURIComponent(_article.abstract) + '&image=' + encodeURIComponent(_article.banner || '') + '&starid=0&aid=0&style=11', className: 'share-icon' },
                            _react3.default.createElement(_Icon2.default, { type: 'douban' })
                        )
                    ),
                    _react3.default.createElement(_Comments2.default, { articleid: params.id, commentsData: commentsData })
                )
            );
        }
    }]);
    return Article;
}(_react2.Component), _class.defaultProps = {
    commentsData: {}
}, _class.defaultPropTypes = {
    commentsData: _propTypes2.default.object
}, _temp));

exports.default = Article;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../node_modules/webpack/buildin/module.js */ "../node_modules/webpack/buildin/module.js")(module)))

/***/ }),

/***/ "./page/blog/Comments/index.js":
/*!*************************************!*\
  !*** ./page/blog/Comments/index.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(module) {

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _pagination = __webpack_require__(/*! antd/lib/pagination */ "../node_modules/antd/lib/pagination/index.js");

var _pagination2 = _interopRequireDefault(_pagination);

var _extends2 = __webpack_require__(/*! babel-runtime/helpers/extends */ "../node_modules/babel-runtime/helpers/extends.js");

var _extends3 = _interopRequireDefault(_extends2);

var _stringify = __webpack_require__(/*! babel-runtime/core-js/json/stringify */ "../node_modules/babel-runtime/core-js/json/stringify.js");

var _stringify2 = _interopRequireDefault(_stringify);

var _getPrototypeOf = __webpack_require__(/*! babel-runtime/core-js/object/get-prototype-of */ "../node_modules/babel-runtime/core-js/object/get-prototype-of.js");

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = __webpack_require__(/*! babel-runtime/helpers/classCallCheck */ "../node_modules/babel-runtime/helpers/classCallCheck.js");

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = __webpack_require__(/*! babel-runtime/helpers/createClass */ "../node_modules/babel-runtime/helpers/createClass.js");

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = __webpack_require__(/*! babel-runtime/helpers/possibleConstructorReturn */ "../node_modules/babel-runtime/helpers/possibleConstructorReturn.js");

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = __webpack_require__(/*! babel-runtime/helpers/inherits */ "../node_modules/babel-runtime/helpers/inherits.js");

var _inherits3 = _interopRequireDefault(_inherits2);

var _index = __webpack_require__(/*! ../node_modules/redbox-react/lib/index.js */ "../node_modules/redbox-react/lib/index.js");

var _index2 = _interopRequireDefault(_index);

var _index3 = __webpack_require__(/*! ../node_modules/react-transform-catch-errors/lib/index.js */ "../node_modules/react-transform-catch-errors/lib/index.js");

var _index4 = _interopRequireDefault(_index3);

var _react2 = __webpack_require__(/*! react */ "../node_modules/react/index.js");

var _react3 = _interopRequireDefault(_react2);

var _index5 = __webpack_require__(/*! ../node_modules/react-transform-hmr/lib/index.js */ "../node_modules/react-transform-hmr/lib/index.js");

var _index6 = _interopRequireDefault(_index5);

var _class, _temp;

var _propTypes = __webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _moment = __webpack_require__(/*! moment */ "../node_modules/moment/moment.js");

var _moment2 = _interopRequireDefault(_moment);

var _classnames = __webpack_require__(/*! classnames */ "../node_modules/classnames/index.js");

var _classnames2 = _interopRequireDefault(_classnames);

var _Icon = __webpack_require__(/*! ../../../components/Icon */ "./components/Icon/index.js");

var _Icon2 = _interopRequireDefault(_Icon);

var _Emoji = __webpack_require__(/*! ../../../components/Emoji */ "./components/Emoji/index.js");

var _Emoji2 = _interopRequireDefault(_Emoji);

var _CommentInput = __webpack_require__(/*! ../../../components/CommentInput */ "./components/CommentInput/index.js");

var _CommentInput2 = _interopRequireDefault(_CommentInput);

var _axios = __webpack_require__(/*! axios */ "../node_modules/axios/index.js");

var _axios2 = _interopRequireDefault(_axios);

var _UI = __webpack_require__(/*! ../../../components/UI */ "./components/UI/index.js");

var _Util = __webpack_require__(/*! ../Util */ "./page/blog/Util/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _components = {
    Comments: {
        displayName: 'Comments'
    }
};

var _UsersMaelWorkspaceJIBlogNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
    filename: '/Users/mael/workspace/JI-Blog/web/page/blog/Comments/index.js',
    components: _components,
    locals: [module],
    imports: [_react3.default]
});

var _UsersMaelWorkspaceJIBlogNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
    filename: '/Users/mael/workspace/JI-Blog/web/page/blog/Comments/index.js',
    components: _components,
    locals: [],
    imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
    return function (Component) {
        return _UsersMaelWorkspaceJIBlogNode_modulesReactTransformHmrLibIndexJs2(_UsersMaelWorkspaceJIBlogNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
    };
}

var emojiStyle = {
    height: 20
};

_moment2.default.locale('zh-cn');

var Comments = _wrapComponent('Comments')((_temp = _class = function (_Component) {
    (0, _inherits3.default)(Comments, _Component);

    function Comments(props) {
        (0, _classCallCheck3.default)(this, Comments);

        var _this = (0, _possibleConstructorReturn3.default)(this, (Comments.__proto__ || (0, _getPrototypeOf2.default)(Comments)).call(this, props));

        _this.preventDefault = function (e) {
            e.preventDefault();
        };

        _this.exportComment = function (commentCont) {
            var reply = _this.state.reply;

            var user = /access\_token/g.test(document.cookie) ? {
                name: '记小栈',
                email: 'mael.liang@live.com',
                site: 'https://www.liayal.com',
                avatar: 'https://cdn.liayal.com/image/logo_min.png'
            } : window.localStorage.getItem('_liayal_user');

            if (user && commentCont) {
                _this.saveComment({
                    user: typeof user == 'string' ? JSON.parse(user) : user,
                    reply: reply ? reply.id : null,
                    commentCont: commentCont
                });
            } else if (commentCont) {
                _this.setState({
                    showUserInfo: true,
                    commentCont: commentCont
                });
            }
        };

        _this.commentSubmit = function () {
            var name = _this.refs.userName.value,
                email = _this.refs.userEamil.value,
                site = _this.refs.userSite.value,
                emailReg = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/g;
            var _this$state = _this.state,
                reply = _this$state.reply,
                commentCont = _this$state.commentCont;


            if (!email || !name) return _UI.Toast.info('填一下昵称和邮箱呗！');

            if (!emailReg.test(email)) return _UI.Toast.info('邮箱格式不正确呀！');

            window.localStorage.setItem('_liayal_user', (0, _stringify2.default)({ name: name, email: email, site: site }));

            _this.saveComment({
                user: { name: name, email: email, site: site },
                reply: reply ? reply.id : null,
                commentCont: commentCont
            });
        };

        _this.commentCancle = function () {
            _this.setState({
                showUserInfo: false
            });
        };

        _this.showReplyModal = function (comment) {
            _this.setState({
                isShowReplyModal: true,
                reply: comment
            });
        };

        _this.closeReplyModal = function () {
            _this.setState({
                isShowReplyModal: false,
                reply: null
            });
        };

        _this.getTimeString = function (date) {
            var now = new Date(),
                nowDate = now.getDate(),
                createTime = new Date(date),
                createDate = createTime.getDate(),
                diff = now.getTime() - date;
            // 1分钟内
            if (diff < 1000 * 60) {
                return '刚刚';
            } else if (diff < 1000 * 60 * 60) {
                // 1小时内
                return Math.ceil(diff / (1000 * 60)) + '\u5206\u949F\u524D';
            } else if (diff < 1000 * 60 * 60 * 24 && nowDate == createDate) {
                // 当天内
                return '\u4ECA\u5929 ' + (0, _moment2.default)(date).format('HH:mm');
            } else if (now.getYear() == createTime.getYear()) {
                return (0, _moment2.default)(date).format('MM-DD HH:mm');
            } else {
                return (0, _moment2.default)(date).format('lll');
            }
        };

        _this.changePage = function (page, pageSize) {
            _this.getComments(page);
        };

        _this.state = {
            showUserInfo: false,
            isShowReplyModal: false,
            reply: null,
            commentCont: null,
            commentsData: props.commentsData
        };

        _this.caretIndex = 0;
        return _this;
    }

    (0, _createClass3.default)(Comments, [{
        key: 'componentWillReceiveProps',
        value: function componentWillReceiveProps(nextProps) {
            this.setState({
                commentsData: nextProps.commentsData
            });
        }
    }, {
        key: 'componentDidMount',
        value: function componentDidMount() {}
    }, {
        key: 'saveComment',
        value: function saveComment(data) {
            var _this2 = this;

            var articleid = this.props.articleid;

            _axios2.default.post('/api/create/comment', (0, _extends3.default)({}, data, { articleid: articleid })).then(function (res) {
                var resdata = res.data;
                if (resdata.code == 200) {
                    _this2.getComments(0);
                    resdata.reply ? _this2.refs.replyInput.clearTextarea() : _this2.refs.commentInput.clearTextarea();
                    _this2.setState({
                        showUserInfo: false,
                        isShowReplyModal: false,
                        reply: null,
                        commentCont: null
                    });
                } else {
                    _UI.Toast.warn(resdata.message);
                }
            }).catch(function (err) {
                _UI.Toast.warn('发布失败');
            });
        }
    }, {
        key: 'getComments',
        value: function getComments(page) {
            var _this3 = this;

            _axios2.default.get('/api/get/comments', {
                params: {
                    articleid: this.props.articleid,
                    page: page,
                    size: 20
                }
            }).then(function (res) {
                var resData = res.data;
                _this3.setState({
                    commentsData: resData
                });
            });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this4 = this;

            var _state = this.state,
                showUserInfo = _state.showUserInfo,
                isShowReplyModal = _state.isShowReplyModal,
                reply = _state.reply,
                commentsData = _state.commentsData;
            var comments = commentsData.comments,
                allPage = commentsData.allPage,
                page = commentsData.page,
                allNum = commentsData.allNum;

            return _react3.default.createElement(
                'article',
                { className: 'blog-comment' },
                _react3.default.createElement(_CommentInput2.default, { exportComment: this.exportComment, ref: 'commentInput' }),
                _react3.default.createElement(
                    'h3',
                    { className: 'blog-comment-title' },
                    '\u8BC4\u8BBA'
                ),
                _react3.default.createElement(
                    'div',
                    { className: 'comment-list' },
                    comments && comments.length ? comments.map(function (comment, index) {
                        return _react3.default.createElement(
                            'div',
                            { className: 'comment-item clearfix border-b', key: index, name: comment.id },
                            _react3.default.createElement(
                                'div',
                                { className: 'comment-avatar fl' },
                                comment.user && comment.user.avatar ? _react3.default.createElement('img', { src: comment.user.avatar, alt: '', className: 'avatar' }) : _react3.default.createElement(_Icon2.default, { type: 'avatar' })
                            ),
                            _react3.default.createElement(
                                'div',
                                { className: 'comment-body fl' },
                                _react3.default.createElement(
                                    'h6',
                                    null,
                                    comment.user.name,
                                    _react3.default.createElement(
                                        'small',
                                        null,
                                        (0, _Util.getTimeString)(comment.createTime)
                                    )
                                ),
                                comment.reply ? _react3.default.createElement(
                                    _Emoji2.default,
                                    { style: emojiStyle },
                                    _react3.default.createElement(
                                        'blockquote',
                                        { className: 'nowrapmulti' },
                                        '@',
                                        comment.reply.user.name,
                                        ': ',
                                        comment.reply.commentCont
                                    )
                                ) : null,
                                _react3.default.createElement(
                                    _Emoji2.default,
                                    { style: emojiStyle },
                                    _react3.default.createElement(
                                        'p',
                                        null,
                                        comment.commentCont
                                    )
                                ),
                                _react3.default.createElement(
                                    'div',
                                    { className: 'comment-reply' },
                                    _react3.default.createElement(_Icon2.default, { type: 'reply', onClick: function onClick(e) {
                                            _this4.showReplyModal(comment);
                                        } })
                                )
                            )
                        );
                    }) : _react3.default.createElement(
                        'p',
                        { className: 'no-comments tc' },
                        '\uFF5E \u8BC4\u8BBA\u8FD8\u6CA1\u6709\uFF0C\u6C99\u53D1\u53EF\u4EE5\u6709 O(\u2229_\u2229)O~ '
                    )
                ),
                allPage > 1 ? _react3.default.createElement(_pagination2.default, { size: 'small', total: allNum, current: page, defaultPageSize: 20, onChange: this.changePage }) : null,
                _react3.default.createElement(
                    'div',
                    { className: 'comment-modal', hidden: !showUserInfo, style: { zIndex: 5 }, ref: 'UserModal' },
                    _react3.default.createElement(
                        'div',
                        { className: 'comment-user-modal-form' },
                        _react3.default.createElement('img', { src: '//cdn.liayal.com/image/logo.png', alt: '' }),
                        _react3.default.createElement('input', { type: 'text', name: 'name', placeholder: '\u6635\u79F0(\u5FC5\u586B)', ref: 'userName' }),
                        _react3.default.createElement('input', { type: 'text', autoComplete: 'email', name: 'email', placeholder: 'xxxx@qq.com(\u5FC5\u586B)', ref: 'userEamil' }),
                        _react3.default.createElement('input', { type: 'text', name: 'site', placeholder: 'www.yourblog.com', ref: 'userSite' }),
                        _react3.default.createElement(
                            'div',
                            { className: 'btns' },
                            _react3.default.createElement(
                                'button',
                                { onClick: this.commentCancle },
                                '\u53D6\u6D88'
                            ),
                            _react3.default.createElement(
                                'button',
                                { onClick: this.commentSubmit },
                                '\u786E\u8BA4'
                            )
                        )
                    )
                ),
                _react3.default.createElement(
                    'div',
                    { className: 'comment-modal', hidden: !isShowReplyModal, ref: 'ReplyModal' },
                    _react3.default.createElement(
                        'div',
                        { className: 'comment-reply-from' },
                        _react3.default.createElement(
                            'h6',
                            { className: 'tl' },
                            '\u56DE\u590D\uFF1A',
                            reply && reply.user.name,
                            ' ',
                            _react3.default.createElement(_Icon2.default, { type: 'close-x comment-close', onClick: this.closeReplyModal })
                        ),
                        _react3.default.createElement(_CommentInput2.default, { exportComment: this.exportComment, ref: 'replyInput' })
                    )
                )
            );
        }
    }]);
    return Comments;
}(_react2.Component), _class.defaultProps = {
    articleid: '',
    commentsData: {}
}, _class.defaultPropTypes = {
    commentsData: _propTypes2.default.object
}, _temp));

exports.default = Comments;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../node_modules/webpack/buildin/module.js */ "../node_modules/webpack/buildin/module.js")(module)))

/***/ })

}]);
//# sourceMappingURL=3.87e13002.js.map