{"version":3,"sources":["webpack:///./components/ImageGallery/index.js","webpack:///./components/Toucher/index.js","webpack:///./config/index.js","webpack:///./page/blog/Photoes/imageItem.js","webpack:///./page/blog/Photoes/index.js"],"names":["props","preventDefault","e","close","setState","isShow","_onSliding","isTransitioning","state","window","setTimeout","slideDuration","slideToIndex","index","event","currentIndex","slideCount","images","length","nextIndex","previousIndex","offsetPercentage","style","transition","slideLeft","slideRight","_getSlideStyle","baseTranslateX","totalSlides","translateX","_getTranslateXForTwoSlide","translate","WebkitTransform","MozTransform","msTransform","OTransform","transform","startIndex","nextProps","ReactDOM","findDOMNode","dom","addEventListener","_slideIsTransitioning","_ignoreIsTransitioning","_isFirstOrLastSlide","indexIsNotPreviousOrNextSlide","isLastSlide","isFirstSlide","slidingMoreThanOneSlideLeftOrRight","Math","abs","notGoingFromFirstToLast","notGoingFromLastToFirst","slides","map","img","_shouldPushSlideOnInfiniteMode","slideStyle","push","src","getSlides","Component","propTypes","PropTypes","number","array","defaultProps","touchStartTime","lastTouchTime","x1","y1","x2","y2","touchDelay","longTap","isActive","eventMark","_events","DOM","eventListener","touchStart","bind","touchend","touchmove","actionOver","clearTimeout","name","touches","plugTouches","touch","newE","type","target","pageX","pageY","clientX","clientY","match","plugStartPosition","startX","startY","moveX","moveY","call_result","stopPropagation","eventName","callback","event_callback","parentNode","EMIT","Date","_this","now","doubleTap","isSingleTap","direction","swipeDirection","children","className","others","React","IMG_URL","IMG_QUERY","ImageItem","onClick","photo","margin","width","height","desc","photoes","page","allPage","photoSrcs","addSrc","showPhotoView","currentPhotoIndex","isShowImageGallery","imageGalleryIndex","isLoading","getPhotos","photoLayoutDom","headerDom","refs","photoHeader","blogNavDom","document","getElementById","classList","add","onscroll","Axios","get","params","then","res","data","preState","concat","removeEventListener","remove","allphoto","banner","newPho","key","original","thumbnail","backgroundImage","contentRect","bounds","measureRef","columns","slice","selectPhoto","_scrollTop","pageYOffset","documentElement","scrollTop","body","offsetHeight","clientHeight"],"mappings":"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","file":"js/7.c39a0602.js","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport Toucher from '../Toucher';\nimport Icon from '../Icon';\nimport PropTypes from 'prop-types';\nimport ClassNames from 'classnames';\n\nexport default class ImageGallery extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            currentIndex: props.startIndex,\n            offsetPercentage: 0,\n            isShow: false\n        }\n    }\n\n    static propTypes = {\n        startIndex: PropTypes.number,\n        images: PropTypes.array,\n        slideDuration: PropTypes.number\n    };\n\n    static defaultProps = {\n        startIndex: 0,\n        images: [],\n        slideDuration: 450\n    };\n\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.startIndex >= nextProps.images.length) {\n            this.setState({\n                currentIndex: 0,\n                isShow: nextProps.isShow\n            })\n        } else {\n            this.setState({\n                currentIndex: nextProps.startIndex,\n                isShow: nextProps.isShow\n            })\n        }\n    }\n\n    componentDidMount() {\n        if (ReactDOM.findDOMNode(this)) {\n            this.dom = ReactDOM.findDOMNode(this);\n            this.dom.addEventListener('touchmove', this.preventDefault);\n        }\n    }\n\n    preventDefault = (e) => {\n         e.preventDefault();\n    }\n\n    close = () => {\n        this.setState({\n            isShow:false\n        })\n    }\n\n    _onSliding = () => {\n       const { isTransitioning } = this.state;\n        window.setTimeout(() => {\n            if (isTransitioning) {\n                this.setState({isTransitioning: !isTransitioning});\n            }\n        }, this.props.slideDuration);\n    };\n\n    slideToIndex = (index, event) => {\n        const {currentIndex, isTransitioning} = this.state;\n\n        if (!isTransitioning) {\n\n            let slideCount = this.props.images.length - 1;\n            let nextIndex = index;\n\n            if (index < 0) {\n                nextIndex = slideCount;\n            } else if (index > slideCount) {\n                nextIndex = 0;\n            }\n\n            this.setState({\n                previousIndex: currentIndex,\n                currentIndex: nextIndex,\n                isTransitioning: nextIndex !== currentIndex,\n                offsetPercentage: 0,\n                style: {\n                  transition: `all ${this.props.slideDuration}ms ease-out`\n                }\n            }, this._onSliding);\n        }\n    }\n\n    slideLeft = (event) => {\n        this.slideToIndex(this.state.currentIndex - 1, event);\n    }\n\n    slideRight = (event) => {\n        this.slideToIndex(this.state.currentIndex + 1, event);\n    }\n\n    _getSlideStyle = (index) => {\n        const {currentIndex, offsetPercentage} = this.state;\n        const {images} = this.props;\n        const baseTranslateX = -100 * currentIndex;\n        const totalSlides = images.length - 1;\n\n        // calculates where the other slides belong based on currentIndex\n        let translateX = baseTranslateX + (index * 100) + offsetPercentage;\n\n        if (images.length > 2) {\n            if (currentIndex === 0 && index === totalSlides) {\n                // make the last slide the slide before the first\n                translateX = -100 + offsetPercentage;\n            } else if (currentIndex === totalSlides && index === 0) {\n            // make the first slide the slide after the last\n                translateX = 100 + offsetPercentage;\n            }\n        }\n\n        // Special case when there are only 2 images with infinite on\n        if (images.length === 2) {\n            translateX = this._getTranslateXForTwoSlide(index);\n        }\n\n        const translate = `translate(${translateX}%, 0)`;\n\n        return {\n            WebkitTransform: translate,\n            MozTransform: translate,\n            msTransform: translate,\n            OTransform: translate,\n            transform: translate,\n        };\n    };\n\n    _shouldPushSlideOnInfiniteMode(index) {\n        /*\n          Push(show) slide if slide is the current slide, and the next slide\n          OR\n          The slide is going more than 1 slide left, or right, but not going from\n          first to last and not going from last to first\n          There is an edge case where if you go to the first or last slide, when they're\n          not left, or right of each other they will try to catch up in the background\n          so unless were going from first to last or vice versa we don't want the first\n          or last slide to show up during our transition\n        */\n        return !this._slideIsTransitioning(index) ||\n          (this._ignoreIsTransitioning() && !this._isFirstOrLastSlide(index));\n    }\n\n    _slideIsTransitioning(index) {\n        /*\n        returns true if the gallery is transitioning and the index is not the\n        previous or currentIndex\n        */\n        const { isTransitioning, previousIndex, currentIndex } = this.state;\n        const indexIsNotPreviousOrNextSlide = !(index === previousIndex || index === currentIndex);\n        return isTransitioning && indexIsNotPreviousOrNextSlide;\n    }\n\n    _isFirstOrLastSlide(index) {\n        const totalSlides = this.props.images.length - 1;\n        const isLastSlide = index === totalSlides;\n        const isFirstSlide = index === 0;\n        return isLastSlide || isFirstSlide;\n    }\n\n    _ignoreIsTransitioning() {\n        /*\n          Ignore isTransitioning because were not going to sibling slides\n          e.g. center to left or center to right\n        */\n        const { previousIndex, currentIndex } = this.state;\n        const totalSlides = this.props.images.length - 1;\n        // we want to show the in between slides transition\n        const slidingMoreThanOneSlideLeftOrRight = Math.abs(previousIndex - currentIndex) > 1;\n        const notGoingFromFirstToLast = !(previousIndex === 0 && currentIndex === totalSlides);\n        const notGoingFromLastToFirst = !(previousIndex === totalSlides && currentIndex === 0);\n\n        return slidingMoreThanOneSlideLeftOrRight &&\n          notGoingFromFirstToLast &&\n          notGoingFromLastToFirst;\n    }\n\n\n    getSlides() {\n        let slides = [];\n        const { images } = this.props;\n        const { currentIndex } = this.state;\n\n        images.length && images.map((img, index) => {\n            if (this._shouldPushSlideOnInfiniteMode(index)) {\n                let slideStyle = this._getSlideStyle(index);\n                slides.push(\n                    (<div className='image-gallery-slide' style={ Object.assign(slideStyle, this.state.style) } key={index} >\n                        <img src={img.src}/>\n                    </div>)\n                );\n            }\n        })\n\n        return slides;\n    }\n\n    render() {\n        const { isShow, currentIndex } = this.state;\n        const { images } = this.props;\n        return(\n            <div className=\"mael-image-gallery\" hidden={!isShow} >\n                <Icon type='close' onClick={ this.close } />\n                <Toucher className=\"image-gallery-swipe\" onSwipeRight={ this.slideLeft } onSwipeLeft={ this.slideRight } >\n                    <div className=\"image-gallery-arrow arrow-left\" onClick={ this.slideLeft } ><Icon type='bold-arrow-left' /></div>\n                    <div className=\"image-gallery-slides\">\n                        { this.getSlides() }\n                    </div>\n                    <div className=\"image-gallery-arrow arrow-right\" onClick={ this.slideRight } ><Icon type='bold-arrow-right' /></div>\n                </Toucher>\n                <p className='image-index tc'>{currentIndex + 1 }/{images.length}</p>\n            </div>\n        )\n    }\n}","/*\n * react toucher (移动端手势库)\n *\n * 支持事件：singleTap(轻击), doubleTap(双击), longTap(长按), swipeUp(上划), swipeRight(右划), swipeDown(下划), swipeleft(左划)\n *\n * Use: <Toucher onSwipeLeft={ this.swipeLeft.bind(this) } ></Toucher>\n *\n * create by mael\n */\nimport React from 'react';\nimport { findDOMNode } from 'react-dom';\n\nexport default class Toucher extends React.Component {\n    constructor(props) {\n        super(props)\n\n        //轻击开始时间\n        this.touchStartTime = 0;\n\n        //记录上一次点击时间\n        this.lastTouchTime = 0;\n\n        //记录初始轻击的位置\n        this.x1, this.y1, this.x2, this.y2;\n\n        //轻击事件的延时器\n        this.touchDelay;\n\n        //测试长按事件的延时器\n        this.longTap;\n\n        //记录当前事件是否已为等待结束的状态\n        this.isActive = false;\n        //记录有坐标信息的事件\n        this.eventMark = null;\n\n        // 事件堆\n        this._events = {};\n    }\n\n    componentDidMount() {\n        this.DOM = findDOMNode(this);\n        this._events = this.props;\n        this.eventListener();\n    }\n\n    eventListener() {\n        /**\n         * 对开始手势的监听\n         */\n        this.DOM.addEventListener('touchstart', this.touchStart.bind(this));\n        this.DOM.addEventListener('MSPointerDown', this.touchStart.bind(this));\n        this.DOM.addEventListener('pointerdown', this.touchStart.bind(this));\n\n        /**\n         * 对手势结束的监听（轻击）\n         */\n        this.DOM.addEventListener('touchend', this.touchend.bind(this));\n        this.DOM.addEventListener('MSPointerUp', this.touchend.bind(this));\n        this.DOM.addEventListener('pointerup', this.touchend.bind(this));\n\n        /**\n         * 对移动手势的监听\n         */\n        this.DOM.addEventListener('touchmove', this.touchmove.bind(this));\n        this.DOM.addEventListener('MSPointerMove', this.touchmove.bind(this));\n        this.DOM.addEventListener('pointermove', this.touchmove.bind(this));\n\n        /**\n         * 对移动结束的监听\n         */\n        this.DOM.addEventListener('touchcancel', this.actionOver.bind(this));\n        this.DOM.addEventListener('MSPointerCancel', this.actionOver.bind(this));\n        this.DOM.addEventListener('pointercancel', this.actionOver.bind(this));\n\n    }\n\n    actionOver(e) {\n        this.isActive = false;\n        clearTimeout(this.longTap);\n        clearTimeout(this.touchDelay);\n    }\n\n    /**\n     * 执行绑定的回调函数，并创建一个事件对象\n     * @param[string]事件名\n     * @param[function]被执行掉的函数\n     * @param[object]指向的dom\n     * @param[object]原生event对象\n     */\n    event_callback(name, e) {\n        //优先使用自定义的touches（目前是为了解决touchEnd无touches的问题）\n        var touches = e.plugTouches || e.touches,\n            touch = touches.length ? touches[0] : {},\n            newE = {\n                type: name,\n                target: this.DOM,\n                pageX: touch.pageX,\n                pageY: touch.pageY,\n                clientX: touch.clientX || 0,\n                clientY: touch.clientY || 0\n            };\n            //为swipe事件增加交互初始位置及移动距离\n        if (name.match(/^onSwipe/) && e.plugStartPosition) {\n            newE.startX = e.plugStartPosition.pageX;\n            newE.startY = e.plugStartPosition.pageY;\n            newE.moveX = newE.pageX - newE.startX;\n            newE.moveY = newE.pageY - newE.startY;\n        }\n        //执行绑定事件的回调，并记录返回值\n        // var call_result = fn.call(dom, newE);\n        let call_result = this._events[name](newE);\n        //若返回false，阻止浏览器默认事件\n        if (call_result == false) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n\n\n    /**\n     * @method 事件触发器\n     * @description 根据事件最原始被触发的target，逐级向上追溯事件绑定\n     *\n     * @param string 事件名\n     * @param object 原生事件对象\n     */\n    EMIT(eventName, e) {\n        this._events = this._events || this.props;\n        //事件堆无该事件，结束触发\n        if (!this._events[eventName]) {\n            return;\n        }\n\n        //从事件源：target开始向上冒泡\n        var target = e.target;\n        while (1) {\n            //若已经冒泡至顶，检测顶级绑定，结束冒泡\n            if (target == this.DOM || !target) {\n                let callback = this._events[eventName];\n                this.event_callback(eventName, e);\n                return;\n            }\n\n            //向上冒泡\n            target = target.parentNode;\n        }\n    }\n\n    isSingleTap() {\n        this.actionOver();\n        this.EMIT('onSingleTap', this.eventMark);\n    }\n\n    touchStart(e) {\n        if (!e.touches) return;\n        //缓存事件\n        this.eventMark = e;\n        this.x1 = e.touches[0].pageX;\n        this.y1 = e.touches[0].pageY;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.isActive = true;\n        this.touchStartTime = new Date();\n        this.EMIT('onSwipeStart', e);\n        //检测是否为长按\n        clearTimeout(this.longTap);\n\n        let _this = this;\n        this.longTap = setTimeout(function() {\n            _this.actionOver(e);\n            //断定此次事件为长按事件\n            _this.EMIT('onLongTap', e);\n        }, 500);\n    }\n\n    touchend(e) {\n        //touchend中，拿不到坐标位置信息，故使用全局保存下数据\n        e.plugStartPosition = this.eventMark.plugStartPosition;\n        e.plugTouches = this.eventMark.touches;\n        this.EMIT('onSwipeEnd', e);\n        if (!this.isActive) {\n            return;\n        }\n        var now = new Date();\n        //若未监听doubleTap，直接响应\n        if (!this._events.doubleTap || this._events.doubleTap.length == 0) {\n            this.isSingleTap();\n        } else if (now - this.lastTouchTime > 200) {\n            //延迟响应\n            this.touchDelay = setTimeout(this.isSingleTap, 190);\n        } else {\n            clearTimeout(this.touchDelay);\n            this.actionOver(e);\n            //断定此次事件为连续两次轻击事件\n            this.EMIT('onDoubleTap', eventMark);\n        }\n        this.lastTouchTime = now;\n    }\n\n    touchmove(e) {\n        if (!e.touches) return;\n        //缓存事件\n        this.eventMark = e;\n        //在原生事件基础上记录初始位置（为swipe事件增加参数传递）\n        e.plugStartPosition = {\n            pageX: this.x1,\n            pageY: this.y1\n        };\n\n        //断定此次事件为移动事件\n        this.EMIT('onSwipe', e);\n        if (!this.isActive) {\n            return;\n        }\n        this.x2 = e.touches[0].pageX;\n        this.y2 = e.touches[0].pageY;\n        if (Math.abs(this.x1 - this.x2) > 2 || Math.abs(this.y1 - this.y2) > 2) {\n            //断定此次事件为移动手势\n            var direction = this.swipeDirection(this.x1, this.x2, this.y1, this.y2);\n            this.EMIT('onSwipe' + direction, e);\n        } else {\n            //断定此次事件为轻击事件\n            this.isSingleTap();\n        }\n        this.actionOver(e);\n    }\n\n    swipeDirection(x1, x2, y1, y2) {\n        return Math.abs(x1 - x2) >= Math.abs(y1 - y2) ? (x1 - x2 > 0 ? 'Left' : 'Right') : (y1 - y2 > 0 ? 'Up' : 'Down');\n    }\n\n    render() {\n        const { children, className, style, ...others } = this.props;\n        return (\n            <div className={className} style={style}>{ children }</div>\n        )\n    }\n}","const IMG_URL =  (process.env.NODE_ENV == \"production\") ? \"//cdn.liayal.com/\" : \"//p1hx4ytu8.bkt.clouddn.com/\";\nconst IMG_QUERY = (process.env.NODE_ENV == \"production\") ? \"?imageView2/0/q/75|watermark/1/image/aHR0cDovL296cnJtdDduOS5ia3QuY2xvdWRkbi5jb20vaW1hZ2UvbG9nb193aGl0ZV9taW4ucG5n/dissolve/50/gravity/SouthEast/dx/10/dy/10|imageslim\" : \"?imageView2/0/q/75|watermark/1/image/aHR0cDovL296cnJtdDduOS5ia3QuY2xvdWRkbi5jb20vaW1hZ2UvbG9nb193aGl0ZV9taW4ucG5n/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim\";\n\nexport {IMG_URL, IMG_QUERY};","import React, { Component } from 'react';\n// import ImgLazy from '../../../components/ImgLazy';\n// import Icon from '../../../components/Icon';\n\nconst ImageItem = ({ index, onClick, photo, margin}) => {\n    return (\n        <div style={{margin, width:photo.width}} className='photo-item tc' onClick={(e) => onClick(e, {index, photo})}>\n            <img src={photo.src} width={photo.width} height={photo.height} />\n            {photo.desc ? <div className=\"photo-item-desc tc\">\n                <p>{photo.desc}</p>\n            </div> : null}\n        </div>\n    )\n};\n\nexport default ImageItem;","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport Axios from 'axios';\nimport ClassNames from 'classnames';\nimport Gallery from 'react-photo-gallery';\nimport Measure from 'react-measure';\nimport ImageGallery from '../../../components/ImageGallery';\nimport ImageItem from './imageItem.js';\nimport Icon from '../../../components/Icon';\nimport {IMG_URL, IMG_QUERY} from '../../../config/';\n\n\nexport default class Photo extends Component {\n    constructor(props) {\n        super(props)\n        const { photoes, page, allPage } = props;\n        let photoSrcs = this.addSrc(photoes);\n        this.state = {\n           photoes: photoSrcs,\n           allPage,\n           page,\n           showPhotoView: false,\n           currentPhotoIndex: 0,\n           isShowImageGallery: false,\n           imageGalleryIndex: 0,\n           isLoading: false\n        };\n    }\n\n    static defaultProps = {\n        photoes: [],\n        page: 1,\n        allPage: 0\n    };\n\n    componentWillMount() {\n        const { photoes } = this.state;\n        if (!photoes.length)\n            this.getPhotos(1);\n    }\n\n    componentDidMount() {\n        this.photoLayoutDom = ReactDOM.findDOMNode(this);\n        this.headerDom = ReactDOM.findDOMNode(this.refs.photoHeader);\n        this.blogNavDom = document.getElementById('IdNav');\n\n        this.blogNavDom.classList.add('blog-photoes-header');\n\n        window.addEventListener(\"scroll\", this.onscroll, false);\n    }\n\n    getPhotos(page) {\n        if ( this.state.isLoading ) return;\n        this.setState({\n            isLoading: true\n        });\n        Axios.get('/api/get/photoes', {params:{page}})\n            .then( res => {\n                let photoSrcs = this.addSrc(res.data.photoes);\n                this.setState(preState => {\n                    let photoes = preState.photoes.concat(photoSrcs)\n                    return {\n                        page,\n                        photoes,\n                        allPage: res.data.allPage,\n                        isLoading: false\n                    }\n                })\n            })\n    }\n\n    onscroll = (e) => {\n        e = e || window.event;\n        let _scrollTop =  window.pageYOffset\n                || (document.documentElement && document.documentElement.scrollTop)\n                || document.body.scrollTop\n                || 0;\n\n        if (_scrollTop >= (this.headerDom.offsetHeight - this.blogNavDom.offsetHeight)) {\n            this.blogNavDom.classList.remove('blog-photoes-header');\n        } else {\n            this.blogNavDom.classList.add('blog-photoes-header');\n        }\n\n        const { page, allPage } = this.state;\n        if ( (_scrollTop + document.documentElement.clientHeight) > (this.photoLayoutDom.offsetHeight - 150) ) {\n            (page < allPage) && this.getPhotos(page + 1);\n        }\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"scroll\", this.onscroll);\n        this.blogNavDom.classList.remove('blog-photoes-header');\n    }\n\n    selectPhoto = (e, data) => {\n        this.setState({\n            isShowImageGallery: true,\n            imageGalleryIndex: data.index\n        })\n    }\n\n    addSrc(allphoto) {\n        let photoes = [],\n            banner = [];\n        if (allphoto && allphoto.length) {\n            allphoto.map( photo => {\n                let newPho = {\n                    src: `${IMG_URL}${photo.key}${IMG_QUERY}`,\n                    original: `${IMG_URL}${photo.key}${IMG_QUERY}`,\n                    thumbnail: `${IMG_URL}${photo.key}${IMG_QUERY}`,\n                    width: photo.width,\n                    height: photo.height,\n                    desc: photo.desc\n                };\n\n                photoes.push(newPho);\n            })\n        }\n\n        return photoes;\n    }\n\n\n    render() {\n        const { photoes, width, showPhotoView, currentPhotoIndex, isShowImageGallery, imageGalleryIndex, isLoading } = this.state;\n        return(\n            <div className=\"blog-photo-layout \">\n                <section className=\"photo-banner header-banner\" ref='photoHeader' style={{backgroundImage: `url(${ photoes[0] && photoes[0].src || '//cdn.liayal.com/14506926.jpg'})`} } >\n                    <img src={ photoes[0] && photoes[0].src || '//cdn.liayal.com/14506926.jpg'} alt=\"\"/>\n                    <div className=\"photo-banner-info\">\n                        <p className=\"small\" ><span>图记</span></p>\n                        <h2>{photoes[0] && photoes[0].desc ? photoes[0].desc : '一起老去'}</h2>\n                    </div>\n                </section>\n                <section className=\"middle-text tc \">\n                    <h2>我以一种笨拙的方式拍照</h2>\n                    <p>摄影是一种神奇的记录：照片记录了时间、风景、人物；可回放照片时才发现，原来它还记录了按下快门时的感触、思绪、心事……也许这就是为什么明明看到的是一张风景，却会让你想起谁</p>\n                </section>\n               <Measure bounds onResize={(contentRect) => this.setState({ width: contentRect.bounds.width  })}>\n                    {\n                        ({ measureRef  }) => {\n                            let columns = 2;\n                            if (width >= 480){\n                              columns = 3;\n                            }\n                            if (width >= 1024){\n                              columns = 4;\n                            }\n                            if (width >= 1824){\n                              columns = 5;\n                            }\n                            return <div ref={measureRef} className=\"photo-list \">\n                              <Gallery photos={ photoes.slice(1) } margin={ 4 } columns={columns} ImageComponent={ImageItem} onClick={ this.selectPhoto } />\n                            </div>\n                        }\n                    }\n                </Measure>\n                { isLoading ? <p className=\"loading\">加载中...</p> : null}\n                <ImageGallery images={ photoes.slice(1) } isShow={isShowImageGallery} startIndex={imageGalleryIndex} />\n            </div>\n        )\n    }\n}"],"sourceRoot":""}