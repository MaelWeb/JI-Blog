{"version":3,"sources":["webpack:///delegated ./node_modules/fbjs/lib/emptyFunction.js from dll-reference react_54951f66","webpack:///delegated ./node_modules/fbjs/lib/invariant.js from dll-reference react_54951f66","webpack:///delegated ./node_modules/moment/moment.js from dll-reference common_54951f66","webpack:///./page/blog/Travel/index.js"],"names":["props","travels","allNum","page","allPage","state","isLoading","headerDom","ReactDOM","findDOMNode","refs","travelHeader","traveLayoutDom","blogNavDom","document","getElementById","classList","add","window","addEventListener","onscroll","length","getArticles","remove","removeEventListener","backgroundImage","banner","id","title","abstract","map","article","index","createTime","format","Component","defaultProps","e","event","_scrollTop","pageYOffset","documentElement","scrollTop","body","offsetHeight","clientHeight","_page","setState","Axios","get","params","category","then","resData","res","data","articles","preState","concat"],"mappings":"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","file":"js/9.a56457f8.js","sourcesContent":["module.exports = (__webpack_require__(/*! dll-reference react_54951f66 */ \"dll-reference react_54951f66\"))(111);","module.exports = (__webpack_require__(/*! dll-reference react_54951f66 */ \"dll-reference react_54951f66\"))(112);","module.exports = (__webpack_require__(/*! dll-reference common_54951f66 */ \"dll-reference common_54951f66\"))(45);","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Link } from 'react-router-dom';\nimport Masonry from 'react-masonry-component';\nimport Axios from 'axios';\nimport Moment from 'moment';\n\nexport default class Travel extends Component {\n    constructor(props) {\n        super(props)\n        const {travels, allNum, page, allPage } = props;\n        this.state = {\n            travels,\n            allNum,\n            page,\n            allPage,\n            isLoading: false\n        }\n    }\n\n    static defaultProps = {\n        travels: [],\n        page: 0,\n        allPage: 0\n    }\n\n    componentDidMount() {\n        this.headerDom = ReactDOM.findDOMNode(this.refs.travelHeader);\n        this.traveLayoutDom = ReactDOM.findDOMNode(this);\n        this.blogNavDom = document.getElementById('IdNav');\n\n        this.blogNavDom.classList.add('blog-travel-header');\n\n\n        window.addEventListener(\"scroll\", this.onscroll, false)\n        const {travels} = this.state;\n\n        if (!travels.length) {\n            this.getArticles(1);\n        }\n    }\n\n    onscroll = (e) => {\n        e = e || window.event;\n        let _scrollTop = window.pageYOffset\n                || (document.documentElement && document.documentElement.scrollTop)\n                || document.body.scrollTop\n                || 0;;\n        if (_scrollTop >= (this.headerDom.offsetHeight - this.blogNavDom.offsetHeight)) {\n            this.blogNavDom.classList.remove('blog-travel-header');\n        } else {\n            this.blogNavDom.classList.add('blog-travel-header');\n        }\n\n        const { page, allPage } = this.state;\n        if ( (_scrollTop + document.documentElement.clientHeight) > (this.traveLayoutDom.offsetHeight - 100) ) {\n            (page < allPage) && this.getArticles(page + 1);\n        }\n    }\n\n    componentWillUnmount() {\n        this.blogNavDom.classList.remove('blog-travel-header');\n        window.removeEventListener(\"scroll\", this.onscroll);\n    }\n\n    getArticles = (_page) => {\n        if ( this.state.isLoading ) return;\n        this.setState({\n            isLoading: true\n        });\n        Axios.get('/api/get/publish/articles', {\n            params: {\n                category: 'TRAVEL',\n                page: _page,\n            }\n        })\n        .then(res => {\n            let resData = res.data;\n            this.setState(preState => {\n                let articles = preState.travels.concat(resData.articles);\n                return {\n                    travels: articles,\n                    allNum: resData.allNum,\n                    page: resData.page,\n                    allPage: resData.allPage,\n                    isLoading: false\n                }\n            })\n        });\n    }\n\n\n    render() {\n        const { travels, isLoading } = this.state;\n        return (\n            <div className=\"blog-travel-layout \">\n                <div className=\"traverl-header header-banner\" ref='travelHeader' style={{backgroundImage: `url(${ travels[0] && travels[0].banner ? travels[0].banner : \"//cdn.liayal.com/12027196.jpg\" })`} }><Link to={`/article/${travels[0] && travels[0].id}`} >\n                    <img src={ travels[0] && travels[0].banner ? travels[0].banner : \"//cdn.liayal.com/12027196.jpg\" } alt=\"\" hidden />\n                    {travels[0] ? <div className=\"aticle-info\">\n                        <p className=\"small\"><span>游记</span></p>\n                        <h2>{ travels[0] ? travels[0].title : ''}</h2>\n                        <p className=\"sub-title\">{ travels[0] ? travels[0].abstract : '' }</p>\n                    </div>: null}\n                </Link></div>\n                <div className=\"middle-text tc \">\n                    <h2>我从旅行中获得乐趣</h2>\n                    <p>一个人，一条路，人在途中，心随景动，从起点，到尽头，也许快乐，或有时孤独，如果心在远方，只需勇敢前行，梦想自会引路，有多远，走多远，把足迹连成生命线。</p>\n                </div>\n                <Masonry className=\"travel-article-list \">\n                    { travels.length ? travels.map( (article, index) => {\n                        return index != 0 ? (\n                                <div className=\"article-item\"  key={article.id} ><Link to={`/article/${article.id}`} >\n                                    <img src={article.banner || '//cdn.liayal.com/14506926.jpg'} alt=\"\"/>\n                                    <p className=\"article-title\">{article.title} <small>{ Moment(article.createTime).format('MM月DD日')}</small></p>\n                                </Link></div>\n                        ) : null\n                    }) : null }\n                </Masonry>\n                { isLoading ? <p className=\"loading\">加载中...</p> : null}\n            </div>\n        )\n    }\n}"],"sourceRoot":""}