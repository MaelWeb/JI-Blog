(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{330:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=g(n(17)),o=g(n(4)),r=g(n(6)),a=g(n(3)),s=g(n(5)),l=n(1),u=g(l),c=g(n(9)),h=g(n(33)),d=(g(n(8)),g(n(500))),f=g(n(501)),p=g(n(505)),v=g(n(507)),m=(g(n(107)),n(92));function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){(0,o.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));b.call(n);var r=e.photoes,s=e.page,l=e.allPage,u=n.addSrc(r);return n.state={photoes:u,allPage:l,page:s,showPhotoView:!1,currentPhotoIndex:0,isShowImageGallery:!1,imageGalleryIndex:0,isLoading:!1},n}return(0,s.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){this.state.photoes.length||this.getPhotos(1)}},{key:"componentDidMount",value:function(){this.photoLayoutDom=c.default.findDOMNode(this),this.headerDom=c.default.findDOMNode(this.refs.photoHeader),this.blogNavDom=document.getElementById("IdNav"),this.blogNavDom.classList.add("blog-photoes-header"),window.addEventListener("scroll",this.onscroll,!1)}},{key:"getPhotos",value:function(e){var t=this;this.state.isLoading||(this.setState({isLoading:!0}),h.default.get("/api/get/photoes",{params:{page:e}}).then(function(n){var i=t.addSrc(n.data.photoes);t.setState(function(t){var o=t.photoes.concat(i);return{page:e,photoes:o,allPage:n.data.allPage,isLoading:!1}})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onscroll),this.blogNavDom.classList.remove("blog-photoes-header")}},{key:"addSrc",value:function(e){var t=[];return e&&e.length&&e.map(function(e){var n={src:""+m.IMG_URL+e.key+m.IMG_QUERY,original:""+m.IMG_URL+e.key+m.IMG_QUERY,thumbnail:""+m.IMG_URL+e.key+m.IMG_QUERY,width:e.width,height:e.height,desc:e.desc};t.push(n)}),t}},{key:"render",value:function(){var e=this,t=this.state,n=t.photoes,i=t.width,o=(t.showPhotoView,t.currentPhotoIndex,t.isShowImageGallery),r=t.imageGalleryIndex,a=t.isLoading;return u.default.createElement("div",{className:"blog-photo-layout "},u.default.createElement("section",{className:"photo-banner header-banner",ref:"photoHeader",style:{backgroundImage:"url("+(n[0]&&n[0].src||"//cdn.liayal.com/14506926.jpg")+")"}},u.default.createElement("img",{src:n[0]&&n[0].src||"//cdn.liayal.com/14506926.jpg",alt:""}),u.default.createElement("div",{className:"photo-banner-info"},u.default.createElement("p",{className:"small"},u.default.createElement("span",null,"图记")),u.default.createElement("h2",null,n[0]&&n[0].desc?n[0].desc:"一起老去"))),u.default.createElement("section",{className:"middle-text tc "},u.default.createElement("h2",null,"我以一种笨拙的方式拍照"),u.default.createElement("p",null,"摄影是一种神奇的记录：照片记录了时间、风景、人物；可回放照片时才发现，原来它还记录了按下快门时的感触、思绪、心事……也许这就是为什么明明看到的是一张风景，却会让你想起谁")),u.default.createElement(f.default,{bounds:!0,onResize:function(t){return e.setState({width:t.bounds.width})}},function(t){var o=t.measureRef,r=2;return i>=480&&(r=3),i>=1024&&(r=4),i>=1824&&(r=5),u.default.createElement("div",{ref:o,className:"photo-list "},u.default.createElement(d.default,{photos:n.slice(1),margin:4,columns:r,ImageComponent:v.default,onClick:e.selectPhoto}))}),a?u.default.createElement("p",{className:"loading"},"加载中..."):null,u.default.createElement(p.default,{images:n.slice(1),isShow:o,startIndex:r}))}}]),t}(l.Component);y.defaultProps={photoes:[],page:1,allPage:0};var b=function(){var e=this;this.onscroll=function(t){t=t||window.event;var n=window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop||0;n>=e.headerDom.offsetHeight-e.blogNavDom.offsetHeight?e.blogNavDom.classList.remove("blog-photoes-header"):e.blogNavDom.classList.add("blog-photoes-header");var i=e.state,o=i.page,r=i.allPage;n+document.documentElement.clientHeight>e.photoLayoutDom.offsetHeight-150&&o<r&&e.getPhotos(o+1)},this.selectPhoto=function(t,n){e.setState({isShowImageGallery:!0,imageGalleryIndex:n.index})}};t.default=y},496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),a=(c(r),c(n(0))),s=c(n(167)),l=c(n(503)),u=c(n(504));function c(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){return function(t){var n,c;return c=n=function(n){function a(){var t,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,r=Array(o),s=0;s<o;s++)r[s]=arguments[s];return n=i=h(this,(t=a.__proto__||Object.getPrototypeOf(a)).call.apply(t,[this].concat(r))),i.state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},i.measure=function(t){var n=(0,u.default)(i._node,e||(0,l.default)(i.props));t&&(n.entry=t[0].contentRect),i.setState({contentRect:n}),"function"==typeof i.props.onResize&&i.props.onResize(n)},i._handleRef=function(e){i._resizeObserver&&(e?i._resizeObserver.observe(e):i._resizeObserver.disconnect(i._node)),i._node=e,"function"==typeof i.props.innerRef&&i.props.innerRef(e)},h(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r.Component),o(a,[{key:"componentWillMount",value:function(){this._resizeObserver=new s.default(this.measure)}},{key:"componentWillUnmount",value:function(){this._resizeObserver&&this._node&&this._resizeObserver.disconnect(this._node),this._resizeObserver=null}},{key:"render",value:function(){var e=this.props,n=(e.innerRef,e.onResize,function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["innerRef","onResize"]));return(0,r.createElement)(t,i({},n,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))}}]),a}(),n.propTypes={client:a.default.bool,offset:a.default.bool,scroll:a.default.bool,bounds:a.default.bool,margin:a.default.bool,innerRef:a.default.func,onResize:a.default.func},c}}},500:function(e,t,n){"use strict";n.r(t);var i=n(1),o=n.n(i),r=n(0),a=n.n(r),s=n(167),l=(function(){function e(e){this.value=e}function t(t){var n,i;function o(n,i){try{var a=t[n](i),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){o("next",e)},function(e){o("throw",e)}):r(a.done?"return":"normal",a.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?o(n.key,n.arg):i=null}this._invoke=function(e,t){return new Promise(function(r,a){var s={key:e,arg:t,resolve:r,reject:a,next:null};i?i=i.next=s:(n=i=s,o(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},d=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},f={cursor:"pointer"},p=function(e){var t=e.index,n=e.onClick,i=e.photo,r=e.margin,a=e.direction,s=e.top,l=e.left,u={margin:r};"column"===a&&(u.position="absolute",u.left=l,u.top=s);return o.a.createElement("img",c({style:n?c({},u,f):u},i,{onClick:n?function(e){n(e,{photo:i,index:t})}:null}))},v=a.a.shape({src:a.a.string.isRequired,width:a.a.number.isRequired,height:a.a.number.isRequired,alt:a.a.string,title:a.a.string,srcSet:a.a.oneOfType([a.a.string,a.a.array]),sizes:a.a.oneOfType([a.a.string,a.a.array])});function m(e,t){return t||(t=0),Number(Math.round(e+"e"+t)+"e-"+t)}function g(e){return m(e.width/e.height,2)}p.propTypes={index:a.a.number.isRequired,onClick:a.a.func,photo:v.isRequired,margin:a.a.number,top:function(e){if("column"===e.direction&&"number"!=typeof e.top)return new Error("top is a required number when direction is set to `column`")},left:function(e){if("column"===e.direction&&"number"!=typeof e.left)return new Error("left is a required number when direction is set to `column`")},direction:a.a.string};var y=function(e){function t(){var e,n,i;l(this,t);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=i=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),i.state={containerWidth:0},i.handleClick=function(e,t){var n=t.index,o=i.props,r=o.photos;(0,o.onClick)(e,{index:n,photo:r[n],previous:r[n-1]||null,next:r[n+1]||null})},h(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.a.Component),u(t,[{key:"componentDidMount",value:function(){var e=this;this.observer=new s.default(function(t){var n=t[0].contentRect.width;e.state.containerWidth!==n&&e.setState({containerWidth:Math.floor(n)})}),this.observer.observe(this._gallery)}},{key:"componentWillUnmount",value:function(){this.observer.disconnect()}},{key:"render",value:function(){var e=this,t=this.state.containerWidth;if(!t)return o.a.createElement("div",{ref:function(t){return e._gallery=t}});var n=this.props.ImageComponent,i=void 0===n?p:n,r=this.props,a=r.margin,s=r.onClick,l=r.direction,u=this.props.columns;void 0===u&&(u=1,t>=500&&(u=2),t>=900&&(u=3),t>=1500&&(u=4));var h=this.props.photos,f=t-1,v=void 0,y=void 0;return"row"===l&&(v={display:"flex",flexWrap:"wrap",flexDirection:"row"},y=function(e){var t=e.photos,n=e.columns,i=e.width,o=e.margin;if(!i)return[];var r=t.reduce(function(e,t,i){var o=Math.floor(i/n);return e[o]=e[o]?[].concat(d(e[o]),[t]):[t],e},[]),a=[];return r.map(function(e,s){var l=e.reduce(function(e,t){return e+g(t)},0),u=i-e.length*(2*o);s!==r.length-1&&a.push(l);var h=e.length===n?u/l:t.length<n?u/l*(e.length/n):u/(a.reduce(function(e,t){return e+t},0)/(r.length-1));return e.map(function(e){return c({},e,{height:m(h,1),width:m(h*g(e),1)})})}).reduce(function(e,t){return[].concat(d(e),d(t))},[])}({width:f,columns:u,margin:a,photos:h})),"column"===l&&(v={position:"relative"},y=function(e){for(var t=e.photos,n=e.columns,i=e.width,o=e.margin,r=(i-2*o*n)/n,a=t.map(function(e){var t=e.height/e.width*r;return c({},e,{width:m(r,1),height:m(t,1)})}),s=[],l=[],u=0;u<n;u++)s[u]=m(u*(r+2*o),1),l[u]=0;return a.map(function(e){var t=l.reduce(function(e,t,n){return e=t<l[e]?n:e},0);e.top=l[t],e.left=s[t],l[t]=l[t]+e.height+2*o;var n=l.reduce(function(e,t,n){return e=t>l[e]?n:e},0);return e.containerHeight=l[n],e})}({width:f,columns:u,margin:a,photos:h}),v.height=y[y.length-1].containerHeight),o.a.createElement("div",{className:"react-photo-gallery--gallery"},o.a.createElement("div",{ref:function(t){return e._gallery=t},style:v},y.map(function(t,n){var r=t.left,u=t.top,c=(t.containerHeight,function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(t,["left","top","containerHeight"]));return o.a.createElement(i,{key:t.key||t.src,margin:a,index:n,photo:c,direction:l,left:r,top:u,onClick:s?e.handleClick:null})})))}}]),t}();y.propTypes={photos:a.a.arrayOf(v).isRequired,direction:a.a.string,onClick:a.a.func,columns:a.a.number,margin:a.a.number,ImageComponent:a.a.func},y.defaultProps={margin:2,direction:"row"},t.default=y},501:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withContentRect=t.default=void 0;var i=r(n(502)),o=r(n(496));function r(e){return e&&e.__esModule?e:{default:e}}t.default=i.default,t.withContentRect=o.default},502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o(n(1));var i=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var r=(0,o(n(496)).default)()(function(e){var t=e.measure,n=e.measureRef,i=e.contentRect;return(0,e.children)({measure:t,measureRef:n,contentRect:i})});r.displayName="Measure",r.propTypes.children=i.default.func,t.default=r},503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];return i.forEach(function(n){e[n]&&t.push(n)}),t};var i=["client","offset","scroll","bounds","margin"]},504:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={};if(t.indexOf("client")>-1&&(n.client={top:e.clientTop,left:e.clientLeft,width:e.clientWidth,height:e.clientHeight}),t.indexOf("offset")>-1&&(n.offset={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}),t.indexOf("scroll")>-1&&(n.scroll={top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}),t.indexOf("bounds")>-1){var i=e.getBoundingClientRect();n.bounds={top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height}}if(t.indexOf("margin")>-1){var o=getComputedStyle(e);n.margin={top:parseInt(o.marginTop),right:parseInt(o.marginRight),bottom:parseInt(o.marginBottom),left:parseInt(o.marginLeft)}}return n}},505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(n(53)),o=v(n(17)),r=v(n(4)),a=v(n(6)),s=v(n(3)),l=v(n(5)),u=n(1),c=v(u),h=v(n(9)),d=v(n(506)),f=v(n(107)),p=v(n(0));v(n(8));function v(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,r.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.preventDefault=function(e){e.preventDefault()},n.close=function(){n.setState({isShow:!1})},n._onSliding=function(){var e=n.state.isTransitioning;window.setTimeout(function(){e&&n.setState({isTransitioning:!e})},n.props.slideDuration)},n.slideToIndex=function(e,t){var i=n.state,o=i.currentIndex;if(!i.isTransitioning){var r=n.props.images.length-1,a=e;e<0?a=r:e>r&&(a=0),n.setState({previousIndex:o,currentIndex:a,isTransitioning:a!==o,offsetPercentage:0,style:{transition:"all "+n.props.slideDuration+"ms ease-out"}},n._onSliding)}},n.slideLeft=function(e){n.slideToIndex(n.state.currentIndex-1,e)},n.slideRight=function(e){n.slideToIndex(n.state.currentIndex+1,e)},n._getSlideStyle=function(e){var t=n.state,i=t.currentIndex,o=t.offsetPercentage,r=n.props.images,a=-100*i,s=r.length-1,l=a+100*e+o;r.length>2&&(0===i&&e===s?l=-100+o:i===s&&0===e&&(l=100+o)),2===r.length&&(l=n._getTranslateXForTwoSlide(e));var u="translate("+l+"%, 0)";return{WebkitTransform:u,MozTransform:u,msTransform:u,OTransform:u,transform:u}},n.state={currentIndex:e.startIndex,offsetPercentage:0,isShow:!1},n}return(0,l.default)(t,e),(0,a.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.startIndex>=e.images.length?this.setState({currentIndex:0,isShow:e.isShow}):this.setState({currentIndex:e.startIndex,isShow:e.isShow})}},{key:"componentDidMount",value:function(){h.default.findDOMNode(this)&&(this.dom=h.default.findDOMNode(this),this.dom.addEventListener("touchmove",this.preventDefault))}},{key:"_shouldPushSlideOnInfiniteMode",value:function(e){return!this._slideIsTransitioning(e)||this._ignoreIsTransitioning()&&!this._isFirstOrLastSlide(e)}},{key:"_slideIsTransitioning",value:function(e){var t=this.state,n=t.isTransitioning,i=t.previousIndex,o=t.currentIndex;return n&&!(e===i||e===o)}},{key:"_isFirstOrLastSlide",value:function(e){return e===this.props.images.length-1||0===e}},{key:"_ignoreIsTransitioning",value:function(){var e=this.state,t=e.previousIndex,n=e.currentIndex,i=this.props.images.length-1;return Math.abs(t-n)>1&&!(0===t&&n===i)&&!(t===i&&0===n)}},{key:"getSlides",value:function(){var e=this,t=[],n=this.props.images;this.state.currentIndex;return n.length&&n.map(function(n,o){if(e._shouldPushSlideOnInfiniteMode(o)){var r=e._getSlideStyle(o);t.push(c.default.createElement("div",{className:"image-gallery-slide",style:(0,i.default)(r,e.state.style),key:o},c.default.createElement("img",{src:n.src})))}}),t}},{key:"render",value:function(){var e=this.state,t=e.isShow,n=e.currentIndex,i=this.props.images;return c.default.createElement("div",{className:"mael-image-gallery",hidden:!t},c.default.createElement(f.default,{type:"close",onClick:this.close}),c.default.createElement(d.default,{className:"image-gallery-swipe",onSwipeRight:this.slideLeft,onSwipeLeft:this.slideRight},c.default.createElement("div",{className:"image-gallery-arrow arrow-left",onClick:this.slideLeft},c.default.createElement(f.default,{type:"bold-arrow-left"})),c.default.createElement("div",{className:"image-gallery-slides"},this.getSlides()),c.default.createElement("div",{className:"image-gallery-arrow arrow-right",onClick:this.slideRight},c.default.createElement(f.default,{type:"bold-arrow-right"}))),c.default.createElement("p",{className:"image-index tc"},n+1,"/",i.length))}}]),t}(u.Component);m.propTypes={startIndex:p.default.number,images:p.default.array,slideDuration:p.default.number},m.defaultProps={startIndex:0,images:[],slideDuration:450},t.default=m},506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(n(10)),o=h(n(17)),r=h(n(4)),a=h(n(6)),s=h(n(3)),l=h(n(5)),u=h(n(1)),c=n(9);function h(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){(0,r.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.touchStartTime=0,n.lastTouchTime=0,n.x1,n.y1,n.x2,n.y2,n.touchDelay,n.longTap,n.isActive=!1,n.eventMark=null,n._events={},n}return(0,l.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){this.DOM=(0,c.findDOMNode)(this),this._events=this.props,this.eventListener()}},{key:"eventListener",value:function(){this.DOM.addEventListener("touchstart",this.touchStart.bind(this)),this.DOM.addEventListener("MSPointerDown",this.touchStart.bind(this)),this.DOM.addEventListener("pointerdown",this.touchStart.bind(this)),this.DOM.addEventListener("touchend",this.touchend.bind(this)),this.DOM.addEventListener("MSPointerUp",this.touchend.bind(this)),this.DOM.addEventListener("pointerup",this.touchend.bind(this)),this.DOM.addEventListener("touchmove",this.touchmove.bind(this)),this.DOM.addEventListener("MSPointerMove",this.touchmove.bind(this)),this.DOM.addEventListener("pointermove",this.touchmove.bind(this)),this.DOM.addEventListener("touchcancel",this.actionOver.bind(this)),this.DOM.addEventListener("MSPointerCancel",this.actionOver.bind(this)),this.DOM.addEventListener("pointercancel",this.actionOver.bind(this))}},{key:"actionOver",value:function(e){this.isActive=!1,clearTimeout(this.longTap),clearTimeout(this.touchDelay)}},{key:"event_callback",value:function(e,t){var n=t.plugTouches||t.touches,i=n.length?n[0]:{},o={type:e,target:this.DOM,pageX:i.pageX,pageY:i.pageY,clientX:i.clientX||0,clientY:i.clientY||0};e.match(/^onSwipe/)&&t.plugStartPosition&&(o.startX=t.plugStartPosition.pageX,o.startY=t.plugStartPosition.pageY,o.moveX=o.pageX-o.startX,o.moveY=o.pageY-o.startY),0==this._events[e](o)&&(t.preventDefault(),t.stopPropagation())}},{key:"EMIT",value:function(e,t){if(this._events=this._events||this.props,this._events[e])for(var n=t.target;;){if(n==this.DOM||!n){this._events[e];return void this.event_callback(e,t)}n=n.parentNode}}},{key:"isSingleTap",value:function(){this.actionOver(),this.EMIT("onSingleTap",this.eventMark)}},{key:"touchStart",value:function(e){if(e.touches){this.eventMark=e,this.x1=e.touches[0].pageX,this.y1=e.touches[0].pageY,this.x2=0,this.y2=0,this.isActive=!0,this.touchStartTime=new Date,this.EMIT("onSwipeStart",e),clearTimeout(this.longTap);var t=this;this.longTap=setTimeout(function(){t.actionOver(e),t.EMIT("onLongTap",e)},500)}}},{key:"touchend",value:function(e){if(e.plugStartPosition=this.eventMark.plugStartPosition,e.plugTouches=this.eventMark.touches,this.EMIT("onSwipeEnd",e),this.isActive){var t=new Date;this._events.doubleTap&&0!=this._events.doubleTap.length?t-this.lastTouchTime>200?this.touchDelay=setTimeout(this.isSingleTap,190):(clearTimeout(this.touchDelay),this.actionOver(e),this.EMIT("onDoubleTap",eventMark)):this.isSingleTap(),this.lastTouchTime=t}}},{key:"touchmove",value:function(e){if(e.touches&&(this.eventMark=e,e.plugStartPosition={pageX:this.x1,pageY:this.y1},this.EMIT("onSwipe",e),this.isActive)){if(this.x2=e.touches[0].pageX,this.y2=e.touches[0].pageY,Math.abs(this.x1-this.x2)>2||Math.abs(this.y1-this.y2)>2){var t=this.swipeDirection(this.x1,this.x2,this.y1,this.y2);this.EMIT("onSwipe"+t,e)}else this.isSingleTap();this.actionOver(e)}}},{key:"swipeDirection",value:function(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.style;(0,i.default)(e,["children","className","style"]);return u.default.createElement("div",{className:n,style:o},t)}}]),t}(u.default.Component);t.default=d},507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(1),r=(i=o)&&i.__esModule?i:{default:i};t.default=function(e){var t=e.index,n=e.onClick,i=e.photo,o=e.margin;return r.default.createElement("div",{style:{margin:o,width:i.width},className:"photo-item tc",onClick:function(e){return n(e,{index:t,photo:i})}},r.default.createElement("img",{src:i.src,width:i.width,height:i.height}),i.desc?r.default.createElement("div",{className:"photo-item-desc tc"},r.default.createElement("p",null,i.desc)):null)}},92:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.IMG_URL="//cdn.liayal.com/",t.IMG_QUERY="?imageView2/0/q/75|watermark/1/image/aHR0cDovL296cnJtdDduOS5ia3QuY2xvdWRkbi5jb20vaW1hZ2UvbG9nb193aGl0ZV9taW4ucG5n/dissolve/50/gravity/SouthEast/dx/10/dy/10|imageslim"}}]);