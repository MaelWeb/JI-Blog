(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{108:function(e,t){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(a=window)}e.exports=a},158:function(e,t,a){e.exports=a(28)(61)},219:function(e,t,a){e.exports=a(34)(45)},221:function(e,t,a){e.exports=a(28)(112)},332:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=g(a(17)),n=g(a(4)),r=g(a(6)),o=g(a(3)),i=g(a(5)),s=a(1),c=g(s),d=g(a(9)),u=a(31),m=g(a(117)),f=g(a(33)),v=g(a(219));function g(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,n.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));p.call(a);var r=e.travels,i=e.allNum,s=e.page,c=e.allPage;return a.state={travels:r,allNum:i,page:s,allPage:c,isLoading:!1},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.headerDom=d.default.findDOMNode(this.refs.travelHeader),this.traveLayoutDom=d.default.findDOMNode(this),this.blogNavDom=document.getElementById("IdNav"),this.blogNavDom.classList.add("blog-travel-header"),window.addEventListener("scroll",this.onscroll,!1),this.state.travels.length||this.getArticles(1)}},{key:"componentWillUnmount",value:function(){this.blogNavDom.classList.remove("blog-travel-header"),window.removeEventListener("scroll",this.onscroll)}},{key:"render",value:function(){var e=this.state,t=e.travels,a=e.isLoading;return c.default.createElement("div",{className:"blog-travel-layout "},c.default.createElement("div",{className:"traverl-header header-banner",ref:"travelHeader",style:{backgroundImage:"url("+(t[0]&&t[0].banner?t[0].banner:"//cdn.liayal.com/12027196.jpg")+")"}},c.default.createElement(u.Link,{to:"/article/"+(t[0]&&t[0].id)},c.default.createElement("img",{src:t[0]&&t[0].banner?t[0].banner:"//cdn.liayal.com/12027196.jpg",alt:"",hidden:!0}),t[0]?c.default.createElement("div",{className:"aticle-info"},c.default.createElement("p",{className:"small"},c.default.createElement("span",null,"游记")),c.default.createElement("h2",null,t[0]?t[0].title:""),c.default.createElement("p",{className:"sub-title"},t[0]?t[0].abstract:"")):null)),c.default.createElement("div",{className:"middle-text tc "},c.default.createElement("h2",null,"我从旅行中获得乐趣"),c.default.createElement("p",null,"一个人，一条路，人在途中，心随景动，从起点，到尽头，也许快乐，或有时孤独，如果心在远方，只需勇敢前行，梦想自会引路，有多远，走多远，把足迹连成生命线。")),c.default.createElement(m.default,{className:"travel-article-list "},t.length?t.map(function(e,t){return 0!=t?c.default.createElement("div",{className:"article-item",key:e.id},c.default.createElement(u.Link,{to:"/article/"+e.id},c.default.createElement("img",{src:e.banner||"//cdn.liayal.com/14506926.jpg",alt:""}),c.default.createElement("p",{className:"article-title"},e.title," ",c.default.createElement("small",null,(0,v.default)(e.createTime).format("MM月DD日"))))):null}):null),a?c.default.createElement("p",{className:"loading"},"加载中..."):null)}}]),t}(s.Component);h.defaultProps={travels:[],page:0,allPage:0};var p=function(){var e=this;this.onscroll=function(t){t=t||window.event;var a=window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop||0;a>=e.headerDom.offsetHeight-e.blogNavDom.offsetHeight?e.blogNavDom.classList.remove("blog-travel-header"):e.blogNavDom.classList.add("blog-travel-header");var l=e.state,n=l.page,r=l.allPage;a+document.documentElement.clientHeight>e.traveLayoutDom.offsetHeight-100&&n<r&&e.getArticles(n+1)},this.getArticles=function(t){e.state.isLoading||(e.setState({isLoading:!0}),f.default.get("/api/get/publish/articles",{params:{category:"TRAVEL",page:t}}).then(function(t){var a=t.data;e.setState(function(e){return{travels:e.travels.concat(a.articles),allNum:a.allNum,page:a.page,allPage:a.allPage,isLoading:!1}})}))}};t.default=h}}]);