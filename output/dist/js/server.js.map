{"version":3,"sources":["webpack:///webpack/bootstrap 4ed439d72185bea17575","webpack:///external \"babel-runtime/regenerator\"","webpack:///external \"babel-runtime/helpers/asyncToGenerator\"","webpack:///external \"react\"","webpack:///external \"mongoose\"","webpack:///./config/index.js","webpack:///external \"babel-runtime/helpers/extends\"","webpack:///external \"babel-runtime/core-js/object/get-prototype-of\"","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///external \"babel-runtime/helpers/possibleConstructorReturn\"","webpack:///external \"babel-runtime/helpers/inherits\"","webpack:///external \"webpack\"","webpack:///external \"koa-router\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"path\"","webpack:///external \"fs\"","webpack:///./middleware/verify.js","webpack:///external \"jsonwebtoken\"","webpack:///external \"md5\"","webpack:///./controllers/article_ctr.js","webpack:///external \"moment\"","webpack:///./controllers/tags_ctr.js","webpack:///./controllers/qiniu_ctrl.js","webpack:///./controllers/photo_ctrl.js","webpack:///external \"babel-runtime/helpers/objectWithoutProperties\"","webpack:///external \"react-router-dom\"","webpack:///external \"axios\"","webpack:///external \"classnames\"","webpack:///./index.js","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-static\"","webpack:///external \"koa-views\"","webpack:///external \"koa-webpack-middleware\"","webpack:///../build/webpack.dev.config.js","webpack:///external \"babel-runtime/core-js/json/stringify\"","webpack:///external \"webpack-merge\"","webpack:///../build/webpack.base.config.js","webpack:///external \"extract-text-webpack-plugin\"","webpack:///external \"jquery\"","webpack:///./router/index.js","webpack:///./router/api.js","webpack:///./controllers/user_ctr.js","webpack:///./models/user_model.js","webpack:///./models/article_model.js","webpack:///./controllers/common_ctr.js","webpack:///external \"superagent\"","webpack:///external \"cheerio\"","webpack:///./models/tag_model.js","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///external \"qiniu\"","webpack:///external \"busboy\"","webpack:///external \"util\"","webpack:///./models/photo_model.js","webpack:///./router/page.js","webpack:///external \"react-dom/server\"","webpack:///external \"react-router\"","webpack:///../web/page/blog/App/index.js","webpack:///external \"babel-runtime/core-js/object/create\"","webpack:///../web/page/blog/Articles/index.js","webpack:///../web/page/blog/Article/index.js","webpack:///../web/page/blog/Header/index.js","webpack:///../web/components/Icon/index.js","webpack:///external \"babel-runtime/helpers/defineProperty\"","webpack:///external \"prop-types\"","webpack:///../web/page/blog/Footer/index.js","webpack:///../build/webpack.server.config.js","webpack:///external \"webpack-node-externals\""],"names":["config","app","port","process","env","PORT","baseApi","mongodb","url","jwt","secret","mongodbSecret","user","pass","admin","pwd","database","DATABASE","USERNAME","PASSWORD","HOST","upload","ACCESS_KEY","SECRET_KEY","ctx","next","token","cookies","get","throw","tokenContent","verify","name","console","log","apiVerify","request","adminReg","loginReg","test","redirect","pageVerify","formData","body","createTime","Date","lastEditTime","title","code","message","content","htmlContent","article","save","catch","createResult","populate","path","err","result","createArticle","tag","query","page","size","skip","articles","allPage","allNum","find","sort","limit","count","_tag","split","tags","Math","ceil","getAllArticles","length","publish","tagArr","success","getAllPublishArticles","id","params","postData","findByIdAndUpdate","$set","modifyArticle","findById","getArticle","findByIdAndRemove","deleteArticle","publishArticle","notPublishArticle","tagName","findOne","newTag","createTag","getAllTags","req","res","busboy","headers","buf","Buffer","alloc","nowTime","conf","Config","zone","Zone_z0","useCdnDomain","formUploader","form_up","FormUploader","putExtra","PutExtra","resolve","reject","on","fieldname","file","filename","encoding","mimetype","data","concat","time","key","prefix","UPLOAD_TOKEN","getToken","bucket","put","respErr","respBody","respInfo","statusCode","val","fieldnameTruncated","valTruncated","inspect","pipe","uploadToQiniu","fileUpload","defaultOpts","options","mac","auth","digest","Mac","bucketManager","rs","BucketManager","listPrefix","nextMarker","marker","commonPrefixes","getPhotoes","_bucket","scope","expires","putPolicy","PutPolicy","uploadToken","create","photoes","addPhoto","App","compile","Promise","connect","connection","error","use","watchOptions","aggregateTimeout","poll","publicPath","output","stats","colors","join","__dirname","extension","map","html","routes","allowedMethods","pageNotFound","listen","response","status","render","merge","require","webpack","baseWebpackConfig","serverWebpackConfig","module","exports","devtool","plugins","DefinePlugin","NODE_ENV","optimize","OccurrenceOrderPlugin","HotModuleReplacementPlugin","NoEmitOnErrorsPlugin","ExtractTextPlugin","sourcePath","outputPath","context","entry","blog","vendor","rules","exclude","loader","presets","cacheDirectory","extract","fallback","extensions","modules","alias","Components","CommonsChunkPlugin","names","minChunks","Infinity","Router","_Api","session","getArticles","delete","post","$or","username","userName","email","exec","existOne","newUser","password","toUpperCase","avatar","then","singUp","exp","floor","now","sign","uid","_id","set","maxAge","httpOnly","overwrite","signIn","Schema","UserSchema","String","model","locale","ArticleSchema","abstract","type","Types","ObjectId","ref","Boolean","default","getters","virtuals","v","format","$","load","text","each","idx","element","$element","push","imgUrl","attr","getOneContent","TagSchema","toJSON","toObject","PhotoSchema","desc","like","Number","ServerData","renderToString","_Page","curTagId","FadingRoute","Component","component","other","props","getQuery","search","window","location","ret","trim","replace","forEach","param","parts","shift","undefined","decodeURIComponent","state","minHeight","setState","document","documentElement","clientHeight","InitData","Articles","tagid","resData","pathname","index","Article","Header","Icon","className","others","cls","propTypes","string","defaultProps","Footer","nodeExternals","target","node","__filename","externals"],"mappings":"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","file":"js/server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 28);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4ed439d72185bea17575","module.exports = require(\"babel-runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/regenerator\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/asyncToGenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/asyncToGenerator\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 3\n// module chunks = 0","import fs from 'fs'\nlet config = {\n    app: {\n        port: process.env.PORT || 8889,\n        baseApi: '/api'\n    },\n    mongodb: {\n        url: 'mongodb://localhost:27017/koa-blog'\n    },\n    jwt: {\n        secret: 'me' //默认\n    },\n    mongodbSecret: { //mongodb用户和密码\n        user: '',\n        pass: ''\n    },\n    admin: { //后台初始化的用户名密码\n        user: 'admin',\n        pwd: 'password'\n    },\n    port: 8080,\n    database: {\n        DATABASE: 'node_koa_test',\n        USERNAME: 'root',\n        PASSWORD: \"1123\",\n        PORT: 3306,\n        HOST: 'localhost'\n    },\n    upload: {\n        ACCESS_KEY: 'ARA9LIvdx3JFZyADmwohmEMyjVLmNSIjVxgpzIA4',\n        SECRET_KEY: 'aK19LEtOfStwsvn501Pl_h_wTqkVFnbzxlI5FNU7'\n    }\n}\n// 可在private.js定义自己私有的配置\n// module.exports = {\n//   mongodbSecret: {\n//     user: '',\n//     pass: ''\n//   },\n//   jwt: {\n//     secret: 'xxx'\n//   },\n//   admin: {\n//       user: '',\n//       pwd: ''\n//   }\n// }\n// if (fs.existsSync(__dirname + '/private.js')) {\n//     console.log(111);\n//     config = Object.assign(config, require('./private.js'));\n// }\nexport default config;\n\n\n// WEBPACK FOOTER //\n// ./config/index.js","module.exports = require(\"babel-runtime/helpers/extends\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/extends\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/get-prototype-of\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/classCallCheck\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/createClass\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/createClass\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/possibleConstructorReturn\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/inherits\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/inherits\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"webpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/promise\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 15\n// module chunks = 0","import jwt from 'jsonwebtoken';\nimport config from '../config/';\nexport async function apiVerify(ctx, next) {\n    const token = ctx.cookies.get('access_token');\n    if (token === '') {\n        ctx.throw(401, 'no token detected in http header \\'Authorization\\'');\n    }\n    let tokenContent;\n    try {\n        tokenContent = await jwt.verify(token, config.jwt.secret);\n    } catch (err) {\n        if ('TokenExpiredError' === err.name) {\n            ctx.throw(401, 'token expired,请及时本地保存数据！');\n        }\n        ctx.throw(401, 'invalid token');\n    }\n    console.log(\"鉴权成功\");\n    await next();\n}\n\nexport async function pageVerify(ctx, next) {\n    const token = ctx.cookies.get('access_token'),\n        url = ctx.request.url,\n        adminReg = /admin/g,\n        loginReg = /admin\\/login|admin\\/registe/g;\n\n    if (adminReg.test(url) && !loginReg.test(url)) {\n\n        if (token === '') {\n            ctx.redirect('/admin/login');\n        }\n\n        let tokenContent;\n        try {\n            tokenContent = await jwt.verify(token, config.jwt.secret);\n        } catch (err) {\n            ctx.redirect('/admin/login');\n        }\n    }\n\n    await next();\n}\n\n\n// WEBPACK FOOTER //\n// ./middleware/verify.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"md5\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"md5\"\n// module id = 18\n// module chunks = 0","import Article from '../models/article_model';\n\nexport async function createArticle(ctx) {\n    const formData = ctx.request.body;\n    const createTime = new Date();\n    const lastEditTime = new Date();\n    if (formData.title == '') {\n        return ctx.body = {\n            code: 400,\n            message: \"标题不能为空\"\n        }\n    }\n    if (formData.content == '') {\n        return ctx.body = {\n            code: 400,\n            message: \"文章内容不能为空\"\n        }\n    }\n    if (formData.htmlContent == '') {\n        return ctx.body = {\n            code: 400,\n            message: \"HTML文本为空\"\n        };\n    }\n    const article = new Article({\n        ...formData,\n        createTime,\n        lastEditTime\n    });\n    let createResult = await article.save().catch(err => {\n        ctx.throw(500, '服务器内部错误')\n    });\n    await Article.populate(createResult, { path: 'tags' }, function(err, result) {\n        createResult = result;\n        // console.log(result)\n\n    });\n\n    ctx.body = {\n        code: 200,\n        article: createResult,\n        message: \"文章保存成功\"\n    }\n\n}\n\nexport async function getAllArticles(ctx) {\n    const tag = ctx.query.tag;\n    const page = +ctx.query.page || 0;\n    const size = +ctx.query.size || 10;\n    let skip = 0;\n    let articles;\n    let allPage;\n    let allNum;\n\n    if (page !== 0) {\n        skip = size * (page - 1)\n    }\n\n    if (!tag) {\n        articles = await Article.find({}, {title: 1})\n            .populate(\"tags\")\n            .sort({ createTime: -1 })\n            .limit(size)\n            .skip(skip).catch(err => {\n                ctx.throw(500, '服务器内部错误')\n            });\n        allNum = await Article.count().catch(err => {\n            this.throw(500, '服务器内部错误')\n        })\n    } else {\n        // console.log(tagArr)\n        let _tag = tag.split(';');\n        articles = await Article.find({\n                tags: { \"$in\": _tag },\n            })\n            .populate(\"tags\")\n            .sort({ createTime: -1 })\n            .limit(size)\n            .skip(skip).catch(err => {\n                ctx.throw(500, '服务器内部错误')\n            });\n        allNum = await Article.find({\n            tags: { \"$in\": _tag }\n        }).count().catch(err => {\n            ctx.throw(500, '服务器内部错误')\n        })\n    }\n    allPage = Math.ceil(allNum / size);\n\n    ctx.body = {\n        code: 200,\n        articles,\n        allPage: allPage\n    }\n\n    return { articles, allPage};\n}\n\nexport async function getAllPublishArticles(ctx) {\n    const tag = ctx.query.tag;\n    const page = +ctx.query.page;\n    const limit = +ctx.query.limit || 10;\n    let skip = 0;\n    let articles;\n    let allPage;\n    let allNum;\n\n    if (tag && (typeof tag != 'array'))\n        return ctx.body = {\n            code: 501,\n            message: '参数错误'\n        };\n\n    if (page !== 0) {\n        skip = limit * (page - 1)\n    }\n\n    if (!tag || tag.length) {\n        articles = await Article.find({\n                publish: true\n            })\n            .populate(\"tags\")\n            .sort({ createTime: -1 })\n            .limit(limit)\n            .skip(skip).catch(err => {\n                ctx.throw(500, '服务器内部错误')\n            });\n        allNum = await Article.find({\n            publish: true\n        }).count().catch(err => {\n            this.throw(500, '服务器内部错误')\n        })\n    } else {\n        let tagArr = tag.split(',')\n        // console.log(tagArr)\n        articles = await Article.find({\n                tags: { \"$in\": tagArr },\n                publish: true\n            })\n            .populate(\"tags\")\n            .sort({ createTime: -1 })\n            .limit(limit)\n            .skip(skip).catch(err => {\n                ctx.throw(500, '服务器内部错误')\n            });\n        allNum = await Article.find({\n            tags: { \"$in\": tagArr }\n        }).count().catch(err => {\n            ctx.throw(500, '服务器内部错误')\n        })\n    }\n\n    allPage = Math.ceil(allNum / limit)\n\n    ctx.body = {\n        success: true,\n        articles,\n        allPage\n    }\n\n    return { articles, allPage};\n}\n\n\nexport async function modifyArticle(ctx) {\n    // console.log(ctx.request.body)\n    const id = ctx.params.id;\n    const postData = ctx.request.body;\n\n    if (postData.title == '') {\n        return ctx.body = {\n            code: 400,\n            message: \"标题不能为空\"\n        }\n    }\n    if (postData.content == '') {\n        return ctx.body = {\n            code: 400,\n            message: \"文章内容不能为空\"\n        }\n    }\n    if (postData.htmlContent == '') {\n        return ctx.body = {\n            code: 400,\n            message: \"HTML文本为空\"\n        };\n    }\n    /*if (postData.tags.length === 0) {\n      ctx.throw(400, '标签不能为空')\n    }*/\n\n    const article = await Article.findByIdAndUpdate(id, { $set: postData }).catch(err => {\n        if (err.name === 'CastError') {\n            ctx.throw(400, '文章不存在');\n        } else {\n            ctx.throw(500, '服务器内部错误')\n        }\n    });\n    ctx.body = {\n        code: 200,\n        message: '保存成功'\n    }\n}\n\nexport async function getArticle(ctx) {\n    const id = ctx.params.id;\n    if (!id) {\n        return ctx.body = {\n            code: 400,\n            message: \"请求参数错误\"\n        }\n    }\n    /*if (tags.length === 0) {\n      ctx.throw(400, '标签不能为空')\n    }*/\n    const article = await Article\n        .findById(id)\n        .populate(\"tags\")\n        .catch(err => {\n            if (err.name === 'CastError') {\n                return ctx.body = {\n                    code: 400,\n                    message: \"文章不存在或已删除\"\n                }\n            } else {\n                return ctx.body = {\n                    code: 500,\n                    message: \"服务器内部错误\"\n                }\n            }\n        });\n\n    ctx.body = {\n        code: 200,\n        article: article\n    }\n\n    return ctx.body;\n}\n\nexport async function deleteArticle(ctx) {\n    const id = ctx.params.id;\n    const article = await Article.findByIdAndRemove(id).catch(err => {\n        if (err.name === 'CastError') {\n            ctx.throw(400, 'id不存在');\n        } else {\n            ctx.throw(500, '服务器内部错误')\n        }\n    });\n    ctx.body = {\n        code: 200,\n        message: '删除成功'\n    };\n}\n\nexport async function publishArticle(ctx) {\n    const id = ctx.params.id;\n    const article = await Article.findByIdAndUpdate(id, { $set: { publish: true } }).catch(err => {\n        if (err.name === 'CastError') {\n            this.throw(400, 'id不存在');\n        } else {\n            this.throw(500, '服务器内部错误')\n        }\n    });\n    ctx.body = {\n        success: true\n    }\n}\n\nexport async function notPublishArticle(ctx) {\n    const id = ctx.params.id;\n    const article = await Article.findByIdAndUpdate(id, { $set: { publish: false } }).catch(err => {\n        if (err.name === 'CastError') {\n            this.throw(400, 'id不存在');\n        } else {\n            this.throw(500, '服务器内部错误')\n        }\n    });\n    ctx.body = {\n        success: true\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./controllers/article_ctr.js","module.exports = require(\"moment\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 20\n// module chunks = 0","import Tag from '../models/tag_model';\n\nexport async function createTag(ctx) {\n    const tagName = ctx.request.body.name;\n    if (tagName == \"\") {\n        return ctx.body = {\n            code: 400,\n            message: \"标签名不能为空\"\n        }\n    }\n\n    const tag = await Tag.findOne({ name: tagName }).catch(err => {\n        ctx.throw(500, '服务器错误')\n    });\n\n    if (tag !== null) {\n        return ctx.body = {\n            code: 200,\n            tag: tag\n        }\n    }\n    const newTag = new Tag({\n        name: tagName\n    });\n\n    const result = await newTag.save().catch(err => {\n        ctx.throw(500, '服务器错误')\n    });\n\n    ctx.body = {\n        code: 200,\n        tag: result\n    }\n}\n\nexport async function getAllTags(ctx) {\n    const tags = await Tag.find().catch(err => {\n        ctx.throw(500, '服务器内部错误')\n    });\n\n    ctx.body = {\n        code: 200,\n        tags\n    }\n\n    return tags;\n}\n\n\n// WEBPACK FOOTER //\n// ./controllers/tags_ctr.js","import QiNiu from 'qiniu';\nimport Busboy from 'busboy';\nimport Config from '../config';\nimport Util from 'util';\nimport md5 from \"md5\";\nimport { addPhoto } from './photo_ctrl';\n\nconst { ACCESS_KEY, SECRET_KEY } = Config.upload;\n\nfunction getToken(bucket) {\n    let _bucket = bucket || 'hynal-com';\n\n    const options = {\n        scope: _bucket,\n        expires: 120 * 60 // 秒\n    };\n\n    const mac = new QiNiu.auth.digest.Mac(ACCESS_KEY, SECRET_KEY);\n    const putPolicy = new QiNiu.rs.PutPolicy(options);\n    const uploadToken = putPolicy.uploadToken(mac);\n\n    // return {\n    //     token: uploadToken,\n    //     expires: + new Date() + 120 * 60 * 1000\n    // }\n\n    return uploadToken;\n}\n\nexport async function uploadToQiniu(ctx) {\n    let req = ctx.req,\n        res = ctx.res;\n\n    let busboy = new Busboy({ headers: req.headers }),\n        buf = Buffer.alloc(0);\n\n    let nowTime = +new Date();\n\n    let config = new QiNiu.conf.Config();\n    // 空间对应的机房\n    config.zone = QiNiu.zone.Zone_z0;\n    config.useCdnDomain = true;\n\n    const formUploader = new QiNiu.form_up.FormUploader(config);\n    const putExtra = new QiNiu.form_up.PutExtra();\n\n    let params = {};\n\n    return new Promise((resolve, reject) => {\n        busboy.on('file', function(fieldname, file, filename, encoding, mimetype) {\n            console.log('File [' + fieldname + ']: filename: ' + filename + ', encoding: ' + encoding + ', mimetype: ' + mimetype);\n\n            file.on('data', function(data) {\n                console.log('File [' + fieldname + '] got ' + data.length + ' bytes');\n                buf = Buffer.concat([buf, data]);\n            });\n\n            file.on('end', function() {\n                console.log('File [' + fieldname + '] Finished');\n                let time = +new Date();\n                let key = params.prefix ? `${params.prefix}${md5(time )}` : md5(time);\n                // 获取上传token\n                let UPLOAD_TOKEN = getToken(params.bucket || null);\n\n                formUploader.put(UPLOAD_TOKEN, key, buf, putExtra, function(respErr,\n                    respBody, respInfo) {\n                    if (respErr) {\n                        // throw respErr;\n                        resolve({\n                            code: 500,\n                            ...respErr\n                        })\n                    }\n                    if (respInfo.statusCode == 200) {\n                        console.log('respBody200', respBody);\n                        resolve({\n                            code: 200,\n                            data: {\n                                filename,\n                                ...respBody\n                            }\n                        })\n                    } else {\n                        console.log('respInfo', respInfo.statusCode);\n                        console.log('respBody', respBody);\n                        resolve({\n                            code: 200,\n                            data: {\n                                filename,\n                                ...respBody\n                            }\n                        })\n                    }\n                });\n            });\n\n        });\n\n        busboy.on('field', function(fieldname, val, fieldnameTruncated, valTruncated, encoding, mimetype) {\n            console.log('Field [' + fieldname + ']: value: ' + Util.inspect(val));\n            params[fieldname] = val;\n        });\n\n        req.pipe(busboy);\n\n    })\n}\n\nexport async function fileUpload(ctx) {\n    let result = await uploadToQiniu(ctx);\n\n    ctx.body = result;\n}\n\nexport async function getPhotoes (ctx) {\n    let params = ctx.query;\n\n    const bucket = params.bucket || 'hynal-com';\n\n    let defaultOpts = {\n        limit: 10,\n        prefix: 'photo/',\n    };\n\n    const options = Object.assign(defaultOpts, params);\n    const mac = new QiNiu.auth.digest.Mac(ACCESS_KEY, SECRET_KEY);\n    const config = new QiNiu.conf.Config();\n    //config.useHttpsDomain = true;\n    config.zone = QiNiu.zone.Zone_z0;\n    const bucketManager = new QiNiu.rs.BucketManager(mac, config);\n\n    let result = await new Promise((resolve, reject) => {\n        bucketManager.listPrefix(bucket, options, function(err, respBody, respInfo) {\n            if (err) {\n                console.log(err);\n                ctx.throw(500, err);\n            }\n            if (respInfo.statusCode == 200) {\n                //如果这个nextMarker不为空，那么还有未列举完毕的文件列表，下次调用listPrefix的时候，\n                //指定options里面的marker为这个值\n                let nextMarker = respBody.marker;\n                let commonPrefixes = respBody.commonPrefixes;\n                resolve({\n                    code: 200,\n                    data: respBody\n                })\n            } else {\n                resolve({\n                    code: 400,\n                    data: respBody\n                })\n            }\n        });\n    });\n\n    ctx.body = result;\n\n}\n\n\n// WEBPACK FOOTER //\n// ./controllers/qiniu_ctrl.js","import Photo from '../models/photo_model';\nimport { uploadToQiniu } from './qiniu_ctrl';\n\nexport async function addPhoto(ctx) {\n    let postData = ctx.request.body;\n\n    const result = await Photo.create(postData).catch(err => {\n        console.log('[Server ERROR]', err);\n        ctx.throw(500, '服务器错误')\n    });\n\n    ctx.body = {\n        code: 200,\n        photoes: result\n    }\n}\n\n\nexport async function getPhotoes(ctx) {\n    let query = ctx.query,\n        page = +query.page || 0,\n        size = +query.size || 10,\n        skip = 0;\n\n    if (page !== 0) {\n        skip = size * (page - 1);\n    }\n\n    let photoes = await Photo.find()\n        .limit(size)\n        .skip(skip)\n        .catch( err => ctx.throw(500, err));\n\n    let allNum = await Photo.count().catch( err => ctx.throw(500, err));\n\n\n    ctx.body= {\n        code: 200,\n        photoes,\n        allPage: Math.ceil(allNum / size)\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./controllers/photo_ctrl.js","module.exports = require(\"babel-runtime/helpers/objectWithoutProperties\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/objectWithoutProperties\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"react-router-dom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router-dom\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"classnames\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"classnames\"\n// module id = 27\n// module chunks = 0","import koa from 'koa';\nimport bodyParser from 'koa-bodyparser';\n// import session from 'koa-session-minimal';\n// import mySqlSession from 'koa-mysql-session';\nimport mongoose from 'mongoose';\nimport koaStatic from 'koa-static';\nimport views from 'koa-views';\nimport path from 'path';\nimport webpack from 'webpack';\nimport { devMiddleware, hotMiddleware } from 'koa-webpack-middleware';\nimport devConfig from '../build/webpack.dev.config';\n\nimport _Config from './config';\nimport Router from './router';\n\nconst App = new koa();\nconst compile = webpack(devConfig);\n\n// // 配置存储session信息的mysql\n// let store = new mySqlSession({\n//     user: _Config.database.USERNAME,\n//     password: _Config.database.PASSWORD,\n//     database: _Config.database.DATABASE,\n//     host: _Config.database.HOST,\n// });\n\n// // 存放sessionId的cookie配置\n// let cookie = {\n//     maxAge: '', // cookie有效时长\n//     expires: '', // cookie失效时间\n//     path: '', // 写cookie所在的路径\n//     domain: '', // 写cookie所在的域名\n//     httpOnly: '', // 是否只用于http请求中获取\n//     overwrite: '', // 是否允许重写\n//     secure: '',\n//     sameSite: '',\n//     signed: '',\n\n// };\n\n// // 使用session中间件\n// App.use(session({\n//     key: 'USER_SID',\n//     store: store,\n// }));\n\nmongoose.Promise = Promise;\nmongoose.connect(_Config.mongodb.url, _Config.mongodbSecret);\nmongoose.connection.on('error', console.error);\n\nApp.use(devMiddleware(compile, {\n    // watch options (only lazy: false)\n    watchOptions: {\n        aggregateTimeout: 300,\n        poll: true\n    },\n    // public path to bind the middleware to\n    // use the same as in webpack\n    publicPath: devConfig.output.publicPath,\n\n    // options for formating the statistics\n    stats: {\n        colors: true\n    }\n}))\n\nApp.use(hotMiddleware(compile, {\n    // log: console.log,\n    // path: '/__webpack_hmr',\n    // heartbeat: 10 * 1000\n}))\n\n// 配置服务端模板渲染引擎中间件\nApp.use(views(path.join(__dirname, '../output/views'), {\n    extension: 'html',\n    map: { html: 'ejs' }\n}))\n\n// 配置静态资源加载中间件\nApp.use(koaStatic(\n    path.join(__dirname, '../output/')\n));\n\n// 使用ctx.body解析中间件\nApp.use(bodyParser());\n\n// 路由\nApp.use(Router.routes())\n    .use(Router.allowedMethods());\n\n// 404\nApp.use(pageNotFound());\n\nApp.listen(_Config.port, () => {\n    console.log('\\n[node-koa-test] start-quick is starting at port 8080');\n});\n\n\nfunction pageNotFound() {\n    return async (ctx, next) => {\n        let response = ctx.response;\n        if (response.status == 404) {\n            ctx.render('404');\n        }\n    };\n}\n\n\n// WEBPACK FOOTER //\n// ./index.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 30\n// module chunks = 0","module.exports = require(\"koa-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-static\"\n// module id = 31\n// module chunks = 0","module.exports = require(\"koa-views\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-views\"\n// module id = 32\n// module chunks = 0","module.exports = require(\"koa-webpack-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-webpack-middleware\"\n// module id = 33\n// module chunks = 0","var merge = require('webpack-merge')\nvar webpack = require('webpack')\nvar baseWebpackConfig = require('./webpack.base.config');\nvar serverWebpackConfig = require('./webpack.server.config.js');\n\nmodule.exports = [merge(baseWebpackConfig, {\n    devtool: 'source-map',\n    plugins: [\n\n        new webpack.DefinePlugin({\n            'process.env': {\n                NODE_ENV: JSON.stringify('development')\n            }\n        }),\n        new webpack.optimize.OccurrenceOrderPlugin(),\n        new webpack.HotModuleReplacementPlugin(),\n        new webpack.NoEmitOnErrorsPlugin()\n    ]\n}), serverWebpackConfig];\n\n\n// WEBPACK FOOTER //\n// ../build/webpack.dev.config.js","module.exports = require(\"babel-runtime/core-js/json/stringify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/json/stringify\"\n// module id = 35\n// module chunks = 0","module.exports = require(\"webpack-merge\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-merge\"\n// module id = 36\n// module chunks = 0","const webpack = require('webpack');\nconst path = require('path');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\nconst sourcePath = path.join(__dirname, '../web');\nconst outputPath = path.join(__dirname, '../output/dist/');\n\nmodule.exports = {\n    context: sourcePath,\n    entry: {\n        admin: [\n            'eventsource-polyfill',\n            'webpack-hot-middleware/client?path=/__webpack_hmr&timeout=20000',\n            '../web/page/admin/index.js',\n        ],\n        blog: [\n            'eventsource-polyfill',\n            'webpack-hot-middleware/client?path=/__webpack_hmr&timeout=20000',\n            '../web/page/blog/index.js',\n        ],\n        vendor: ['react', 'react-dom', 'axios', 'classnames', 'antd']\n    },\n    output: {\n        path: outputPath,\n        publicPath: '/output/dist/',\n        filename: 'js/[name].js',\n    },\n    module: {\n        rules: [{\n            test: /\\.(js|jsx)$/,\n            exclude: /node_modules/,\n            use: [{\n                loader: 'babel-loader',\n                options: {\n                    presets: ['react-hmre', 'react'],\n                    cacheDirectory: true\n                }\n            }, ],\n        }, {\n            test: /\\.css$/,\n            use: ExtractTextPlugin.extract({\n                fallback: \"style-loader\",\n                use: ['css-loader']\n            }),\n        }, {\n            test: /\\.less$/,\n            use: ExtractTextPlugin.extract({\n                fallback: \"style-loader\",\n                use: ['css-loader', 'less-loader']\n            })\n        }, {\n            test: /.(gif|jpg|png)$/,\n            use: [{\n                loader: 'url-loader',\n                options: {\n                    limit: 8192,\n                    name: 'images/[name].[hash:8].[ext]'\n                }\n            }]\n        }, {\n            test: /\\.(woff|woff2|eot|ttf|otf|svg)$/,\n            use: [{\n                    loader: 'file-loader',\n                    options: {\n                        limit: 8192,\n                        name: 'font/[name].[hash:8].[ext]'\n                    }\n                }\n\n            ]\n        }, {\n            test: require.resolve('jquery'),\n            use: [{\n                loader: 'expose-loader',\n                options: '$'\n            }, {\n                loader: 'expose-loader',\n                options: 'Zepto'\n            }]\n        }]\n    },\n    resolve: {\n        extensions: ['.js', '.jsx'],\n        modules: [\n            sourcePath,\n            'node_modules'\n        ],\n        alias: {\n            Components: path.join(__dirname, '../web/components/')\n        }\n    },\n    plugins: [\n        new ExtractTextPlugin('css/[name].css'),\n        new webpack.optimize.CommonsChunkPlugin({\n            names: ['vendor'],\n            minChunks: Infinity,\n            filename: 'js/[name].js',\n        })\n    ]\n};\n\n\n// WEBPACK FOOTER //\n// ../build/webpack.base.config.js","module.exports = require(\"extract-text-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"extract-text-webpack-plugin\"\n// module id = 38\n// module chunks = 0","module.exports = require(\"jquery\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jquery\"\n// module id = 39\n// module chunks = 0","import router from 'koa-router';\nimport _Api from './api';\nimport _Page from './page';\n\nconst Router = new router();\n\nRouter.use('/api', _Api.routes(), _Api.allowedMethods());\nRouter.use('/', _Page.routes());\n\n\n// module.exports = Router;\nexport default Router;\n\n\n// WEBPACK FOOTER //\n// ./router/index.js","import router from 'koa-router';\nimport { apiVerify } from '../middleware/verify';\nimport { singUp, signIn } from '../controllers/user_ctr';\nimport { createArticle, getAllArticles, getArticle, deleteArticle, modifyArticle } from '../controllers/article_ctr';\nimport { getOneContent } from '../controllers/common_ctr';\nimport { createTag, getAllTags } from '../controllers/tags_ctr';\nimport { fileUpload } from '../controllers/qiniu_ctrl';\nimport { addPhoto, getPhotoes } from '../controllers/photo_ctrl';\n\nconst Router = new router();\n\nlet _Api = Router.get('/signout', (ctx) => {\n        ctx.session = null;\n        ctx.body = {\n            code: 200,\n            message: '登出成功'\n        };\n    })\n    .get('/get/article', async (ctx) => {\n        let result = await getArticles(ctx.request.query);\n\n        ctx.body = result;\n    })\n    .get(\"/get/alltags\", getAllTags)\n    .get(\"/get/all/articles\", getAllArticles)\n    .get('/get/article/:id', getArticle)\n    .get(\"/one\", getOneContent)\n    .get(\"/get/photoes\", getPhotoes)\n    .delete('/article/:id', apiVerify, deleteArticle)\n    .post('/singup', singUp)\n    .post('/signin', signIn)\n    .post('/create/tag', apiVerify, createTag)\n    .post('/create/article', apiVerify, createArticle)\n    .post('/update/article/:id', apiVerify, modifyArticle)\n    .post('/fileupload', apiVerify, fileUpload)\n    .post('/add/photo', apiVerify, addPhoto);\n\n// module.exports = _Api;\nexport default _Api;\n\n\n// WEBPACK FOOTER //\n// ./router/api.js","import User from '../models/user_model';\nimport md5 from \"md5\";\nimport jwt from 'jsonwebtoken';\nimport Config from '../config';\n\n/**\n * 注册操作\n * @param   {obejct} ctx 上下文对象\n */\n\nexport async function singUp(ctx) {\n    let formData = ctx.request.body;\n\n    let existOne = await User.find({\n        $or: [{\n            username: formData.userName\n        }, {\n            email: formData.email\n        }]\n    }).exec();\n\n    if (existOne.length == 0) {\n        let newUser = new User({\n            name: '',\n            username: formData.userName,\n            password: md5(formData.password).toUpperCase(),\n            email: formData.email,\n            avatar: '',\n            createTime: new Date()\n        });\n\n        await newUser.save()\n            .then(res => {\n                ctx.body = {\n                    code: 200,\n                    message: '注册成功'\n                };\n            })\n            .catch(err => {\n                ctx.throw(500, err)\n            });\n    } else {\n        ctx.body = {\n            code: 501,\n            message: '用户名或邮箱已注册'\n        };\n    }\n}\n\n\n/**\n * 登录操作\n * @param  {obejct} ctx 上下文对象\n */\nexport async function signIn(ctx) {\n    let formData = ctx.request.body;\n\n    let user = await User.findOne({\n        username: formData.userName\n    }).exec();\n\n    if (user) {\n        if (formData.password === user.password) {\n            let exp = Math.floor(Date.now() / 1000) + 24 * 60 * 60;\n            const token = jwt.sign({\n                uid: user._id,\n                name: user.name,\n                exp: exp\n            }, Config.jwt.secret);\n\n            ctx.cookies.set('access_token', token, {\n                maxAge: 24 * 60 * 60 * 1000,\n                expires: exp,\n                httpOnly: false, // 是否只用于http请求中获取\n                overwrite: false // 是否允许重写\n            });\n\n            ctx.body = {\n                code: 200,\n                uid: user._id,\n                name: user.name,\n                token: token\n            }\n        } else {\n            ctx.body = {\n                code: 400,\n                message: '密码错误'\n            }\n        }\n    } else {\n        ctx.body = {\n            code: 404,\n            message: '用户不存在'\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./controllers/user_ctr.js","import mongoose from 'mongoose'\nconst Schema = mongoose.Schema;\n\nconst UserSchema = new Schema({\n    name: String,\n    username: String,\n    password: String,\n    avatar: String,\n    email: String,\n    createTime: String\n});\n\nmodule.exports = mongoose.model('User', UserSchema);\n\n\n// WEBPACK FOOTER //\n// ./models/user_model.js","import mongoose from 'mongoose';\nimport moment from 'moment';\n\nmoment.locale('zh-cn');\n\nconst Schema = mongoose.Schema;\n\nconst ArticleSchema = new Schema({\n    title: String,\n    content: String,\n    htmlContent: String,\n    abstract: String,\n    tags: [{\n        type: Schema.Types.ObjectId,\n        ref: 'Tag'\n    }],\n    publish: {\n        type: Boolean,\n        default: false\n    },\n    createTime: {\n        type: Date\n    },\n    lastEditTime: {\n        type: Date,\n        default: Date.now\n    },\n});\n\nArticleSchema.set('toJSON', { getters: true, virtuals: true });\nArticleSchema.set('toObject', { getters: true, virtuals: true });\n\nArticleSchema.path('createTime').get(function(v) {\n    return moment(v).format('lll');\n});\nArticleSchema.path('lastEditTime').get(function(v) {\n    return moment(v).format('lll');\n});\n\nmodule.exports = mongoose.model('Article', ArticleSchema);\n\n\n// WEBPACK FOOTER //\n// ./models/article_model.js","import Superagent from 'superagent';\nimport Cheerio from 'cheerio';\n\nexport async function getOneContent(ctx) {\n    let result = {\n        code: 200,\n        message: '',\n        data:[]\n    };\n\n    await Superagent.get(\"http://wufazhuce.com\")\n        .then(function(res) {\n            if (!res) {\n                result = {\n                    code: 500,\n                    message: err,\n                    data: []\n                };\n            }\n            let $ = Cheerio.load(res.text);\n\n            let data = [];\n            $('#carousel-one .item').each(function(idx, element) {\n                let $element = $(element);\n\n                data.push({\n                    imgUrl: $element.find('.fp-one-imagen').attr('src'),\n                    text: $element.find('.fp-one-cita a').text()\n                })\n            });\n\n            result['data'] = data;\n        });\n\n    ctx.body = result;\n\n}\n\n\n// WEBPACK FOOTER //\n// ./controllers/common_ctr.js","module.exports = require(\"superagent\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"superagent\"\n// module id = 46\n// module chunks = 0","module.exports = require(\"cheerio\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cheerio\"\n// module id = 47\n// module chunks = 0","import mongoose from 'mongoose'\nconst Schema = mongoose.Schema;\nconst TagSchema = new Schema({\n    name: {\n        type: String,\n        default: ''\n    }\n}, {\n    toJSON: {\n        getters: true,\n        virtuals: true\n    },\n    toObject: {\n        getters: true,\n        virtuals: true\n    }\n});\n\nmodule.exports = mongoose.model('Tag', TagSchema);\n\n\n// WEBPACK FOOTER //\n// ./models/tag_model.js","module.exports = require(\"babel-runtime/core-js/object/assign\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/assign\"\n// module id = 49\n// module chunks = 0","module.exports = require(\"qiniu\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"qiniu\"\n// module id = 50\n// module chunks = 0","module.exports = require(\"busboy\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"busboy\"\n// module id = 51\n// module chunks = 0","module.exports = require(\"util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"util\"\n// module id = 52\n// module chunks = 0","import mongoose from 'mongoose';\nimport moment from 'moment';\n\nmoment.locale('zh-cn');\n\nconst Schema = mongoose.Schema;\nconst PhotoSchema = new Schema({\n    name: String,\n    key: String,\n    desc: String,\n    like: {\n        type: Number,\n        default: 0\n    },\n    createTime: {\n        type: Date,\n        default: Date.now\n    }\n});\n\nPhotoSchema.path('createTime').get(function(v) {\n    return moment(v).format('lll');\n});\n\nmodule.exports = mongoose.model('Photo', PhotoSchema);\n\n\n// WEBPACK FOOTER //\n// ./models/photo_model.js","import router from 'koa-router';\nimport fs from 'fs';\nimport { pageVerify } from '../middleware/verify';\nimport { getAllTags } from '../controllers/tags_ctr';\nimport { getAllArticles, getArticle } from '../controllers/article_ctr';\nimport ReactDOMServer from 'react-dom/server';\nimport React from 'react';\nimport { StaticRouter } from 'react-router';\nimport App from '../../web/page/blog/App';\n\nconst Router = new router();\n\nlet render = async (ServerData, ctx) => {\n    const html = ReactDOMServer.renderToString(\n        <StaticRouter context={{}} location={ctx.request.url}>\n            <App InitData={ServerData} />\n        </StaticRouter>\n    )\n\n    await ctx.render('blog', {\n        html,\n        ServerData\n    });\n};\n\n\nlet _Page = Router\n    .get('/', async(ctx, next) => {\n        let tags = await getAllTags(ctx);\n        let { articles, allPage} = await getAllArticles(ctx);\n\n        let ServerData = {tags, articles, allPage, curTagId: ctx.query.tag};\n\n        const html = ReactDOMServer.renderToString(\n            <StaticRouter context={{}} location={ctx.request.url}>\n                <App InitData={ServerData} />\n            </StaticRouter>\n        )\n\n        await ctx.render('blog', {\n            html,\n            ServerData\n        });\n    })\n    .get('article/:id', async(ctx, next) => {\n\n        if (!ctx.params.id) ctx.redirect('/');\n\n        let ServerData = await getArticle(ctx);\n\n        const html = ReactDOMServer.renderToString(\n            <StaticRouter context={{}} location={ctx.request.url}>\n                <App InitData={ServerData} />\n            </StaticRouter>\n        )\n\n        await ctx.render('blog', {\n            html,\n            ServerData\n        });\n    })\n    .get('admin', pageVerify, async(ctx, next) => {\n        await ctx.render('admin', {\n            title: '博客后台'\n        });\n    })\n    .get('admin/*', pageVerify, async(ctx, next) => {\n\n        await ctx.render('admin', {\n            title: '博客后台'\n        });\n    });\n\n// module.exports = _Page;\nexport default _Page;\n\n\n// WEBPACK FOOTER //\n// ./router/page.js","module.exports = require(\"react-dom/server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom/server\"\n// module id = 55\n// module chunks = 0","module.exports = require(\"react-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router\"\n// module id = 56\n// module chunks = 0","import React, { Component } from 'react';\nimport { Route, Link, Switch } from 'react-router-dom';\nimport Articles from '../Articles';\nimport Article from '../Article';\nimport Header from '../Header';\nimport Footer from '../Footer';\n\nconst FadingRoute = ({ component: Component, path, ...other }) => (\n    <Route exact path={path} render={props => (\n        <Component {...other}/>\n    )}/>\n)\nexport default class App extends Component {\n    constructor(props) {\n        super();\n        this.state = {\n            minHeight: '100%'\n        };\n    }\n\n    componentDidMount() {\n        this.setState({\n            minHeight: window.document && document.documentElement.clientHeight\n        })\n    }\n\n    getQuery = (key) => {\n        let search = window.location.search,\n            ret = Object.create(null);\n\n        if (typeof search !== 'string') {\n            return key ? null : ret;\n        }\n\n        search = search.trim().replace(/^[?#&]/, '');\n\n        if (!search) {\n            return key ? null : ret;\n        }\n\n        search.split('&').forEach(function (param) {\n            let parts = param.replace(/\\+/g, ' ').split('=');\n            let key = parts.shift();\n            let val = parts.length > 0 ? parts.join('=') : undefined;\n\n            val = val === undefined ? null : decodeURIComponent(val);\n\n            ret[decodeURIComponent(key)] = val;\n        });\n\n\n        return key ? ret[key] : ret;\n\n    }\n\n    render() {\n        const { minHeight } = this.state;\n        const { InitData } = this.props;\n        return (\n            <div className=\"blog-layout\" style={{minHeight: minHeight}}>\n                <Header />\n                    <FadingRoute path=\"/\" component={Articles} {...InitData} getQuery={ this.getQuery } />\n                    <FadingRoute path=\"/article/:id\" component={Article} {...InitData} getQuery={ this.getQuery } />\n                <Footer />\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ../web/page/blog/App/index.js","module.exports = require(\"babel-runtime/core-js/object/create\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/create\"\n// module id = 58\n// module chunks = 0","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Axios from 'axios';\nimport classNames from 'classnames';\n\nexport default class Articles extends Component {\n    constructor(props) {\n        super(props);\n        const { articles, tags, curTagId, allPage } = props;\n        this.state = {\n            articles,\n            tags,\n            curTagId,\n            allPage\n        }\n    }\n\n    getArticles = (tagid)=> {\n        if (tagid != this.state.curTagId)\n            Axios.get('/api/get/all/articles', {\n                params: {\n                    tag: tagid || ''\n                }\n            })\n            .then( res => {\n                let resData = res.data;\n                this.setState({\n                    articles: resData.articles,\n                    curTagId: tagid\n                })\n            })\n    }\n\n    render() {\n        const { articles, tags, curTagId } = this.state;\n        return (\n            <div className=\"blog-articles-layout\">\n                <div className=\"one\">\n                    <img src=\"http://image.wufazhuce.com/FoBEubfSGAroMoMdI_jx0nH0gh7y\" />\n                    <p className='text'>长大了一些的我们，开始懂得不能再这样轻易哭泣，也拥有了更复杂的情感，学着在各种说不清原因的行为里作出抉择。那一天，我们也陷入了选择的困境，但我们对这种迷失毫无察觉。</p>\n                </div>\n                <div className=\"blog-tags\">\n                    <Link to={{pathname: '/'}} onClick={ () => { this.getArticles() } } className={ classNames(\"tag\", {'tag-active': !curTagId}) } >所有文章</Link>\n                    { tags && tags.length ? tags.map( tag => <Link to={{pathname: '/', search: `?tag=${tag.id}`}} onClick={ () => { this.getArticles(tag.id) } } className={ classNames(\"tag\", {'tag-active': curTagId == tag.id}) } key={tag.id} >{tag.name}</Link>) : null}\n                </div>\n                <div className=\"blog-articles-list\">\n                    <ul>\n                        {articles && articles.length ? articles.map( (article, index)=> <li className=\"article-tiem\" key={article.id}><Link to={`/article/${article.id}`} >\n                            <span className=\"article-num\">{( index + 1)}</span>\n                            <h3>{article.title}</h3>\n                        </Link></li>) : null}\n                    </ul>\n                </div>\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ../web/page/blog/Articles/index.js","import React, { Component } from 'react';\nimport Axios from 'axios';\n\nexport default class Article extends Component {\n    constructor(props) {\n        super(props);\n        const { article } = props;\n        this.state = {\n            article\n        };\n        console.log('Article', this.state);\n    }\n\n    componentWillMount() {\n        if (!this.state.article) {\n            Axios.get(`/api/get/article/${this.props.param.id}`)\n            .then( res => {\n                let resData = res.data;\n                this.setState({\n                    articles: resData.article,\n                })\n            })\n        }\n    }\n\n    render() {\n\n        return (\n            <div className=\"blog-article\">\n                <article>\n                    <h2 class=\"article-title\"><p><em>{article.title}</em></p></h2>\n                    <p className=\"article-desc\">\n                        <span>发布时间: {article.createTime}</span>\n                        { article && article.tags.length ? <span className=\"ml\">article.tags.map( tag => tag.name + ' ')</span> : null }\n                    </p>\n                    <div className=\"article-content\">\n                    </div>\n                </article>\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ../web/page/blog/Article/index.js","import React, { Component } from 'react';\nimport Icon from '../../../components/Icon';\n\nconst Header = (props) => (\n    <header className=\"blog-header clearfix\">\n        <span className=\"logo\">浮生记</span>\n        <Icon type=\"menu\" className='menu fr' />\n    </header>\n)\n\nexport default Header;\n\n\n// WEBPACK FOOTER //\n// ../web/page/blog/Header/index.js","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\n/**\n *  Icons\n *\n */\nclass Icon extends React.Component {\n    static propTypes = {\n\n        type: PropTypes.string,\n        size: PropTypes.string\n    };\n\n    static defaultProps = {\n        type: 'success',\n        size: 'small'\n    };\n\n    render() {\n        const {type, size, className, ...others} = this.props;\n\n        const cls = classNames({\n            ['icon-' + type]: type !== 'loading',\n            'icon-small': size === 'small',\n            'icon-large': size === 'large',\n            'icon-spin': type === 'loading',\n            [className]: className\n        });\n\n        return (\n            <i {...others} className={cls}/>\n        );\n    }\n}\n\nexport default Icon;\n\n\n// WEBPACK FOOTER //\n// ../web/components/Icon/index.js","module.exports = require(\"babel-runtime/helpers/defineProperty\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/defineProperty\"\n// module id = 63\n// module chunks = 0","module.exports = require(\"prop-types\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"prop-types\"\n// module id = 64\n// module chunks = 0","import React, { Component } from 'react';\nconst Footer = (props) => (\n    <footer className='blog-footer tc'>2017 Fushengji, All rights reserved</footer>\n)\n\nexport default Footer;\n\n\n// WEBPACK FOOTER //\n// ../web/page/blog/Footer/index.js","const nodeExternals = require('webpack-node-externals');\nconst path = require('path');\nconst sourcePath = path.join(__dirname, '../server');\nconst outputPath = path.join(__dirname, '../output/dist/');\n\nmodule.exports = {\n    context: sourcePath,\n    entry: '../server/index.js',\n    output: {\n        path: outputPath,\n        filename: 'js/server.js'\n    },\n    target: 'node',\n    node: {\n        __dirname: false,\n        __filename: false\n    },\n    resolve: {\n        modules: ['node_modules', 'src'],\n        extensions: ['*', '.js', '.json']\n    },\n    module: {\n        rules: [{\n            test: /\\.js$/,\n            exclude: /node_modules/,\n            loader: 'babel-loader'\n        }]\n    },\n    externals: nodeExternals(),\n    devtool: 'source-map'\n};\n\n\n// WEBPACK FOOTER //\n// ../build/webpack.server.config.js","module.exports = require(\"webpack-node-externals\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-node-externals\"\n// module id = 67\n// module chunks = 0"],"sourceRoot":""}